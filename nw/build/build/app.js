
// lib/cqls/distributions.js
function isEven(t){return 0===t%2?!0:!1}function isOdd(t){return 0===(t-1)%2?!0:!1}function sgn(t){return t>0?1:0>t?-1:0}function ascend(t,n){return t-n}function descend(t,n){return n-t}function genPow(t,n,i){for(var r=1,o=0;n>o;o++)r*=t+o*i;return r}function risePow(t,n){return genPow(t,n,1)}function perm(t,n){for(var i=1,r=0;n>r;r++)i*=t-r;return i}function factorial(t){return perm(t,t)}function binomial(t,n){if(0>n||n>t)return 0;for(var i=1,r=0;n>r;r++)i*=(t-r)/(n-r);return i}function polyLog(t,n){for(var i=0,r=1,o=1e-4;Math.pow(n,r)/Math.pow(r,t)>o;)i+=Math.pow(n,r)/Math.pow(r,t),r++;return i}function sample(t,n,i){var r,o,a,u=t.length,e=Array(n);if(1==i)for(var s=0;n>s;s++)a=Math.floor(u*Math.random()),e[s]=t[a];else for(var h=0;n>h;h++)o=u-h,a=Math.floor(o*Math.random()),e[h]=t[a],r=t[o-1],t[o-1]=t[a],t[a]=r;return e}function logGamma(t){var n,i,r,o=[76.18009173,-86.50532033,24.01409822,-1.231739516,.00120858003,-536382e-11],a=2.50662827465,u=5.5;n=t-1,i=n+u,i=(n+.5)*Math.log(i)-i,r=1;for(var e=1;6>=e;e++)n+=1,r+=o[e-1]/n;return i+Math.log(a*r)}function gamma(t){return Math.exp(logGamma(t))}function gammaSeries(t,n){for(var i=100,r=3e-7,o=1/n,a=n,u=logGamma(n),e=o,s=1;i>=s&&(a++,e=e*t/a,o+=e,!(Math.abs(e)<Math.abs(o)*r));s++);return o*Math.exp(-t+n*Math.log(t)-u)}function gammaCF(t,n){for(var i,r,o,a=100,u=3e-7,e=logGamma(n),s=0,h=0,c=1,f=t,M=0,l=1,m=1,p=1;a>=p;p++)if(i=1*p,r=i-n,c=(f+c*r)*m,M=(l+M*r)*m,o=i*m,f=t*c+o*f,l=t*M+o*l,0!==f){if(m=1/f,s=l*m,u>Math.abs((s-h)/s))break;h=s}return Math.exp(-t+n*Math.log(t)-e)*s}function gammaCDF(t,n){return 0>=t?0:n+1>t?gammaSeries(t,n):1-gammaCF(t,n)}function betaCF(t,n,i){for(var r,o,a,u,e,s,h,c,f=100,M=3e-7,l=1,m=1,p=1,D=n+i,d=n+1,b=n-1,v=1-D*t/d,w=1;f>=w&&(o=w,r=o+o,a=o*(i-w)*t/((b+r)*(n+r)),c=p+a*l,e=v+a*m,a=-(n+o)*(D+o)*t/((n+r)*(d+r)),s=c+a*p,u=e+a*v,h=p,l=c/u,m=e/u,p=s/u,v=1,!(Math.abs(p-h)<M*Math.abs(p)));w++);return p}function betaCDF(t,n,i){var r;return r=0===t||1===t?0:Math.exp(logGamma(n+i)-logGamma(n)-logGamma(i)+n*Math.log(t)+i*Math.log(1-t)),(n+1)/(n+i+2)>t?r*betaCF(t,n,i)/n:1-r*betaCF(1-t,i,n)/i}function zeta(t){for(var n=4,i=Math.ceil(Math.pow(10,n/t)),r=0,o=1;i>o;o++)r+=1/Math.pow(o,t);return r}function Data(t,n,i){var r,o,a;r=t>-1/0&&1/0>t?t:0,o=n>=r&&1/0>n?n:r+1,a=i>0&&o-r>=i?i:1;for(var u,e,s=0,h=0,c=0,f=Math.round((o-r)/a)+1,M=Array(f),l=0;f>l;l++)M[l]=0;this.lower=function(){return r},this.upper=function(){return o},this.step=function(){return a},this.index=function(t){return Math.round((t-r)/a)},this.setValue=function(t){s++,h+=t,c+=t*t,u>t&&(u=t),t>e&&(e=t),M[this.index(t)]++},this.mean=function(){return h/s},this.meanSquare=function(){return c/s},this.variance=function(){return c/(s-1)-h*h/(s*(s-1))},this.stdDev=function(){return Math.sqrt(this.variance())},this.freq=function(t){return M[this.index(t)]},this.relFreq=function(t){return this.freq(t)/s},this.density=function(t){return this.relFreq(t)/a},this.size=function(){return s},this.min=function(){return u},this.max=function(){return e},this.reset=function(){for(h=0,c=0,s=0,u=o,e=r,l=0;f>l;l++)M[l]=0},this.array=function(){return M}}function CompleteData(){var t=[],n=0,i=0,r=0;this.setValue=function(o){t.push(o),n+=o,i+=o*o,r++},this.getValue=function(n){return n>=0&&r>n?t[n]:0/0},this.getValues=function(){return t},this.size=function(){return r},this.mean=function(){return n/r},this.varianceP=function(){return i/r-Math.pow(this.mean(),2)},this.stdDevP=function(){return Math.sqrt(this.varianceP())},this.variance=function(){return r/(r-1)*this.varianceP()},this.stdDev=function(){return Math.sqrt(this.variance())},this.reset=function(){t=[],n=0,i=0,r=0},this.orderStat=function(n){var i=t;return i.sort(ascend),i[n-1]},this.quantile=function(t){var n,i,o,a;return n=t>=0&&1>=t?t:.5,i=(r-1)*n+1,o=Math.floor(i),a=i-o,o==r?this.orderStat(o):this.orderStat(o)+a*(this.orderStat(o+1)-this.orderStat(o))},this.minValue=function(){return this.orderStat(1)},this.maxValue=function(){return this.orderStat(r)},this.median=function(){return this.oderStat(.5)},this.quartile=function(t){return 1==t?this.orderStat(.25):2==t?this.orderStat(.5):3==t?this.orderStat(.75):0/0},this.freq=function(n,i){for(var o=0,a=0;r>a;a++)t[a]>=n&&i>=t[a]&&o++;return o},this.relFreq=function(t,n){return this.freq(t,n)/r},this.density=function(t,n){return this.relFreq(t,n)/(n-t)}}function Distribution(t,n,i,r,o){var a,u,e,s,h,c,f,M;a=t>-1/0&&1/0>t?t:0,u=n>=a&&1/0>n?n:1,e=i>0&&u-a>=i?i:1,s=r===DISC||r===CONT?r:DISC,c=Math.round((u-a)/e)+1,o instanceof Array&&(h=o),M=s===DISC?1:e,f=new Data(a,u,e),this.minValue=function(){return a},this.maxValue=function(){return u},this.step=function(){return e},this.type=function(){return s},this.data=function(){return f},this.density=function(t){return t>=a&&u>=t?h[Math.round((t-a)/e)]:0},this.mode=function(){for(var t,n=a,i=this.density(n),r=a;u>=r;r+=e)t=this.density(r),t>i&&(i=t,n=r);return n},this.maxDensity=function(){return this.density(this.mode())},this.CDF=function(t){if(a>t)return 0;if(t>=u)return 1;for(var n=0,i=a;t>=i;i+=e)n+=this.density(i)*M;return n},this.quantile=function(t){var n,i,r,o,h,c;if(0===t)return a;if(1===t)return u;if(t>0&1>t){if(0===s)for(n=a,i=this.density(n);t>i;)n+=e,i+=this.density(n);else for(o=a,h=u,n=(o+h)/2,i=this.CDF(n),c=Math.abs(i-t),r=1;c>1e-5&&100>r;)r++,t>i?o=n:h=n,n=(o+h)/2,i=this.CDF(n),error=Math.abs(i-t);return n}return 0/0},this.moment=function(t,n){for(var i=0,r=a;u>=r;r+=e)i+=Math.pow(r-n,t)*this.density(r)*M;return i},this.rawMoment=function(t){return this.moment(t,0)},this.mean=function(){return this.rawMoment(1)},this.centralMoment=function(t){return this.moment(t,this.mean())},this.variance=function(){return this.centralMoment(2)},this.stdDev=function(){return Math.sqrt(this.variance())},this.skew=function(){return this.centralMoment(3)/Math.pow(this.stdDev(),3)},this.kurt=function(){return this.centralMoment(4)/Math.pow(this.stdDev(),4)},this.MGF=function(t){for(var n=0,i=a;u>=i;i+=e)n+=Math.exp(t*i)*this.density(i)*M;return n},this.PGF=function(t){for(var n=0,i=a;u>=i;i+=e)n+=Math.pow(t,i)*this.density(i)*M;return n},this.median=function(){return this.quantile(.5)},this.quartile=function(t){return 1==t?this.quantile(.25):2==t?this.quantile(.5):3==t?this.quantile(.75):0/0},this.simulate=function(){var t=this.quantile(Math.random());return this.setValue(t),t},this.setValue=function(t){f.setValue(t)}}function PointMassDistribution(t){var n;n=t>-1/0&&1/0>t?t:0,Distribution.call(this,n,n,1,DISC),this.density=function(t){return t==n?1:0},this.mode=function(){return n},this.mean=function(){return n},this.variance=function(){return 0},this.CDF=function(t){return n>t?0:t>=n?1:0/0},this.quantile=function(t){return t>=0&&1>=t?n:0/0},this.simulate=function(){return n},this.PGF=function(t){return Math.pow(t,n)}}function BinomialDistribution(t,n){var i,r;i=t>=1&&1/0>t?Math.round(t):1,r=n>=0&&1>=n?n:.5,Distribution.call(this,0,i,1,DISC),this.density=function(t){if(t>=0&&i>=t){var n=Math.round(t);return binomial(i,n)*Math.pow(r,n)*Math.pow(1-r,i-n)}return 0},this.mode=function(){return 1==r?i:Math.floor((i+1)*r)},this.mean=function(){return i*r},this.variance=function(){return i*r*(1-r)},this.simulate=function(){for(var t=0,n=1;i>=n;n++)r>Math.random()&&t++;return this.setValue(t),t},this.PGF=function(t){return Math.pow(1-r+r*t,i)},this.MGF=function(t){return this.PGF(Math.exp(t))},this.skew=function(){return(1-2*r)/Math.sqrt(i*r*(1-r))},this.kurt=function(){return(1-6*r*(1-r))/(i*r*(1-r))},this.factorialMoment=function(t){return perm(i,t)*Math.pow(r,t)},this.trials=function(){return i},this.prob=function(){return r}}function BernoulliDistribution(t){BinomialDistribution.call(this,1,t)}function NegativeBinomialDistribution(t,n){var i,r;i=t>=1&&1/0>t?t:1,r=n>0&&1>=n?n:.5;var o=i/r,a=i*(1-r)/Math.pow(r,2);Distribution.call(this,i,Math.round(o+4*Math.sqrt(a)),1,DISC),this.mode=function(){return Math.floor((i-1)/r+1)},this.density=function(t){var n=Math.round(t);return i>n?0:binomial(n-1,i-1)*Math.pow(r,i)*Math.pow(1-r,n-i)},this.mean=function(){return o},this.variance=function(){return a},this.simulate=function(){for(var t=0,n=0;i>t;)r>Math.random()&&t++,n++;return this.setValue(n),n},this.PGF=function(t){return Math.abs(t)>=1/(1-r)?0/0:Math.pow(r*t/(1-(1-r)*t),i)},this.MGF=function(t){return this.PGF(Math.exp(t))},this.skew=function(){return(2-r)/Math.sqrt(i*(1-r))},this.kurt=function(){return 1/i*(6+r*r/(1-r))},this.stop=function(){return i},this.prob=function(){return r}}function GeometricDistribution(t){NegativeBinomialDistribution.call(this,1,t),this.CDF=function(t){return 1-Math.pow(1-this.prob(),t)},this.quantile=function(t){return Math.round(Math.log(1-t)/Math.log(1-p))}}function BetaBinomialDistribution(t,n,i){var r,o,a;r=t>0&&1/0>t?t:1,o=n>0&&1/0>n?n:1,a=i>=1&1/0>i?Math.round(i):1,Distribution.call(this,0,a,1,DISC),this.density=function(t){return binomial(a,t)*risePow(r,t)*risePow(o,a-t)/risePow(r+o,a)},this.mean=function(){return a*(r/(r+o))},this.variance=function(){return a*r*o/Math.pow(r+o,2)*(1+(a-1)/(r+o+1))},this.left=function(){return r},this.right=function(){return o},this.trials=function(){return a}}function BetaNegativeBinomialDistribution(t,n,i){var r,o,a,u,e;r=t>0&&1/0>t?t:1,o=n>0&&1/0>n?n:1,a=i>=1&&1/0>i?Math.round(i):1,u=a*(r+o-1)/(r-1),e=a*(r+o-1)*(o+a*(r+o-2))/((r-1)*(r-2))-Math.pow(u,2),Distribution.call(this,a,Math.round(u+4*Math.sqrt(e)),1,DISC),this.density=function(t){for(var n=1,i=1,u=0;a>u;u++)n=n*(r+u)/(r+o+u);for(var e=0;t-a>e;e++)i=i*(o+e)/(r+o+a+e);return binomial(t-1,a-1)*n*i},this.mean=function(){return u},this.variance=function(){return e},this.left=function(){return r},this.right=function(){return o},this.successes=function(){return a}}function BinomialNDistribution(t,n){var i,r;i=t instanceof Distribution?t:new PointMassDistribution(1),r=n>=0&&1>=n?n:.5,Distribution.call(this,0,i.maxValue(),1,DISC),this.density=function(t){for(var n=0,o=t;i.maxValue()>=o;o+=i.step())n+=i.density(o)*binomial(o,t)*Math.pow(r,t)*Math.pow(1-r,o-t);return n},this.mean=function(){return i.mean()*r},this.variance=function(){return i.mean()*r*(1-r)+Math.pow(r,2)*i.variance()},this.simulate=function(){for(var t=Math.round(i.simulate()),n=0,o=0;t>=o;o++)r>=Math.random()&&n++;return this.setValue(n),n},this.dist=function(){return i},this.prob=function(){return r}}function HypergeometricDistribution(t,n,i){var r,o,a;r=t>=1&&1/0>t?Math.round(t):10,o=n>=1&&r>=n?Math.round(n):5,a=i>=1&&r>=i?Math.round(i):5,Distribution.call(this,Math.max(0,a-(r-o)),Math.min(a,o),1,DISC),this.density=function(t){var n=Math.round(t);return binomial(o,n)*binomial(r-o,a-n)/binomial(r,a)},this.mode=function(){return Math.floor((o+1)*(a+1)/(r+2))},this.mean=function(){return a*(o/r)},this.variance=function(){return a*(o/r)*(1-o/r)*(r-a)/(r-1)},this.population=function(){return r},this.red=function(){return o},this.sample=function(){return a}}function PolyaDistribution(t,n,i,r){var o,a,u,e;o=t>=1&&1/0>t?Math.round(t):10,a=n>=1&&1/0>n?Math.round(n):10,u=i>=0&&1/0>i?Math.round(i):0,e=r>=1&&1/0>r?Math.round(r):5,Distribution.call(this,0,e,1,DISC),this.density=function(t){for(var n=o+a,i=1,r=1,s=0;t>s;s++)i=i*(e-s)*(o+s*u)/((n+s*u)*(t-s));for(var h=0;e-t>h;h++)r=r*(a+h*u)/(n+(t+h)*u);return i*r},this.mean=function(){return e*o/(o+a)},this.variance=function(){var t=o/(o+a),n=u/(o+a+u);return e*t*(1-t)*(1+(e-1)*n)},this.simulate=function(){for(var t,n=0,i=o,r=a,s=1;e>=s;s++)t=i/(i+r),t>Math.random()?(n++,i+=u):r+=u;return this.setValue(n),n},this.red=function(){return o},this.green=function(){return a},this.add=function(){return u},this.trials=function(){return e}}function BirthdayDistribution(t,n){var i,r;i=t>=1&&1/0>t?t:10,r=n>=1&&1/0>n?n:5,Distribution.call(this,1,Math.min(i,r),1,DISC);for(var o,a=Array(i),u=Array(r+1),e=0;r+1>e;e++){u[e]=Array(i+1);for(var s=0;i+1>s;s++)u[e][s]=0}u[0][0]=1,u[1][1]=1;for(var h=1;r>h;h++){o=i>h?h+1:i;for(var c=1;o>=c;c++)u[h+1][c]=u[h][c]*(c/i)+u[h][c-1]*((i-c+1)/i)}for(var f=1,M=1;Math.min(i,r)>=M;M++)u[r][M]>u[r][f]&&(f=M);this.density=function(t){return u[r][t]},this.mode=function(){return f},this.mean=function(){return i*(1-Math.pow(1-1/i,r))},this.variance=function(){return i*(i-1)*Math.pow(1-2/i,r)+i*Math.pow(1-1/i,r)-i*i*Math.pow(1-1/i,2*r)},this.simulate=function(){for(var t=0;i>t;t++)a[t]=0;for(var n=0,t=1;r>=t;t++){var o=Math.floor(i*Math.random());0===a[o]&&n++,a[o]++}return this.setValue(n),n},this.population=function(){return i},this.sample=function(){return r}}function CouponDistribution(t,n){var i,r;i=t>=1&&1/0>t?Math.round(t):10,r=n>=1&&i>=n?Math.round(n):5;for(var o=binomial(i-1,r-1),a=0,u=0,e=1;r>=e;e++)a+=i/(i-e+1);for(var e=1;r>=e;e++)u+=i*(e-1)/((i-e+1)*(i-e+1));Distribution.call(this,r,Math.round(a+4*Math.sqrt(u)),1,DISC),this.density=function(t){for(var n=0,a=0;r>a;a++)n+=Math.pow(-1,a)*binomial(r-1,a)*Math.pow((r-a-1)/i,t-1);return o*n},this.mean=function(){return a},this.variance=function(){return u},this.simulate=function(){for(var t=Array(i),n=0;i>n;n++)t[n]=0;for(var o=0,a=0;r>o;){a++;var u=Math.floor(i*Math.random());0===t[u]&&o++,t[u]++}return this.setValue(a),a},this.population=function(){return i},this.distinct=function(){return r}}function FiniteOrderStatistic(t,n,i){var r,o,a;r=t>=1&&1/0>t?Math.round(t):10,o=n>=1&&r>=n?Math.round(n):5,a=i>=1&&o>=i?Math.round(i):1,Distribution.call(this,a,r-o+a,1,DISC),this.density=function(t){return binomial(t-1,a-1)*binomial(r-t,o-a)/binomial(r,o)},this.mean=function(){return a*(r+1)/(o+1)},this.variance=function(){return(r+1)*(r-o)*a*(o+1-a)/((o+1)*(o+1)*(o+2))},this.population=function(){return r},this.sample=function(){return o},this.order=function(){return a}}function MatchDistribution(t){var n;n=t>=1&&1/0>t?Math.round(t):10,Distribution.call(this,0,n,1,DISC),this.density=function(t){for(var i=0,r=-1,o=0;n-t>=o;o++)r=-r,i+=r/factorial(o);return i/factorial(t)},this.mode=function(){return 2==n?0:1},this.mean=function(){return 1},this.variance=function(){return 1},this.simulate=function(){for(var t=Array(n),i=Array(n),r=0,o=0;n>o;o++)t[o]=o+1;i=sample(t,n);for(var a=0;n>a;a++)i[a]==a+1&&r++;return this.setValue(r),r},this.population=function(){return n}}function WalkMaxDistribution(t){var n;n=t>=1&&1/0>t?Math.round(t):10,Distribution.call(this,0,n,1,DISC),this.density=function(t){var i;return i=0===(t+n)%2?(t+n)/2:(t+n+1)/2,binomial(n,i)/Math.pow(2,n)},this.maxDensity=function(){return this.density(0)},this.simulate=function(){for(var t,i=0,r=0,o=1;n>=o;o++)t=.5>Math.random()?1:-1,r+=t,r>i&&(i=r);return this.setValue(i),i}}function WalkPositionDistribution(t,n){var i,r;i=t>=1&&1/0>t?Math.round(t):10,r=n>=0&&1>=n?n:.5,Distribution.call(this,-i,i,2,DISC),this.density=function(t){var n=Math.round((t+i)/2);return binomial(i,n)*Math.pow(r,n)*Math.pow(1-r,i-n)},this.mode=function(){return 1==r?i:2*Math.floor((i+1)*r)-i},this.mean=function(){return i*(2*r-1)},this.variance=function(){return 4*i*r*(1-r)},this.simulate=function(){for(var t,n=0,o=1;i>=o;o++)t=r>Math.random()?1:-1,n+=t;return this.setValue(n),n},this.steps=function(){return i},this.prob=function(){return r}}function DiscreteArcsineDistribution(t){var n;n=t>=2&&isEven(t)?t:2*Math.round(t/2),Distribution.call(this,0,n,2,DISC),this.density=function(t){return isEven(t)&&t>=0&&n>=t?binomial(t,t/2)*binomial(n-t,(n-t)/2)/Math.pow(2,n):0},this.mode=function(){return 0},this.mean=function(){return n/2},this.simulate=function(){for(var t,i=0,r=0,o=1;n>=o;o++)t=.5>Math.random()?1:-1,r+=t,0===r&&(i=o);return this.setValue(i),i},this.steps=function(){return n}}function NormalDistribution(t,n){var i,r,o;i=t>-1/0&&1/0>t?t:0,r=n>0&&1/0>n?n:1,Distribution.call(this,i-4*r,i+4*r,4*r/25,CONT),o=1/(r*Math.sqrt(2*Math.PI)),this.mode=function(){return i},this.maxDensity=function(){return o},this.density=function(t){var n=(t-i)/r;return o*Math.exp(-.5*Math.pow(n,2))},this.CDF=function(t){return stdNormalCDF((t-i)/r)},this.simulate=function(){var t=Math.sqrt(-2*Math.log(Math.random())),n=2*Math.PI*Math.random(),o=i+r*t*Math.cos(n);return this.setValue(o),o},this.mean=function(){return i},this.variance=function(){return Math.pow(r,2)},this.stdDev=function(){return r},this.MGF=function(t){return Math.exp(i+.5*Math.pow(r,2)*Math.pow(t,2))},this.PGF=function(t){return 0>=t?0/0:this.MGF(Math.log(t))},this.centralMoment=function(t){if(isOdd(t))return 0;if(isEven(t)){var n=t/2;return factorial(t)/(factorial(n)*Math.pow(2,n))*Math.pow(r,t)}}}function FoldedNormalDistribution(t,n){var i,r,o,a,u,e,s,h;i=t>-1/0&&1/0>t?t:0,r=n>0&&1/0>n?n:1,o=r*Math.sqrt(2/Math.PI)*Math.exp(-Math.pow(i,2)/(2*Math.pow(r,2)))+i*(1-2*stdNormalCDF(-i/r)),u=Math.pow(i,2)+Math.pow(r,2)-Math.pow(r*Math.sqrt(2/Math.PI)*Math.exp(-Math.pow(i,2)/(2*Math.pow(r,2)))+i*(1-2*stdNormalCDF(-i/r)),2),a=Math.sqrt(u),h=Math.max(0,o-3*a),s=o+3*a,Distribution.call(this,h,s,(s-h)/100,CONT);var e=1/(r*Math.sqrt(2*Math.PI));this.maxDensity=function(){return Math.max(this.density(Math.abs(i)),this.density(0))},this.density=function(t){var n=-1/(2*r*r);return t>=0?e*Math.exp(n*(-t-i)*(-t-i))+e*Math.exp(n*(t-i)*(t-i)):0},this.CDF=function(t){return.5*(erf((t+i)/(Math.sqrt(2)*r))+erf((t-i)/(Math.sqrt(2)*r)))},this.mean=function(){return o},this.variance=function(){return u},this.simulate=function(){var t=Math.sqrt(-2*Math.log(Math.random())),n=2*Math.PI*Math.random(),o=Math.abs(i+r*t*Math.cos(n));return this.setValue(o),o},this.normalMean=function(){return i},this.normalStdDev=function(){return r}}function HalfNormalDistribution(t){FoldedNormalDistribution.call(this,0,t),this.mode=function(){return 0},this.scale=function(){return this.normalStdDev()}}function MaxwellBoltzmannDistribution(t){var n,i,r,o;n=t>0&&1/0>t?t:1,i=2*n*Math.sqrt(2/Math.PI),r=n*Math.sqrt(3-8/Math.PI),o=i+4*r,Distribution.call(this,0,o,o/100,CONT),this.density=function(t){return t>=0?Math.sqrt(2/Math.PI)*Math.pow(t,2)*Math.exp(-Math.pow(t,2)/(2*Math.pow(n,2)))/Math.pow(n,3):0},this.mode=function(){return Math.sqrt(2)*n},this.mean=function(){return i},this.variance=function(){return r*r},this.simulate=function(){for(var t,i,r,o=0,a=0;3>a;a++)t=Math.sqrt(-2*Math.log(Math.random())),i=2*Math.PI*Math.random(),o+=Math.pow(n*t*Math.cos(i),2);return r=Math.sqrt(o),this.setValue(r),r},this.scale=function(){return n}}function StudentDistribution(t){var n,i,r;n=t>0&&1/0>t?Math.round(t):1,r=gamma((n+1)/2)/(Math.sqrt(n*Math.PI)*gamma(n/2)),i=1==n?8:2==n?7:4*Math.sqrt(n/(n-2)),Distribution.call(this,-i,i,i/50,CONT),this.mode=function(){return 0},this.density=function(t){return r*Math.pow(1+t*t/n,-(n+1)/2)},this.CDF=function(t){var i=n/(n+t*t);return t>0?1-.5*betaCDF(i,.5*n,.5):.5*betaCDF(i,.5*n,.5)},this.mean=function(){return 1==n?0/0:0},this.variance=function(){return 1==n?0/0:2==n?1/0:n/(n-2)},this.simulate=function(){var t,i,r,o,a;i=0;for(var u=1;n>=u;u++)o=Math.sqrt(-2*Math.log(Math.random())),a=2*Math.PI*Math.random(),r=o*Math.cos(a),i+=r*r;return o=Math.sqrt(-2*Math.log(Math.random())),a=2*Math.PI*Math.random(),r=o*Math.cos(a),t=r/Math.sqrt(i/n),this.setValue(t),t},this.degrees=function(){return n}}function FDistribution(t,n){var i,r,o,a;i=t>0&&1/0>t?Math.round(t):1,r=n>0&&1/0>n?Math.round(n):1;var u=gamma((i+r)/2)/(gamma(i/2)*gamma(r/2))*Math.pow(i/r,i/2);o=2>i?.01:0,a=4>=r?20:r/(r-2)+4*Math.sqrt(2*(r/(r-2))*(r/(r-2))*(r+i-2)/(i*(r-4))),Distribution.call(this,o,a,(a-o)/100,CONT),this.mode=function(){return 2>=i?o:(i-2)*r/(i*(r+2))},this.density=function(t){return u*Math.pow(t,(i-2)/2)/Math.pow(1+i/r*t,(i+r)/2)},this.CDF=function(t){var n=r/(r+i*t);return 0>=t?0:1-betaCDF(n,.5*r,.5*i)},this.mean=function(){return 2>=r?1/0:r/(r-2)},this.variance=function(){return 2>=r?0/0:4>=r?1/0:2*(r/(r-2))*(r/(r-2))*(r+i-2)/(i*(r-4))},this.simulate=function(){for(var t,n,o,a,u=0,e=0,s=1;i>=s;s++)o=Math.sqrt(-2*Math.log(Math.random())),a=2*Math.PI*Math.random(),n=o*Math.cos(a),u+=Math.pow(n,2);for(var h=1;r>=h;h++)o=Math.sqrt(-2*Math.log(Math.random())),a=2*Math.PI*Math.random(),n=o*Math.cos(a),e+=Math.pow(n,2);return t=u/i/(e/r),this.setValue(t),t},this.numerator=function(){return i},this.denominator=function(){return r}}function LogNormalDistribution(t,n){var i,r,o,a,u;i=t>-1/0&&1/0>t?t:0,r=n>0&&1/0>n?n:1;var o=Math.exp(i+r*r/2),a=Math.exp(2*(i+r*r))-Math.exp(2*i+r*r);u=o+3*Math.sqrt(a),Distribution.call(this,0,u,u/100,CONT),this.density=function(t){return 0===t?0:Math.exp(-(Math.log(t)-i)*(Math.log(t)-i)/(2*r*r))/(Math.sqrt(2*Math.PI)*r*t)},this.mode=function(){return Math.exp(i-r*r)},this.CDF=function(t){var n;return 0>=t?0:(n=(Math.log(t)-i)/r,n>=0?.5+.5*gammaCDF(.5*n*n,.5):.5-.5*gammaCDF(.5*n*n,.5))},this.mean=function(){return o},this.variance=function(){return a},this.simulate=function(){var t=Math.sqrt(-2*Math.log(Math.random())),n=2*Math.PI*Math.random(),o=Math.exp(i+r*t*Math.cos(n));return this.setValue(o),o},this.logScale=function(){return i},this.shape=function(){return r}}function PoissonDistribution(t){var n;n=t>=0&&1/0>t?t:1,Distribution.call(this,0,Math.ceil(n+4*Math.sqrt(n)),1,DISC),this.density=function(t){if(0>t)return 0;var i=Math.round(t);return Math.exp(-n)*Math.pow(n,i)/factorial(i)},this.mode=function(){return Math.floor(n)},this.CDF=function(t){return 1-gammaCDF(n,t+1)},this.mean=function(){return n},this.variance=function(){return n},this.simulate=function(){for(var t=0,i=-Math.log(1-Math.random());n>=i;)t++,i-=Math.log(1-Math.random());return this.setValue(t),t},this.rate=function(){return n}}function GammaDistribution(t,n){var i,r,o,a,u,e,s;i=t>0&&1/0>t?t:1,r=n>0&&1/0>n?n:1,e=i>=1?0:.01,o=i*r,a=i*Math.pow(r,2),u=1/(gamma(i)*Math.pow(r,i)),s=o+4*Math.sqrt(a),Distribution.call(this,e,s,(s-e)/100,CONT),this.mode=function(){return 1>i?e:r*(i-1)},this.density=function(t){return t>=0?u*Math.pow(t,i-1)*Math.exp(-t/r):0},this.CDF=function(t){return gammaCDF(t/r,i)},this.mean=function(){return o},this.variance=function(){return a},this.shape=function(){return i},this.scale=function(){return r},this.rate=function(){return 1/r}}function ChiSquareDistribution(t){var n;n=t>0&&1/0>t?Math.round(t):1,GammaDistribution.call(this,n/2,2),this.simulate=function(){for(var t,i,r,o=0,a=1;n>=a;a++)i=Math.sqrt(-2*Math.log(Math.random())),r=2*Math.PI*Math.random(),t=i*Math.cos(r),o+=Math.pow(t,2);return this.setValue(o),o},this.degrees=function(){return n}}function ExponentialDistribution(t){GammaDistribution.call(this,1,t);var n=this.scale();this.CDF=function(t){return 1-Math.exp(-t/n)},this.quantile=function(t){return-n*Math.log(1-t)}}function BetaDistribution(t,n){var i,r,o,a;i=t>0&&1/0>t?t:1,r=n>0&&1/0>n?n:1;var u=gamma(i+r)/(gamma(i)*gamma(r));o=1>i?.01:0,a=1>r?.99:1,Distribution.call(this,o,a,.01,CONT),this.mode=function(){var t;return t=1>i&&1>r?r>i?.01:.99:1>i&&r>=1?.01:i>=1&&1>r?.99:i>=1&&1==r?1:1==i&&r>=1?0:(i-1)/(i+r-2)},this.density=function(t){return t>=0&&1>=t?u*Math.pow(t,i-1)*Math.pow(1-t,r-1):0},this.CDF=function(t){return 0>=t?0:t>=1?1:betaCDF(t,i,r)},this.mean=function(){return i/(i+r)},this.variance=function(){return i*r/((i+r)*(i+r)*(i+r+1))},this.left=function(){return i},this.right=function(){return r}}function BetaPrimeDistribution(t,n){var i,r,o,a,u;i=t>0&&1/0>t?t:1,r=n>0&&1/0>n?n:1,o=gamma(i+r)/(gamma(i)*gamma(r)),a=i>=1?0:.01,u=4*i/r,Distribution.call(this,a,u,(u-a)/100,CONT),this.mode=function(){return i>=1?(i-1)/(r+1):this.minValue()},this.density=function(t){return t>0||0==t&&1==i?o*Math.pow(t,i-1)*Math.pow(1+t,-i-r):0},this.CDF=function(t){return 0>=t?0:betaCDF(t/(t+1),i,r)},this.mean=function(){return r>1?i/(r-1):1/0},this.variance=function(){return r>2?i*(i+r-1)/((r-2)*Math.pow(r-1,2)):r>1?1/0:0/0},this.left=function(){return i},this.right=function(){return r}}function UniformDistribution(t,n){var i,r;i=t>-1/0&&1/0>t?t:0,r=n>0&1/0>n?n:1,Distribution.call(this,i,i+r,r/100,CONT),this.density=function(t){return t>=i&&i+r>=t?1/r:0},this.mode=function(){return i},this.CDF=function(t){return i>t?0:t>i+r?1:(t-i)/r},this.quantile=function(t){return 0>t||t>1?0/0:i+t*r},this.mean=function(){return i+r/2},this.variance=function(){return Math.pow(r,2)/12},this.location=function(){return i},this.scale=function(){return r}}function DiscreteUniformDistribution(t,n,i){var r,o,a,u;r=t>-1/0&&1/0>t?t:0,o=n>=1&&1/0>n?Math.round(n):1,a=i>0&&1/0>i?i:1,u=r+(o-1)*a,Distribution.call(this,r,u,a,DISC),this.density=function(t){var n=Math.round((t-r)/a);return n>=0&&o>n?1/o:0},this.mode=function(){return r},this.CDF=function(t){var n=Math.round((t-r)/a);return 0>n?0:n>o-1?1:(n+1)/o},this.simulate=function(){var t=r+a*Math.floor(o*Math.random());return this.setValue(t),t},this.mean=function(){return(r+u)/2},this.variance=function(){return(o-1)*(o+1)*a*a/12},this.left=function(){return r},this.points=function(){return o}}function IrwinHallDistribution(t){var n;n=t>=1&&1/0>t?Math.round(t):1,Distribution.call(this,0,n,n/100,CONT),this.mode=function(){return n/2},this.density=function(t){var i=0;if(1==n)return 1;for(var r=0;n>=r;r++)i+=Math.pow(-1,r)*binomial(n,r)*Math.pow(t-r,n-1)*sgn(t-r);return i/(2*factorial(n-1))},this.CDF=function(t){var i=0;if(0>t)return 0;if(t>n)return 1;for(var r=0;n>=r;r++)i+=Math.pow(-1,r)*binomial(n,r)*sgn(t-r)*Math.pow(t-r,n);return.5+i/(2*factorial(n))},this.simulate=function(){for(var t=0,i=0;n>i;i++)t+=Math.random();return this.setValue(t),t},this.mean=function(){return n/2},this.variance=function(){return n/12},this.order=function(){return n}}function TriangleDistribution(t,n,i){var r,o,a;r=t>-1/0&&1/0>t?t:0,o=n>0&&1/0>n?n:1,a=i>=0&&1>=i?i:.5,Distribution.call(this,r,r+o,o/100,CONT),this.standardDensity=function(t){return 0==a&&t>=0&&1>=t?2*(1-t):1==a&&t>=0&&1>=t?2*t:t>=0&&a>=t?2*t/a:t>a&&1>=t?2*(1-t)/(1-a):0},this.standardCDF=function(t){return 0>t?0:0==a&&t>=0&&1>=t?1-Math.pow(1-t,2):1==a&&t>=0&&1>=t?Math.pow(t,2):t>=0&&a>=t?Math.pow(t,2)/a:t>a&&1>=t?1-Math.pow(1-t,2)/(1-a):1},this.standardQuantile=function(t){return t>=0&&a>=t?Math.sqrt(t*a):t>a&&1>=t?1-Math.sqrt((1-t)*(1-a)):0/0},this.density=function(t){return 1/o*this.standardDensity((t-r)/o)},this.CDF=function(t){return this.standardCDF((t-r)/o)},this.quantile=function(t){return r+o*this.standardQuantile(t)},this.mode=function(){var t=r+a*o;return 1==a&&(t=r+o),t},this.mean=function(){return r+o*(1+a)/3},this.variance=function(){return Math.pow(o,2)*(1-a+Math.pow(a,2))/18},this.location=function(){return r},this.scale=function(){return o},this.shape=function(){return a}}function SemiCircleDistribution(t,n){var i,r;i=t>-1/0&&1/0>t?t:0,r=n>0&&1/0>n?n:1,Distribution.call(this,i-r,i+r,r/50,CONT),this.standardDensity=function(t){return-1>t||t>1?0:2*Math.sqrt(1-t*t)/Math.PI},this.standardCDF=function(t){return-1>t?0:t>1?1:.5+t*Math.sqrt(1-t*t)/Math.PI+Math.asin(t)/Math.PI},this.density=function(t){return 1/r*this.standardDensity((t-i)/r)},this.CDF=function(t){return this.standardCDF((t-i)/r)},this.mode=function(){return i},this.mean=function(){return i},this.variance=function(){return r*r/4},this.simulate=function(){var t,n,o,a;return t=Math.random(),n=Math.random(),o=Math.max(t,n),theta=2*Math.PI*Math.random(),a=i+r*o*Math.cos(theta),this.setValue(a),a},this.center=function(){return i},this.radius=function(){return r}}function UPowerDistribution(t,n,i){var r,o;r=t>0&&1/0>t?Math.round(t):1,o=n>-1/0&&1/0>n?n:0,c=i>0&&1/0>i?i:1,Distribution.call(this,o-c,o+c,c/50,CONT),this.density=function(t){return t>=o-c&&o+c>=t?(2*r+1)/(2*c)*Math.pow((t-o)/c,2*r):0},this.CDF=function(t){return o-c>t?0:t>o+c?1:.5*(1+Math.pow((t-o)/c,2*r+1))},this.quantile=function(t){return t>=0&&.5>=t?o-c*Math.pow(1-2*t,1/(2*r+1)):t>.5&&1>=t?o+c*Math.pow(2*t-1,1/(2*r+1)):0/0},this.mode=function(){return o-c},this.mean=function(){return o},this.variance=function(){return Math.pow(c,2)*(2*r+1)/(2*r+3)},this.shape=function(){return r},this.location=function(){return o},this.scale=function(){return c}}function WeibullDistribution(t,n){var i,r,o,a,u,e;i=t>0&&1/0>t?t:1,r=n>0&&1/0>n?n:1,o=i/Math.pow(r,i),a=r*gamma(1+1/i),u=r*r*gamma(1+2/i)-Math.pow(a,2),e=a+4*Math.sqrt(u),Distribution.call(this,0,e,e/100,CONT),this.density=function(t){return t>=0?o*Math.pow(t,i-1)*Math.exp(-Math.pow(t/r,i)):0},this.mode=function(){return 1>i?this.minValue:r*Math.pow((i-1)/i,1/i)},this.CDF=function(t){return 1-Math.exp(-Math.pow(t/r,i))},this.quantile=function(t){return r*Math.pow(-Math.log(1-t),1/i)},this.mean=function(){return a},this.variance=function(){return u},this.shape=function(){return i},this.scale=function(){return r}}function ParetoDistribution(t,n){var i,r,o;i=t>0&&1/0>t?t:1,r=n>0&&1/0>n?n:1,c=i*Math.pow(r,i),o=r*(1+6/i),Distribution.call(this,r,o,(o-r)/100,CONT),this.density=function(t){return r>t?0:c/Math.pow(t,i+1)},this.mode=function(){return r},this.CDF=function(t){return 1-Math.pow(r/t,i)},this.quantile=function(t){return r/Math.pow(1-t,1/i)},this.mean=function(){return 1>=i?1/0:i*r/(i-1)},this.variance=function(){return 1>=i?0/0:i>1&&2>=i?1/0:i*r*r/((i-1)*(i-2)*(i-2))},this.shape=function(){return i},this.scale=function(){return r}}function LogisticDistribution(t,n){var i,r,o,a,u,e;i=t>-1/0&&1/0>t?t:0,r=n>0&&1/0>n?n:1,o=i,a=r*r*Math.PI*Math.PI/3,u=o-4*Math.sqrt(a),e=o+4*Math.sqrt(a),Distribution.call(this,u,e,(e-u)/100,CONT),this.density=function(t){var n=Math.exp((t-i)/r);return n/(r*(1+n)*(1+n))},this.mode=function(){return i},this.CDF=function(t){var n=Math.exp((t-i)/r);return n/(1+n)},this.quantile=function(t){return i+r*Math.log(t/(1-t))},this.mean=function(){return o},this.variance=function(){return a},this.location=function(){return i},this.scale=function(){return r}}function LogLogisticDistribution(t,n){var i,r,o,a;i=t>0&&1/0>t?t:1,r=n>0&&1/0>n?n:1,o=r>=1?0:.001,a=r>=2?i*Math.pow(100,1/r):10*i,Distribution.call(this,o,a,(a-o)/100,CONT),this.density=function(t){return t>=0?r/i*Math.pow(t/i,r-1)/Math.pow(1+Math.pow(t/i,r),2):0},this.mode=function(){return r>=1?i*Math.pow((r-1)/(r+1),1/r):this.minValue()},this.mean=function(){return r>1?i*Math.PI/r/Math.sin(Math.PI/r):1/0},this.variance=function(){var t=Math.PI/r;return r>2?Math.pow(i,2)*(2*t/Math.sin(2*t)-Math.pow(t,2)/Math.pow(Math.sin(t),2)):r>1?1/0:0/0},this.CDF=function(t){return 0>t?0:Math.pow(t,r)/(Math.pow(i,r)+Math.pow(t,r))},this.quantile=function(t){return t>=0&&1>=t?i*Math.pow(t/(1-t),1/r):0/0},this.scale=function(){return i},this.shape=function(){return r}}function ExtremeValueDistribution(t,n){var i,r,o,a,u,e;i=t>-1/0&&1/0>t?t:0,r=n>0&&1/0>n?n:1,o=i+r*EULER,a=Math.pow(r*Math.PI,2)/6,e=o+4*Math.sqrt(a),u=o-4*Math.sqrt(a),Distribution.call(this,u,e,(e-u)/100,CONT),this.density=function(t){var n=Math.exp(-(t-i)/r);return n*Math.exp(-n)/r},this.mode=function(){return i},this.CDF=function(t){return Math.exp(-Math.exp(-(t-i)/r))},this.quantile=function(t){return i-r*Math.log(-Math.log(t))},this.mean=function(){return o},this.variance=function(){return a},this.location=function(){return i},this.scale=function(){return r}}function ExponentialLogarithmicDistribution(t,n){var i,r;i=t>0&&1>t?t:.5,r=n>0&&1/0>n?n:1,Distribution.call(this,0,4/r,1/(25*r),CONT),this.mode=function(){return 0},this.density=function(t){return t>=0?-r*(1-i)*Math.exp(-r*t)/(Math.log(i)*(1-(1-i)*Math.exp(-r*t))):0},this.CDF=function(t){return 0>t?0:1-Math.log(1-(1-i)*Math.exp(-r*t))/Math.log(i)},this.quantile=function(t){return t>=0&&1>=t?Math.log((1-i)/(1-Math.pow(i,1-t)))/r:0/0},this.mean=function(){return-polyLog(2,1-i)/(r*Math.log(i))},this.variance=function(){return-2*polyLog(3,1-i)/(Math.pow(r,2)*Math.log(i))-Math.pow(this.mean(),2)}}function CauchyDistribution(t,n){var i,r;i=t>-1/0&&1/0>t?t:0,r=n>0&&1/0>n?n:1,Distribution.call(this,i-5*r,i+5*r,r/10,CONT),this.mode=function(){return i},this.density=function(t){var n=t-i;return r/(Math.PI*(r*r+n*n))},this.CDF=function(t){return.5+1/Math.PI*Math.atan((t-i)/r)},this.quantile=function(t){return i+r*Math.tan(Math.PI*(t-.5))},this.mean=function(){return 0/0},this.variance=function(){return 0/0},this.location=function(){return i},this.scale=function(){return r}}function ArcsineDistribution(t,n){var i,r,o;i=t>-1/0&&1/0>t?t:0,r=n>0&&1/0>n?n:1,o=r/100,Distribution.call(this,i+o,i+r-o,o,CONT),this.mode=function(){return 0/0
},this.maxDensity=function(){return this.density(this.minValue())},this.density=function(t){return 1/(Math.PI*Math.sqrt((t-i)*(i+r-t)))},this.CDF=function(t){return 2/Math.PI*Math.asin(Math.sqrt((t-i)/r))},this.quantile=function(t){return i+r*Math.pow(Math.sin(t*Math.PI/2),2)},this.mean=function(){return i+r/2},this.variance=function(){return Math.pow(r,2)/8},this.location=function(){return i},this.scale=function(){return r}}function HyperbolicSecantDistribution(t,n){var i,r;i=t>-1/0&&1/0>t?t:0,r=n>0&&1/0>n?n:1,Distribution.call(this,i-4*r,i+4*r,4*r/25,CONT),this.mode=function(){return i},this.density=function(t){var n=Math.PI/2*((t-i)/r);return 1/(r*(Math.exp(n)+Math.exp(-n)))},this.CDF=function(t){return 2/Math.PI*Math.atan(Math.exp(Math.PI/2*(t-i)/r))},this.quantile=function(t){return i+r*(2/Math.PI)*Math.log(Math.tan(Math.PI/2*t))},this.mean=function(){return i},this.stdDev=function(){return r},this.variance=function(){return Math.pow(r,2)},this.location=function(){return i},this.scale=function(){return r}}function LaplaceDistribution(t,n){var i,r;i=t>-1/0&&1/0>t?t:0,r=n>0&&1/0>n?n:1,Distribution.call(this,i-5*r,i+5*r,r/10,CONT),this.mode=function(){return i},this.density=function(t){return Math.exp(-Math.abs(t-i)/r)/(2*r)},this.mean=function(){return i},this.variance=function(){return 2*Math.pow(r,2)},this.quantile=function(t){return.5>=t?i+r*Math.log(2*t):i-r*Math.log(2*(1-t))},this.CDF=function(t){return i>=t?.5*Math.exp((t-i)/r):1-.5*Math.exp(-(t-i)/r)},this.location=function(){return i},this.scale=function(){return r}}function RayleighDistribution(t){var n,i,r,o;n=t>0&&1/0>t?t:1,i=n*Math.sqrt(Math.PI/2),r=n*Math.sqrt(2-Math.PI/2),o=i+4*r,Distribution.call(this,0,o,o/100,CONT),this.density=function(t){return t>=0?t/Math.pow(n,2)*Math.exp(-.5*Math.pow(t/n,2)):0},this.CDF=function(t){return t>=0?1-Math.exp(-.5*Math.pow(t/n,2)):0},this.quantile=function(t){return t>=0&&1>t?n*Math.sqrt(-2*Math.log(1-t)):1==t?1/0:0/0},this.mode=function(){return n},this.mean=function(){return i},this.variance=function(){return Math.pow(r,2)},this.scale=function(){return n}}function LevyDistribution(t,n){var i,r,o;i=t>-1/0&&1/0>t?t:0,r=n>0&&1/0>n?n:1,o=i+6*r,Distribution.call(this,i,o,(o-i)/100,CONT),this.density=function(t){return t>i?Math.sqrt(r/(2*Math.PI))*(1/Math.pow(t-i,1.5))*Math.exp(-r/(2*(t-i))):0},this.CDF=function(t){return t>=i?1-erf(Math.sqrt(r/(2*(t-i)))):0},this.mode=function(){return i+r/3},this.simulate=function(){var t=Math.sqrt(-2*Math.log(Math.random())),n=2*Math.PI*Math.random(),o=t*Math.cos(n),a=i+r/Math.pow(o,2);return this.setValue(a),a},this.mean=function(){return 1/0},this.variance=function(){return 0/0},this.location=function(){return i},this.scale=function(){return r}}function GompertzDistribution(t,n){var i,r,o,a;i=t>0&&1/0>t?t:1,r=n>0&&1/0>n?n:1,o=i/r*Math.exp(i),a=r*Math.log(1-1/i*Math.log(5e-4)),Distribution.call(this,0,a,a/100,CONT),this.density=function(t){var n;return 0>t?0:(n=Math.exp(t/r),o*n*Math.exp(-i*n))},this.mode=function(){return 1>i?-r*Math.log(i):0},this.CDF=function(t){return 0>t?0:1-Math.exp(-i*(Math.exp(t/r)-1))},this.quantile=function(t){return r*Math.log(1-1/i*Math.log(1-t))},this.shape=function(){return i},this.scale=function(){return r}}function BenfordMantissaDistribution(t){var n;n=t>1&&1/0>t?t:10,Distribution.call(this,1/n,1,(1-1/n)/100,CONT),this.mode=function(){return this.minValue()},this.density=function(t){return 1/(t*Math.log(n))},this.CDF=function(t){return 1+Math.log(t)/Math.log(n)},this.quantile=function(t){return 1/Math.pow(n,1-t)},this.mean=function(){return(n-1)/(n*Math.log(n))},this.variance=function(){return(n-1)/(Math.pow(n,2)*Math.log(n))*((n+1)/2-(n-1)/Math.log(n))},this.base=function(){return n}}function BenfordDigitDistribution(t){var n;n=t>1&&1/0>t?t:10,Distribution.call(this,1,n-1,1,DISC),this.mode=function(){return 1},this.density=function(t){return(Math.log(t+1)-Math.log(t))/Math.log(n)},this.CDF=function(t){return Math.log(t+1)/Math.log(n)},this.quantile=function(t){return Math.ceil(Math.pow(n,t)-1)},this.base=function(){return n}}function ZetaDistribution(t){var n,i;n=t>1&&1/0>t?t:2,Distribution.call(this,1,Math.ceil(Math.pow(10,3.5/n)),1,DISC),i=zeta(n),this.density=function(t){return 1/(i*Math.pow(t,n))},this.mean=function(){return n>2?zeta(n-1)/zeta(n):1/0},this.variance=function(){return n>3?zeta(n-2)/zeta(n)-this.mean()*this.mean():n>2?1/0:0/0},this.shape=function(){return n}}function LogarithmicDistribution(t){var n,i,r;n=t>0&&1>t?t:.5,i=-n/(Math.log(1-n)*(1-n)),r=-n*(n+Math.log(1-n))/(Math.pow(1-n,2)*Math.pow(Math.log(1-n),2)),Distribution.call(this,1,i+4*Math.sqrt(r),1,DISC),this.density=function(t){return-Math.pow(n,t)/(t*Math.log(1-n))},this.mode=function(){return 1},this.mean=function(){return i},this.variance=function(){return r},this.shape=function(){return n}}function LocationScaleDistribution(t,n,i){var r,o,a;r=t instanceof Distribution?t:new NormalDistribution(0,1),o=n>-1/0&&1/0>n?n:0,a=i>0&&1/0>i?i:1,Distribution.call(this,o+a*r.minValue(),o+a*r.maxValue(),a*r.step(),r.type()),this.density=function(t){var n=(t-o)/a;return this.type()===DISC?r.density(n):r.density(n)/a},this.mode=function(){return o+a*r.mode},this.maxDensity=function(){return this.type()===DISC?r.maxDensity():r.maxDensity()/a},this.CDF=function(t){return r.CDF((t-o)/a)},this.quantile=function(t){return o+a*r.quantile(t)},this.mean=function(){return o+a*r.mean()},this.variance=function(){return a*a*r.variance()},this.simulate=function(){var t=o+a*r.simulate();return this.setValue(t),t},this.dist=function(){return r},this.location=function(){return o},this.scale=function(){return a}}function Convolution(t,n){var i,r;i=t instanceof Distribution?t:new UniformDistribution(0,1),r=n>=1&&1/0>n?Math.round(n):1,Distribution.call(this,r*i.minValue(),r*i.maxValue(),i.step(),i.type());var o=i.minValue(),a=i.maxValue(),u=i.step(),e=Math.round((a-o)/u)+1,s=1;this.type()==CONT&&(s=this.step());for(var h=Array(r),c=0;r>c;c++)h[c]=Array((c+1)*e-c);for(var f=0;e>f;f++)h[0][f]=i.density(o+f*u);for(var M=1;r>M;M++)for(var l=0;(M+1)*e-M>l;l++){for(var m=0,p=Math.max(0,l-e+1);Math.min(l+1,M*e-M+1)>p;p++)m+=h[M-1][p]*h[0][l-p]*s;h[M][l]=m}this.density=function(t){var n=Math.round((t-this.minValue())/this.step());return h[r-1][n]},this.mean=function(){return r*i.mean()},this.variance=function(){return r*i.variance()},this.simulate=function(){var t=0;for(p=1;r>=p;p++)t+=i.simulate();return this.setValue(t),t},this.dist=function(){return i},this.power=function(){return r}}function OrderStatistic(t,n,i){var r,o,a;r=t instanceof Distribution?t:new UniformDistribution(0,1),o=n>=1&&1/0>n?Math.round(n):1,a=i>=1&&o>=i?Math.round(i):1,Distribution.call(this,r.minValue(),r.maxValue(),r.step(),r.type()),this.density=function(t){if(this.type()===DISC)return this.CDF(t)-this.CDF(t-this.step());var n=r.CDF(t);return a*binomial(o,a)*Math.pow(n,a-1)*Math.pow(1-n,o-a)*r.density(t)},this.CDF=function(t){for(var n=0,i=r.CDF(t),u=a;o>=u;u++)n+=binomial(o,u)*Math.pow(i,u)*Math.pow(1-i,o-u);return n},this.simulate=function(){for(var t=Array(o),n=Array(o),i=0;o>i;i++)t[i]=r.simulate();n=t.sort(ascend);var a=n[order-1];return this.setValue(a),a},this.dist=function(){return r},this.sample=function(){return o},this.order=function(){return a}}const DISC=0,CONT=1,EULER=.5772156649;erf=function(t){var n=.3275911,i=.254829592,r=-.284496736,o=1.421413741,a=-1.453152027,u=1.061405429,e=Math.abs(t),s=1/(1+n*e),h=1-(i*s+r*Math.pow(s,2)+o*Math.pow(s,3)+a*Math.pow(s,4)+u*Math.pow(s,5))*Math.exp(-Math.pow(t,2));return t>=0?h:-h},stdNormalCDF=function(t){return.5+.5*erf(t/Math.sqrt(2))},PointMassDistribution.prototype=new Distribution,BinomialDistribution.prototype=new Distribution,BernoulliDistribution.prototype=new BinomialDistribution,NegativeBinomialDistribution.prototype=new Distribution,GeometricDistribution.prototype=new NegativeBinomialDistribution,BetaBinomialDistribution.prototype=new Distribution,BetaNegativeBinomialDistribution.prototype=new Distribution,BinomialNDistribution.prototype=new Distribution,HypergeometricDistribution.prototype=new Distribution,PolyaDistribution.prototype=new Distribution,BirthdayDistribution.prototype=new Distribution,CouponDistribution.prototype=new Distribution,FiniteOrderStatistic.prototype=new Distribution,MatchDistribution.prototype=new Distribution,WalkMaxDistribution.prototype=new Distribution,WalkPositionDistribution.prototype=new Distribution,DiscreteArcsineDistribution.prototype=new Distribution,NormalDistribution.prototype=new Distribution,FoldedNormalDistribution.prototype=new Distribution,HalfNormalDistribution.prototype=new FoldedNormalDistribution,MaxwellBoltzmannDistribution.prototype=new Distribution,StudentDistribution.prototype=new Distribution,FDistribution.prototype=new Distribution,LogNormalDistribution.prototype=new Distribution,PoissonDistribution.prototype=new Distribution,GammaDistribution.prototype=new Distribution,ChiSquareDistribution.prototype=new GammaDistribution,ExponentialDistribution.prototype=new GammaDistribution,BetaDistribution.prototype=new Distribution,BetaPrimeDistribution.prototype=new Distribution,UniformDistribution.prototype=new Distribution,DiscreteUniformDistribution.prototype=new Distribution,IrwinHallDistribution.prototype=new Distribution,TriangleDistribution.prototype=new Distribution,SemiCircleDistribution.prototype=new Distribution,UPowerDistribution.prototype=new Distribution,WeibullDistribution.prototype=new Distribution,ParetoDistribution.prototype=new Distribution,LogisticDistribution.prototype=new Distribution,LogLogisticDistribution.prototype=new Distribution,ExtremeValueDistribution.prototype=new Distribution,ExponentialLogarithmicDistribution.prototype=new Distribution,CauchyDistribution.prototype=new Distribution,ArcsineDistribution.prototype=new Distribution,HyperbolicSecantDistribution.prototype=new Distribution,LaplaceDistribution.prototype=new Distribution,RayleighDistribution.prototype=new Distribution,LevyDistribution.prototype=new Distribution,GompertzDistribution.prototype=new Distribution,BenfordMantissaDistribution.prototype=new Distribution,BenfordDigitDistribution.prototype=new Distribution,ZetaDistribution.prototype=new Distribution,LogarithmicDistribution.prototype=new Distribution,LocationScaleDistribution.prototype=new Distribution,Convolution.prototype=new Distribution,OrderStatistic.prototype=new Distribution;

// lib/cqls/opal.js
(function(){function t(){}function n(){}function r(){}function e(){}function i(){}function a(t,n,r){var e=function(){},i=e.prototype=new t.constructor;n._scope=i,i.base=n,n._base_module=t.base,i.constructor=e,i.constants=[],r&&(n._orig_scope=t,t[r]=t.constructor[r]=n,t.constants.push(r))}function o(t,n){function r(){}var e=function(){};e.prototype=t.constructor.prototype,r.prototype=new e;var i=new r;return i._id=y++,i._alloc=n,i._isClass=!0,i.constructor=r,i._super=t,i._methods=[],i.__inc__=[],i.__parent=t,i._proto=n.prototype,n.prototype._klass=i,i}function u(){function t(){}var n=function(){};n.prototype=f.constructor.prototype,t.prototype=new n;var r=new t;return r._id=y++,r._isClass=!0,r.constructor=t,r._super=f,r._methods=[],r.__inc__=[],r.__parent=f,r._proto={},r.__mod__=!0,r.__dep__=[],r}function s(t,n){var r=o(h,n);r._name=t,a(_,r,t),v.push(r);for(var e=$._methods.concat(h._methods),i=0,u=e.length;u>i;i++){var s=e[i];n.prototype[s]=h._proto[s]}return r}function c(t,n){function r(){return this.$method_missing._p=r._p,r._p=null,this.$method_missing.apply(this,[n.slice(1)].concat(g.call(arguments)))}r.rb_stub=!0,t[n]=r}function l(t,n){$._methods.push(t);for(var r=0,e=v.length;e>r;r++)v[r]._proto[t]=n}var $,h,f,p,_=this.Opal={},v=[],d=function(){};d.prototype=_,_.constructor=d,_.constants=[],_.global=this;var m=_.hasOwnProperty,g=_.slice=Array.prototype.slice,y=0;_.uid=function(){return y++},_.cvars={},_.gvars={},_.create_scope=a,_.klass=function(t,n,r,e){t._isClass||(t=t._klass),null===n&&(n=h);var i=t._scope[r];if(m.call(t._scope,r)&&i._orig_scope===t._scope){if(!i._isClass)throw _.TypeError.$new(r+" is not a class");if(n!==i._super&&n!==h)throw _.TypeError.$new("superclass mismatch for class "+r)}else{if("function"==typeof n)return s(r,n);i=b(n,e),i._name=r,a(t._scope,i,r),t[r]=t._scope[r]=i,n!==h&&n!==$&&_.donate_constants(n,i),n.$inherited&&n.$inherited(i)}return i};var b=_.boot=function(t,n){var r=function(){};return r.prototype=t._proto,n.prototype=new r,n.prototype.constructor=n,o(t,n)};_.module=function(t,n){var r;if(t._isClass||(t=t._klass),m.call(t._scope,n)){if(r=t._scope[n],!r.__mod__&&r!==h)throw _.TypeError.$new(n+" is not a module")}else r=u(),r._name=n,a(t._scope,r,n),t[n]=t._scope[n]=r;return r};var M=function(t,n,r){if(r){var e=function(){};e.prototype=r.prototype,n.prototype=new e}return n.prototype.constructor=n,n},w=function(t,n,r){function e(){}var i=function(){};i.prototype=r.prototype,e.prototype=new i;var a=new e;return a._id=y++,a._alloc=n,a._isClass=!0,a._name=t,a._super=r,a.constructor=e,a._methods=[],a.__inc__=[],a.__parent=r,a._proto=n.prototype,n.prototype._klass=a,_[t]=a,_.constants.push(t),a};_.casgn=function(t,n,r){var e=t._scope;return r._isClass&&r._name===E&&(r._name=n),r._isClass&&(r._base_module=t),e.constants.push(n),e[n]=r},_.cdecl=function(t,n,r){return t.constants.push(n),t[n]=r},_.cget=function(t,n){null==n&&(n=t,t=_.Object);var r=t;for(n=n.split("::");0!=n.length;)r=r.$const_get(n.shift());return r},_.donate_constants=function(t,n){for(var r=t._scope.constants,e=n._scope,i=e.constants,a=0,o=r.length;o>a;a++)i.push(r[a]),e[r[a]]=t._scope[r[a]]},_.add_stubs=function(n){for(var r=0,e=n.length;e>r;r++){var i=n[r];t.prototype[i]||(t.prototype[i]=!0,c(t.prototype,i))}},_.add_stub_for=c,_.cm=function(t){return this.base.$const_missing(t)},_.ac=function(t,n,r,e){var i=(r._isClass?r._name+".":r._klass._name+"#")+e,a="["+i+"] wrong number of arguments("+t+" for "+n+")";throw _.ArgumentError.$new(a)},_.find_super_dispatcher=function(t,n,r,e,i){var a;return a=i?t._isClass?i._super:t._klass._proto:t._isClass?t._super:D(t,n,r),a=a["$"+n],a._p=e,a},_.find_iter_super_dispatcher=function(t,n,r,e,i){return r._def?_.find_super_dispatcher(t,r._jsid,r,e,i):_.find_super_dispatcher(t,n,r,e,i)};var D=function(t,n,r){for(var e=t.__meta__||t._klass;e&&e._proto["$"+n]!==r;)e=e.__parent;if(!e)throw Error("could not find current class for super()");for(e=e.__parent;e;){var i=e._proto["$"+n];if(i&&i!==r)break;e=e.__parent}return e._proto};_.$return=function(t){throw _.returner.$v=t,_.returner},_.$yield1=function(t,n){if("function"!=typeof t)throw _.LocalJumpError.$new("no block given");return t.length>1?n._isArray?t.apply(null,n):t(n):t(n)},_.$yieldX=function(t,n){if("function"!=typeof t)throw _.LocalJumpError.$new("no block given");return t.length>1&&1==n.length&&n[0]._isArray?t.apply(null,n[0]):(n._isArray||(n=g.call(n)),t.apply(null,n))},_.is_a=function(t,n){if(t.__meta__===n)return!0;for(var r=t._klass;r;){if(r===n)return!0;r=r._super}return!1},_.to_ary=function(t){return t._isArray?t:t.$to_ary&&!t.$to_ary.rb_stub?t.$to_ary():[t]},_.send=function(t,n){var r=g.call(arguments,2),e=t["$"+n];return e?e.apply(t,r):t.$method_missing.apply(t,[n].concat(r))},_.block_send=function(t,n,r){var e=g.call(arguments,3),i=t["$"+n];return i?(i._p=r,i.apply(t,e)):t.$method_missing.apply(t,[n].concat(e))},_.donate=function(t,n){var r=t._methods,e=t.__dep__;if(t._methods=r.concat(n),e)for(var i=0,a=e.length;a>i;i++){for(var o=e[i],u=o._proto,s=0,c=n.length;c>s;s++){var l=n[s];u[l]=t._proto[l],u[l]._donated=!0}o.__dep__&&_.donate(o,n,!0)}},_.defn=function(t,n,r){return t.__mod__?(t._proto[n]=r,_.donate(t,[n])):t._isClass?(t._proto[n]=r,t===$?l(n,r):t===h&&_.donate(t,[n])):t[n]=r,E},_.defs=function(t,n,r){t._isClass||t.__mod__?t.constructor.prototype[n]=r:t[n]=r},_.hash=function(){if(1==arguments.length&&arguments[0]._klass==_.Hash)return arguments[0];var t=new _.Hash._alloc,n=[],r={};if(t.map=r,t.keys=n,1==arguments.length&&arguments[0]._isArray)for(var e=arguments[0],i=0,a=e.length;a>i;i++){var o=e[i][0],u=e[i][1];null==r[o]&&n.push(o),r[o]=u}else for(var i=0,a=arguments.length;a>i;i++){var o=arguments[i],u=arguments[++i];null==r[o]&&n.push(o),r[o]=u}return t},_.hash2=function(t,n){var r=new _.Hash._alloc;return r.keys=t,r.map=n,r},_.range=function(t,n,r){var e=new _.Range._alloc;return e.begin=t,e.end=n,e.exclude=r,e},M("BasicObject",t),M("Object",n,t),M("Module",e,n),M("Class",r,e),$=w("BasicObject",t,r),h=w("Object",n,$.constructor),f=w("Module",e,h.constructor),p=w("Class",r,f.constructor),$._klass=p,h._klass=p,f._klass=p,p._klass=p,$._super=null,h._super=$,f._super=h,p._super=f,h.__dep__=v,_.base=h,$._scope=h._scope=_,$._orig_scope=h._orig_scope=_,_.Kernel=h,f._scope=h._scope,p._scope=h._scope,f._orig_scope=h._orig_scope,p._orig_scope=h._orig_scope,h._proto.toString=function(){return this.$to_s()},_.top=new h._alloc,_.klass(h,h,"NilClass",i);var E=_.nil=new i;E.call=E.apply=function(){throw _.LocalJumpError.$new("no block given")},_.breaker=Error("unexpected break"),_.returner=Error("unexpected return"),s("Array",Array),s("Boolean",Boolean),s("Numeric",Number),s("String",String),s("Proc",Function),s("Exception",Error),s("Regexp",RegExp),s("Time",Date),TypeError._super=Error}).call(this),function(t){var n=t.top,r=t.nil,e=(t.breaker,t.slice),i=t.module;return t.add_stubs(["$===","$respond_to?","$raise","$class","$__send__","$coerce_to","$<=>","$name"]),function(n){var a=i(n,"Opal"),o=(a._proto,a._scope);t.defs(a,"$coerce_to",function(t,n,e){var i,a=this;return(i=n["$==="](t))!==!1&&i!==r?t:(((i=t["$respond_to?"](e))===!1||i===r)&&a.$raise(o.TypeError,"no implicit conversion of "+t.$class()+" into "+n),t.$__send__(e))}),t.defs(a,"$coerce_to!",function(t,n,e){var i,a=this,u=r;return u=a.$coerce_to(t,n,e),((i=n["$==="](u))===!1||i===r)&&a.$raise(o.TypeError,"can't convert "+t.$class()+" into "+n+" ("+t.$class()+"#"+e+" gives "+u.$class()),u}),t.defs(a,"$try_convert",function(t,n,e){var i;return(i=n["$==="](t))!==!1&&i!==r?t:(i=t["$respond_to?"](e))!==!1&&i!==r?t.$__send__(e):r}),t.defs(a,"$compare",function(t,n){var e,i=this,a=r;return a=t["$<=>"](n),(e=a===r)!=!1&&e!==r&&i.$raise(o.ArgumentError,"comparison of "+t.$class().$name()+" with "+n.$class().$name()+" failed"),a}),t.defs(a,"$fits_fixnum!",function(t){var n,e=this;return(n=t>2147483648)!=!1&&n!==r?e.$raise(o.RangeError,"bignum too big to convert into `long'"):r}),t.defs(a,"$fits_array!",function(t){var n,e=this;return(n=t>=536870910)!=!1&&n!==r?e.$raise(o.ArgumentError,"argument too big"):r}),t.defs(a,"$destructure",function(t){return 1==t.length?t[0]:t._isArray?t:e.call(t)})}(n)}(Opal),function(t){var n=t.top,r=t.nil,e=(t.breaker,t.slice),i=t.klass;return t.add_stubs(["$attr_reader","$attr_writer","$=~","$raise","$const_missing","$to_str","$to_proc","$append_features","$included","$name","$new","$to_s"]),function(n,a){function o(){}var u,s,c,l,$=o=i(n,a,"Module",o),h=o._proto,f=o._scope;return t.defs($,"$new",u=function(){function n(){}var e=u._p,i=e||r;u._p=null;var a=Opal.boot(Opal.Module,n);if(a._name=r,a._klass=Opal.Module,a.__dep__=[],a.__mod__=!0,a._proto={},t.create_scope(Opal.Module._scope,a),i!==r){var o=i._s;i._s=null,i.call(a),i._s=o}return a}),h["$==="]=function(n){var e,i=this;return(e=null==n)!=!1&&e!==r?!1:t.is_a(n,i)},h["$<"]=function(t){for(var n=this,r=n;r;){if(r===t)return!0;r=r.__parent}return!1},h.$alias_method=function(n,r){var e=this;return e._proto["$"+n]=e._proto["$"+r],e._methods&&t.donate(e,["$"+n]),e},h.$alias_native=function(t,n){var r=this;return null==n&&(n=t),r._proto["$"+t]=r._proto[n]},h.$ancestors=function(){for(var t=this,n=t,r=[];n;)r.push(n),r=r.concat(n.__inc__),n=n._super;return r},h.$append_features=function(n){for(var r=this,e=r,i=n.__inc__,a=0,o=i.length;o>a;a++)if(i[a]===e)return;i.push(e),e.__dep__.push(n);var u={name:e._name,_proto:e._proto,__parent:n.__parent,__iclass:!0};n.__parent=u;for(var s=e._proto,c=n._proto,l=e._methods,a=0,o=l.length;o>a;a++){var $=l[a];c.hasOwnProperty($)&&!c[$]._donated||(c[$]=s[$],c[$]._donated=!0)}return n.__dep__&&t.donate(n,l.slice(),!0),t.donate_constants(e,n),r},h.$attr_accessor=function(t){var n,r,i=this;return t=e.call(arguments,0),(n=i).$attr_reader.apply(n,[].concat(t)),(r=i).$attr_writer.apply(r,[].concat(t))},h.$attr_reader=function(n){var i=this;n=e.call(arguments,0);for(var a=i._proto,o=i,u=0,s=n.length;s>u;u++)(function(n){a[n]=r;var e=function(){return this[n]};o._isSingleton?a.constructor.prototype["$"+n]=e:(a["$"+n]=e,t.donate(i,["$"+n]))})(n[u]);return r},h.$attr_writer=function(n){var i=this;n=e.call(arguments,0);for(var a=i._proto,o=i,u=0,s=n.length;s>u;u++)(function(n){a[n]=r;var e=function(t){return this[n]=t};o._isSingleton?a.constructor.prototype["$"+n+"="]=e:(a["$"+n+"="]=e,t.donate(i,["$"+n+"="]))})(n[u]);return r},t.defn($,"$attr",h.$attr_accessor),h.$constants=function(){var t=this;return t._scope.constants},h["$const_defined?"]=function(t,n){var e,i=this;if(null==n&&(n=!0),((e=t["$=~"](/^[A-Z]\w*$/))===!1||e===r)&&i.$raise(f.NameError,"wrong constant name "+t),scopes=[i._scope],n||i===Opal.Object)for(var a=i._super;a!==Opal.BasicObject;)scopes.push(a._scope),a=a._super;for(var o=0,u=scopes.length;u>o;o++)if(scopes[o].hasOwnProperty(t))return!0;return!1},h.$const_get=function(t,n){var e,i=this;null==n&&(n=!0),((e=t["$=~"](/^[A-Z]\w*$/))===!1||e===r)&&i.$raise(f.NameError,"wrong constant name "+t);var a=[i._scope];if(n||i==Opal.Object)for(var o=i._super;o!==Opal.BasicObject;)a.push(o._scope),o=o._super;for(var u=0,s=a.length;s>u;u++)if(a[u].hasOwnProperty(t))return a[u][t];return i.$const_missing(t)},h.$const_missing=function(t){var n=this,e=r;return e=n._name,n.$raise(f.NameError,"uninitialized constant "+e+"::"+t)},h.$const_set=function(n,e){var i,a=this;((i=n["$=~"](/^[A-Z]\w*$/))===!1||i===r)&&a.$raise(f.NameError,"wrong constant name "+n);try{n=n.$to_str()}catch(o){a.$raise(f.TypeError,"conversion with #to_str failed")}return t.casgn(a,n,e),e},h.$define_method=s=function(n,e){var i=this,a=s._p,o=a||r;if(s._p=null,e&&(o=e.$to_proc()),o===r)throw Error("no block given");var u="$"+n;return o._jsid=n,o._s=null,o._def=o,i._proto[u]=o,t.donate(i,[u]),null},h.$remove_method=function(t){var n=this,r="$"+t;return n._proto[r],delete n._proto[r],n},h.$include=function(t){var n=this;t=e.call(arguments,0);for(var r,i=t.length-1;i>=0;)r=t[i],i--,r!==n&&(r.$append_features(n),r.$included(n));return n},h.$instance_method=function(t){var n=this,r=n._proto["$"+t];return(!r||r.rb_stub)&&n.$raise(f.NameError,"undefined method `"+t+"' for class `"+n.$name()+"'"),f.UnboundMethod.$new(n,r,t)},h.$instance_methods=function(t){var n=this;null==t&&(t=!1);var r=[],e=n._proto;for(var i in n._proto)(t||e.hasOwnProperty(i))&&(t||!e[i]._donated)&&"$"===i.charAt(0)&&r.push(i.substr(1));return r},h.$included=function(){return r},h.$module_eval=c=function(){var t=this,n=c._p,e=n||r;if(c._p=null,e===r)throw Error("no block given");var i,a=e._s;return e._s=null,i=e.call(t),e._s=a,i},t.defn($,"$class_eval",h.$module_eval),h.$module_exec=l=function(){var t=this,n=l._p,i=n||r;if(l._p=null,i===r)throw Error("no block given");var a,o=i._s;return i._s=null,a=i.apply(t,e.call(arguments)),i._s=o,a},t.defn($,"$class_exec",h.$module_exec),h["$method_defined?"]=function(t){var n=this,r=n._proto["$"+t];return!!r&&!r.rb_stub},h.$module_function=function(t){var n=this;t=e.call(arguments,0);for(var r=0,i=t.length;i>r;r++){var a=t[r],o=n._proto["$"+a];n.constructor.prototype["$"+a]=o}return n},h.$name=function(){var n=this;if(n._full_name)return n._full_name;for(var e=[],i=n;i;){if(i._name===r)return 0===e.length?r:e.join("::");if(e.unshift(i._name),i=i._base_module,i===t.Object)break}return 0===e.length?r:n._full_name=e.join("::")},h.$public=function(){return r},h.$private_class_method=function(t){var n=this;return n["$"+t]||r},t.defn($,"$private",h.$public),t.defn($,"$protected",h.$public),h["$private_method_defined?"]=function(){return!1},t.defn($,"$protected_method_defined?",h["$private_method_defined?"]),t.defn($,"$public_instance_methods",h.$instance_methods),t.defn($,"$public_method_defined?",h["$method_defined?"]),h.$remove_class_variable=function(){return r},h.$remove_const=function(t){var n=this,r=n._scope[t];return delete n._scope[t],r},h.$to_s=function(){var t=this;return t.$name().$to_s()},h.$undef_method=function(n){var r=this;return t.add_stub_for(r._proto,"$"+n),r},r}(n,null)}(Opal),function(t){var n=t.top,r=t.nil,e=(t.breaker,t.slice),i=t.klass;return t.add_stubs(["$raise","$allocate"]),function(n,a){function o(){}var u,s,c=o=i(n,a,"Class",o),l=o._proto,$=o._scope;return t.defs(c,"$new",u=function(n){function e(){}var i=this,a=u._p,o=a||r;null==n&&(n=$.Object),u._p=null,(!n._isClass||n.__mod__)&&i.$raise($.TypeError,"superclass must be a Class");var s=Opal.boot(n,e);if(s._name=r,s.__parent=n,t.create_scope(n._scope,s),n.$inherited(s),o!==r){var c=o._s;o._s=null,o.call(s),o._s=c}return s}),l.$allocate=function(){var t=this,n=new t._alloc;return n._id=Opal.uid(),n},l.$inherited=function(){return r},l.$new=s=function(t){var n=this,i=s._p,a=i||r;t=e.call(arguments,0),s._p=null;var o=n.$allocate();return o.$initialize._p=a,o.$initialize.apply(o,t),o},l.$superclass=function(){var t=this;return t._super||r},r}(n,null)}(Opal),function(t){var n=t.top,r=t.nil,e=(t.breaker,t.slice),i=t.klass;return t.add_stubs(["$raise"]),function(n,a){function o(){}var u,s,c,l,$=o=i(n,a,"BasicObject",o),h=o._proto,f=o._scope;return t.defn($,"$initialize",function(){return r}),t.defn($,"$==",function(t){var n=this;return n===t}),t.defn($,"$__id__",function(){var t=this;return t._id||(t._id=Opal.uid())}),t.defn($,"$__send__",u=function(t,n){var i=this,a=u._p,o=a||r;n=e.call(arguments,1),u._p=null;var s=i["$"+t];return s?(o!==r&&(s._p=o),s.apply(i,n)):(o!==r&&(i.$method_missing._p=o),i.$method_missing.apply(i,[t].concat(n)))}),t.defn($,"$eql?",h["$=="]),t.defn($,"$equal?",h["$=="]),t.defn($,"$instance_eval",s=function(){var t,n=this,e=s._p,i=e||r;s._p=null,((t=i)===!1||t===r)&&f.Kernel.$raise(f.ArgumentError,"no block given");var a,o=i._s;return i._s=null,a=i.call(n,n),i._s=o,a}),t.defn($,"$instance_exec",c=function(t){var n,i=this,a=c._p,o=a||r;t=e.call(arguments,0),c._p=null,((n=o)===!1||n===r)&&f.Kernel.$raise(f.ArgumentError,"no block given");var u,s=o._s;return o._s=null,u=o.apply(i,t),o._s=s,u}),t.defn($,"$method_missing",l=function(t,n){return l._p,n=e.call(arguments,1),l._p=null,f.Kernel.$raise(f.NoMethodError,"undefined method `"+t+"' for BasicObject instance")}),r}(n,null)}(Opal),function(t){var n=t.top,r=t.nil,e=t.breaker,i=t.slice,a=t.module,o=t.gvars;return t.add_stubs(["$raise","$inspect","$==","$name","$class","$new","$respond_to?","$to_ary","$to_a","$allocate","$copy_instance_variables","$initialize_clone","$initialize_copy","$private","$singleton_class","$initialize_dup","$for","$to_proc","$include","$to_i","$to_s","$to_f","$*","$===","$empty?","$ArgumentError","$nan?","$infinite?","$to_int","$>","$length","$print","$format","$puts","$each","$<=","$[]","$nil?","$is_a?","$rand","$coerce_to"]),function(n){var u,s,c,l,$,h,f,p,_=a(n,"Kernel"),v=_._proto,d=_._scope;v.$method_missing=u=function(t,n){var r=this;return u._p,n=i.call(arguments,1),u._p=null,r.$raise(d.NoMethodError,"undefined method `"+t+"' for "+r.$inspect())},v["$=~"]=function(){return!1},v["$==="]=function(t){var n=this;return n["$=="](t)},v["$<=>"]=function(t){var n=this;return n["$=="](t)?0:r},v.$method=function(t){var n=this,r=n["$"+t];return(!r||r.rb_stub)&&n.$raise(d.NameError,"undefined method `"+t+"' for class `"+n.$class().$name()+"'"),d.Method.$new(n,r,t)},v.$methods=function(n){var e=this;null==n&&(n=!0);var i=[];for(var a in e)if("$"==a[0]&&"function"==typeof e[a]){if((0==n||n===r)&&!t.hasOwnProperty.call(e,a))continue;i.push(a.substr(1))}return i},v.$Array=s=function(t,n){return s._p,n=i.call(arguments,1),s._p=null,null==t||t===r?[]:t["$respond_to?"]("to_ary")?t.$to_ary():t["$respond_to?"]("to_a")?t.$to_a():[t]},v.$caller=function(){return[]},v.$class=function(){var t=this;return t._klass},v.$copy_instance_variables=function(t){var n=this;for(var r in t)"$"!==r.charAt(0)&&"_id"!==r&&"_klass"!==r&&(n[r]=t[r])},v.$clone=function(){var t=this,n=r;return n=t.$class().$allocate(),n.$copy_instance_variables(t),n.$initialize_clone(t),n},v.$initialize_clone=function(t){var n=this;return n.$initialize_copy(t)},_.$private("initialize_clone"),v.$define_singleton_method=c=function(t){var n,e=this,i=c._p,a=i||r;c._p=null,((n=a)===!1||n===r)&&e.$raise(d.ArgumentError,"tried to create Proc object without a block");var o="$"+t;return a._jsid=t,a._s=null,a._def=a,e.$singleton_class()._proto[o]=a,e},v.$dup=function(){var t=this,n=r;return n=t.$class().$allocate(),n.$copy_instance_variables(t),n.$initialize_dup(t),n},v.$initialize_dup=function(t){var n=this;return n.$initialize_copy(t)},_.$private("initialize_dup"),v.$enum_for=l=function(t,n){var e,a,o=this,u=l._p,s=u||r;return n=i.call(arguments,1),null==t&&(t="each"),l._p=null,(e=(a=d.Enumerator).$for,e._p=s.$to_proc(),e).apply(a,[o,t].concat(n))},v["$equal?"]=function(t){var n=this;return n===t},v.$extend=function(t){var n=this;t=i.call(arguments,0);for(var r=0,e=t.length;e>r;r++)n.$singleton_class().$include(t[r]);return n},v.$format=function(t,n){n=i.call(arguments,1);var r=0;return t.replace(/%(\d+\$)?([-+ 0]*)(\d*|\*(\d+\$)?)(?:\.(\d*|\*(\d+\$)?))?([cspdiubBoxXfgeEG])|(%%)/g,function(t,e,i,a,o,u,s,c,l){if(l)return"%";var $,h,f,p=-1!="diubBoxX".indexOf(c),_=-1!="eEfgG".indexOf(c),v="";if(void 0===a)$=void 0;else if("*"==a.charAt(0)){var d=r++;o&&(d=parseInt(o,10)-1),$=n[d].$to_i()}else $=parseInt(a,10);if(u)if("*"==u.charAt(0)){var m=r++;s&&(m=parseInt(s,10)-1),h=n[m].$to_i()}else h=parseInt(u,10);else h=_?6:void 0;switch(e&&(r=parseInt(e,10)-1),c){case"c":f=n[r],t=f._isString?f.charAt(0):String.fromCharCode(f.$to_i());break;case"s":t=n[r].$to_s(),void 0!==h&&(t=t.substr(0,h));break;case"p":t=n[r].$inspect(),void 0!==h&&(t=t.substr(0,h));break;case"d":case"i":case"u":t=""+n[r].$to_i();break;case"b":case"B":t=n[r].$to_i().toString(2);break;case"o":t=n[r].$to_i().toString(8);break;case"x":case"X":t=n[r].$to_i().toString(16);break;case"e":case"E":t=n[r].$to_f().toExponential(h);break;case"f":t=n[r].$to_f().toFixed(h);break;case"g":case"G":t=n[r].$to_f().toPrecision(h)}r++,(p||_)&&("-"==t.charAt(0)?(v="-",t=t.substr(1)):-1!=i.indexOf("+")?v="+":-1!=i.indexOf(" ")&&(v=" ")),p&&void 0!==h&&h>t.length&&(t="0"["$*"](h-t.length)+t);var g=v.length+t.length;void 0!==$&&$>g&&(-1!=i.indexOf("-")?t+=" "["$*"]($-g):-1!=i.indexOf("0")?t="0"["$*"]($-g)+t:v=" "["$*"]($-g)+v);var y=v+t;return-1!="XEG".indexOf(c)&&(y=y.toUpperCase()),y})},v.$hash=function(){var t=this;return t._id},v.$initialize_copy=function(){return r},v.$inspect=function(){var t=this;return t.$to_s()},v["$instance_of?"]=function(t){var n=this;return n._klass===t},v["$instance_variable_defined?"]=function(t){var n=this;return n.hasOwnProperty(t.substr(1))},v.$instance_variable_get=function(t){var n=this,e=n[t.substr(1)];return null==e?r:e},v.$instance_variable_set=function(t,n){var r=this;return r[t.substr(1)]=n},v.$instance_variables=function(){var t=this,n=[];for(var r in t)"$"!==r.charAt(0)&&"_klass"!==r&&"_id"!==r&&n.push("@"+r);return n},v.$Integer=function(t,n){var e,i,a=this,o=r;return null==n&&(n=r),(e=d.String["$==="](t))!==!1&&e!==r?((e=t["$empty?"]())!==!1&&e!==r&&a.$raise(d.ArgumentError,"invalid value for Integer: (empty string)"),parseInt(t,(e=n)!==!1&&e!==r?e:void 0)):(n!==!1&&n!==r&&a.$raise(a.$ArgumentError("base is only valid for String values")),function(){return o=t,d.Integer["$==="](o)?t:d.Float["$==="](o)?((e=(i=t["$nan?"]())!==!1&&i!==r?i:t["$infinite?"]())!==!1&&e!==r&&a.$raise(d.FloatDomainError,"unable to coerce "+t+" to Integer"),t.$to_int()):d.NilClass["$==="](o)?a.$raise(d.TypeError,"can't convert nil into Integer"):(e=t["$respond_to?"]("to_int"))!==!1&&e!==r?t.$to_int():(e=t["$respond_to?"]("to_i"))!==!1&&e!==r?t.$to_i():a.$raise(d.TypeError,"can't convert "+t.$class()+" into Integer")}())},v.$Float=function(t){var n,e=this;return(n=d.String["$==="](t))!==!1&&n!==r?parseFloat(t):(n=t["$respond_to?"]("to_f"))!==!1&&n!==r?t.$to_f():e.$raise(d.TypeError,"can't convert "+t.$class()+" into Float")},v["$is_a?"]=function(n){var r=this;return t.is_a(r,n)},t.defn(_,"$kind_of?",v["$is_a?"]),v.$lambda=$=function(){var t=$._p,n=t||r;return $._p=null,n.is_lambda=!0,n},v.$loop=h=function(){var t=this,n=h._p,i=n||r;for(h._p=null;;)if(i()===e)return e.$v;return t},v["$nil?"]=function(){return!1},t.defn(_,"$object_id",v.$__id__),v.$printf=function(t){var n,e=this;return t=i.call(arguments,0),t.$length()["$>"](0)&&e.$print((n=e).$format.apply(n,[].concat(t))),r},v.$private_methods=function(){return[]},v.$proc=f=function(){var t,n=this,e=f._p,i=e||r;return f._p=null,((t=i)===!1||t===r)&&n.$raise(d.ArgumentError,"tried to create Proc object without a block"),i.is_lambda=!1,i},v.$puts=function(t){var n;return t=i.call(arguments,0),(n=o.stdout).$puts.apply(n,[].concat(t))},v.$p=function(t){var n,e,a,u=this;return t=i.call(arguments,0),(n=(e=t).$each,n._p=(a=function(t){return a._s||this,null==t&&(t=r),o.stdout.$puts(t.$inspect())},a._s=u,a),n).call(e),t.$length()["$<="](1)?t["$[]"](0):t},t.defn(_,"$print",v.$puts),v.$warn=function(t){var n,e;return t=i.call(arguments,0),((n=(e=o.VERBOSE["$nil?"]())!==!1&&e!==r?e:t["$empty?"]())===!1||n===r)&&(n=o.stderr).$puts.apply(n,[].concat(t)),r},v.$raise=function(t,n){throw null==t&&o["!"]?t=o["!"]:t._isString?t=d.RuntimeError.$new(t):t["$is_a?"](d.Exception)||(t=t.$new(n)),t},t.defn(_,"$fail",v.$raise),v.$rand=function(t){var n=this;if(void 0===t)return Math.random();if(t._isRange){var r=t.$to_a();return r[n.$rand(r.length)]}return Math.floor(Math.random()*Math.abs(d.Opal.$coerce_to(t,d.Integer,"to_int")))},t.defn(_,"$srand",v.$rand),v["$respond_to?"]=function(t,n){var r=this;null==n&&(n=!1);var e=r["$"+t];return!!e&&!e.rb_stub},t.defn(_,"$send",v.$__send__),t.defn(_,"$public_send",v.$__send__),v.$singleton_class=function(){var n=this;if(n._isClass){if(n.__meta__)return n.__meta__;var r=new t.Class._alloc;return r._klass=t.Class,n.__meta__=r,r._proto=n.constructor.prototype,r._isSingleton=!0,r.__inc__=[],r._methods=[],r._scope=n._scope,r}if(n._isClass)return n._klass;if(n.__meta__)return n.__meta__;var e=n._klass,i="#<Class:#<"+e._name+":"+e._id+">>",a=function(){},r=Opal.boot(e,a);return r._name=i,r._proto=n,n.__meta__=r,r._klass=e._klass,r._scope=e._scope,r.__parent=e,r},t.defn(_,"$sprintf",v.$format),v.$String=function(t){return t+""},v.$tap=p=function(){var n=this,i=p._p,a=i||r;return p._p=null,t.$yield1(a,n)===e?e.$v:n},v.$to_proc=function(){var t=this;return t},v.$to_s=function(){var t=this;return"#<"+t.$class().$name()+":"+t._id+">"},v.$freeze=function(){var t=this;return t.___frozen___=!0,t},v["$frozen?"]=function(){var t,n=this;return null==n.___frozen___&&(n.___frozen___=r),(t=n.___frozen___)!==!1&&t!==r?t:!1},v["$respond_to_missing?"]=function(){return!1},t.donate(_,["$method_missing","$=~","$===","$<=>","$method","$methods","$Array","$caller","$class","$copy_instance_variables","$clone","$initialize_clone","$define_singleton_method","$dup","$initialize_dup","$enum_for","$equal?","$extend","$format","$hash","$initialize_copy","$inspect","$instance_of?","$instance_variable_defined?","$instance_variable_get","$instance_variable_set","$instance_variables","$Integer","$Float","$is_a?","$kind_of?","$lambda","$loop","$nil?","$object_id","$printf","$private_methods","$proc","$puts","$p","$print","$warn","$raise","$fail","$rand","$srand","$respond_to?","$send","$public_send","$singleton_class","$sprintf","$String","$tap","$to_proc","$to_s","$freeze","$frozen?","$respond_to_missing?"])}(n)}(Opal),function(t){var n=t.top,r=t,e=t.nil,i=(t.breaker,t.slice,t.klass);return t.add_stubs(["$raise"]),function(n,r){function a(){}var o=a=i(n,r,"NilClass",a),u=a._proto,s=a._scope;return u["$&"]=function(){return!1},u["$|"]=function(t){return t!==!1&&t!==e},u["$^"]=function(t){return t!==!1&&t!==e},u["$=="]=function(t){return t===e},u.$dup=function(){var t=this;return t.$raise(s.TypeError)},u.$inspect=function(){return"nil"},u["$nil?"]=function(){return!0},u.$singleton_class=function(){return s.NilClass},u.$to_a=function(){return[]},u.$to_h=function(){return t.hash()},u.$to_i=function(){return 0},t.defn(o,"$to_f",u.$to_i),u.$to_s=function(){return""},u.$object_id=function(){return s.NilClass._id||(s.NilClass._id=t.uid())},t.defn(o,"$hash",u.$object_id)}(n,null),t.cdecl(r,"NIL",e)}(Opal),function(t){var n=t.top,r=t,e=t.nil,i=(t.breaker,t.slice,t.klass);return t.add_stubs(["$undef_method"]),function(n,r){function a(){}var o=a=i(n,r,"Boolean",a),u=a._proto;return a._scope,u._isBoolean=!0,function(t){return t._scope,t._proto,t.$undef_method("new")}(o.$singleton_class()),u["$&"]=function(t){var n=this;return 1==n?t!==!1&&t!==e:!1},u["$|"]=function(t){var n=this;return 1==n?!0:t!==!1&&t!==e},u["$^"]=function(t){var n=this;return 1==n?t===!1||t===e:t!==!1&&t!==e},u["$=="]=function(t){var n=this;return 1==n===t.valueOf()},t.defn(o,"$equal?",u["$=="]),t.defn(o,"$singleton_class",u.$class),u.$to_s=function(){var t=this;return 1==t?"true":"false"},e}(n,null),t.cdecl(r,"TrueClass",r.Boolean),t.cdecl(r,"FalseClass",r.Boolean),t.cdecl(r,"TRUE",!0),t.cdecl(r,"FALSE",!1)}(Opal),function(t){var n=t.top,r=t,e=t.nil,i=(t.breaker,t.slice,t.klass),a=t.module;return t.add_stubs(["$attr_reader","$name","$class"]),function(n,r){function a(){}var o=a=i(n,r,"Exception",a),u=a._proto;return a._scope,u.message=e,o.$attr_reader("message"),t.defs(o,"$new",function(t){var n=this;null==t&&(t="");var r=Error(t);return r._klass=n,r.name=n._name,r}),u.$backtrace=function(){var t=this,n=t.stack;return"string"==typeof n?n.split("\n").slice(0,15):n?n.slice(0,15):[]},u.$inspect=function(){var t=this;return"#<"+t.$class().$name()+": '"+t.message+"'>"},t.defn(o,"$to_s",u.$message)}(n,null),function(t,n){function r(){}return r=i(t,n,"StandardError",r),r._proto,r._scope,e}(n,r.Exception),function(t,n){function r(){}return r=i(t,n,"SystemCallError",r),r._proto,r._scope,e}(n,r.StandardError),function(t,n){function r(){}return r=i(t,n,"NameError",r),r._proto,r._scope,e}(n,r.StandardError),function(t,n){function r(){}return r=i(t,n,"NoMethodError",r),r._proto,r._scope,e}(n,r.NameError),function(t,n){function r(){}return r=i(t,n,"RuntimeError",r),r._proto,r._scope,e}(n,r.StandardError),function(t,n){function r(){}return r=i(t,n,"LocalJumpError",r),r._proto,r._scope,e}(n,r.StandardError),function(t,n){function r(){}return r=i(t,n,"TypeError",r),r._proto,r._scope,e}(n,r.StandardError),function(t,n){function r(){}return r=i(t,n,"ArgumentError",r),r._proto,r._scope,e}(n,r.StandardError),function(t,n){function r(){}return r=i(t,n,"IndexError",r),r._proto,r._scope,e}(n,r.StandardError),function(t,n){function r(){}return r=i(t,n,"StopIteration",r),r._proto,r._scope,e}(n,r.IndexError),function(t,n){function r(){}return r=i(t,n,"KeyError",r),r._proto,r._scope,e}(n,r.IndexError),function(t,n){function r(){}return r=i(t,n,"RangeError",r),r._proto,r._scope,e}(n,r.StandardError),function(t,n){function r(){}return r=i(t,n,"FloatDomainError",r),r._proto,r._scope,e}(n,r.RangeError),function(t,n){function r(){}return r=i(t,n,"IOError",r),r._proto,r._scope,e}(n,r.StandardError),function(t,n){function r(){}return r=i(t,n,"ScriptError",r),r._proto,r._scope,e}(n,r.Exception),function(t,n){function r(){}return r=i(t,n,"SyntaxError",r),r._proto,r._scope,e}(n,r.ScriptError),function(t,n){function r(){}return r=i(t,n,"NotImplementedError",r),r._proto,r._scope,e}(n,r.ScriptError),function(t,n){function r(){}return r=i(t,n,"SystemExit",r),r._proto,r._scope,e}(n,r.Exception),function(n){var r=a(n,"Errno"),o=(r._proto,r._scope);(function(n,r){function a(){}var o,u=a=i(n,r,"EINVAL",a);return a._proto,a._scope,t.defs(u,"$new",o=function(){var n=this;return o._p,o._p=null,t.find_super_dispatcher(n,"new",o,null,a).apply(n,["Invalid argument"])}),e})(r,o.SystemCallError)}(n)}(Opal),function(t){var n=t.top,r=t.nil,e=(t.breaker,t.slice),i=t.klass,a=t.gvars;return t.add_stubs(["$respond_to?","$to_str","$to_s","$coerce_to","$new","$raise","$class"]),function(n,o){function u(){}var s=u=i(n,o,"Regexp",u),c=u._proto,l=u._scope;return c._isRegexp=!0,t.defs(s,"$escape",function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\^\$\| ]/g,"\\$&")}),t.defs(s,"$union",function(t){return t=e.call(arguments,0),RegExp(t.join(""))}),t.defs(s,"$new",function(t,n){return RegExp(t,n)}),c["$=="]=function(t){var n=this;return t.constructor==RegExp&&""+n==""+t},c["$==="]=function(t){var n,e,i=this;return e=null==t._isString,(n=e!==!1&&e!==r?t["$respond_to?"]("to_str"):e)!==!1&&n!==r&&(t=t.$to_str()),(n=null==t._isString)!=!1&&n!==r?!1:i.test(t)},c["$=~"]=function(t){var n,e=this;if((n=t===r)!=!1&&n!==r)return a["~"]=a["`"]=a["'"]=r,r;t=l.Opal.$coerce_to(t,l.String,"to_str").$to_s();var i=e;i.global?i.lastIndex=0:i=RegExp(i.source,"g"+(i.multiline?"m":"")+(i.ignoreCase?"i":""));var o=i.exec(t);return a["~"]=o?l.MatchData.$new(i,o):a["`"]=a["'"]=r,o?o.index:r},t.defn(s,"$eql?",c["$=="]),c.$inspect=function(){var t=this;return""+t},c.$match=function(t){var n,e=this;if((n=t===r)!=!1&&n!==r)return a["~"]=a["`"]=a["'"]=r,r;(n=null==t._isString)!=!1&&n!==r&&(((n=t["$respond_to?"]("to_str"))===!1||n===r)&&e.$raise(l.TypeError,"no implicit conversion of "+t.$class()+" into String"),t=t.$to_str());var i=e;i.global?i.lastIndex=0:i=RegExp(i.source,"g"+(i.multiline?"m":"")+(i.ignoreCase?"i":""));var o=i.exec(t);return a["~"]=o?l.MatchData.$new(i,o):a["`"]=a["'"]=r},c.$source=function(){var t=this;return t.source},t.defn(s,"$to_s",c.$source)}(n,null)}(Opal),function(t){var n=t.top,r=t.nil,e=(t.breaker,t.slice,t.module);return t.add_stubs(["$===","$>","$<","$equal?","$<=>","$==","$normalize","$raise","$class","$>=","$<="]),function(n){var i=e(n,"Comparable"),a=i._proto,o=i._scope;t.defs(i,"$normalize",function(t){var n;return(n=o.Integer["$==="](t))!==!1&&n!==r?t:t["$>"](0)?1:t["$<"](0)?-1:0}),a["$=="]=function(t){var n,e=this,i=r;try{return(n=e["$equal?"](t))!==!1&&n!==r?!0:(n=i=e["$<=>"](t))===!1||n===r?!1:o.Comparable.$normalize(i)["$=="](0)}catch(a){if(o.StandardError["$==="](a))return!1;throw a}},a["$>"]=function(t){var n,e=this,i=r;return((n=i=e["$<=>"](t))===!1||n===r)&&e.$raise(o.ArgumentError,"comparison of "+e.$class()+" with "+t.$class()+" failed"),o.Comparable.$normalize(i)["$>"](0)
},a["$>="]=function(t){var n,e=this,i=r;return((n=i=e["$<=>"](t))===!1||n===r)&&e.$raise(o.ArgumentError,"comparison of "+e.$class()+" with "+t.$class()+" failed"),o.Comparable.$normalize(i)["$>="](0)},a["$<"]=function(t){var n,e=this,i=r;return((n=i=e["$<=>"](t))===!1||n===r)&&e.$raise(o.ArgumentError,"comparison of "+e.$class()+" with "+t.$class()+" failed"),o.Comparable.$normalize(i)["$<"](0)},a["$<="]=function(t){var n,e=this,i=r;return((n=i=e["$<=>"](t))===!1||n===r)&&e.$raise(o.ArgumentError,"comparison of "+e.$class()+" with "+t.$class()+" failed"),o.Comparable.$normalize(i)["$<="](0)},a["$between?"]=function(t,n){var r=this;return r["$<"](t)?!1:r["$>"](n)?!1:!0},t.donate(i,["$==","$>","$>=","$<","$<=","$between?"])}(n)}(Opal),function(t){var n=t.top,r=t.nil,e=t.breaker,i=t.slice,a=t.module;return t.add_stubs(["$raise","$enum_for","$==","$destructure","$nil?","$coerce_to!","$coerce_to","$===","$new","$<<","$[]","$[]=","$inspect","$__send__","$yield","$enumerator_size","$respond_to?","$size","$private","$compare","$<=>","$dup","$map","$sort","$call","$first"]),function(n){var o,u,s,c,l,$,h,f,p,_,v,d,m,g,y,b,M,w,D,E,x,k,O,C,I,S,A,N,z,q,F,T,P,j,R=a(n,"Enumerable"),V=R._proto,B=R._scope;V["$all?"]=o=function(){var n,i=this,a=o._p,u=a||r;o._p=null;var s=!0;return i.$each._p=u!==r?function(){var i=t.$yieldX(u,arguments);return i===e?(s=e.$v,e):(n=i)===!1||n===r?(s=!1,e):void 0}:function(t){return 1==arguments.length&&(n=t)===!1||n===r?(s=!1,e):void 0},i.$each(),s},V["$any?"]=u=function(){var n,i=this,a=u._p,o=a||r;u._p=null;var s=!1;return i.$each._p=o!==r?function(){var i=t.$yieldX(o,arguments);return i===e?(s=e.$v,e):(n=i)!==!1&&n!==r?(s=!0,e):void 0}:function(t){return 1!=arguments.length||(n=t)!==!1&&n!==r?(s=!0,e):void 0},i.$each(),s},V.$chunk=s=function(){var t=this;return s._p,s._p=null,t.$raise(B.NotImplementedError)},V.$collect=c=function(){var n=this,i=c._p,a=i||r;if(c._p=null,a===r)return n.$enum_for("collect");var o=[];return n.$each._p=function(){var n=t.$yieldX(a,arguments);return n===e?(o=e.$v,e):(o.push(n),void 0)},n.$each(),o},V.$collect_concat=l=function(){var t=this;return l._p,l._p=null,t.$raise(B.NotImplementedError)},V.$count=$=function(n){var i,a=this,o=$._p,u=o||r;$._p=null;var s=0;return null!=n?u=function(){return B.Opal.$destructure(arguments)["$=="](n)}:u===r&&(u=function(){return!0}),a.$each._p=function(){var n=t.$yieldX(u,arguments);return n===e?(s=e.$v,e):((i=n)!==!1&&i!==r&&s++,void 0)},a.$each(),s},V.$cycle=h=function(n){var i,a=this,o=h._p,u=o||r;if(null==n&&(n=r),h._p=null,(i=u)===!1||i===r)return a.$enum_for("cycle",n);if(((i=n["$nil?"]())===!1||i===r)&&(n=B.Opal["$coerce_to!"](n,B.Integer,"to_int"),(i=0>=n)!=!1&&i!==r))return r;var s,c=[];if(a.$each._p=function(){var n=B.Opal.$destructure(arguments),r=t.$yield1(u,n);return r===e?(s=e.$v,e):(c.push(n),void 0)},a.$each(),void 0!==s)return s;if(0===c.length)return r;if((i=n["$nil?"]())!==!1&&i!==r)for(;;)for(var l=0,$=c.length;$>l;l++){var f=t.$yield1(u,c[l]);if(f===e)return e.$v}else for(;n>1;){for(var l=0,$=c.length;$>l;l++){var f=t.$yield1(u,c[l]);if(f===e)return e.$v}n--}},V.$detect=f=function(n){var i,a=this,o=f._p,u=o||r;if(f._p=null,u===r)return a.$enum_for("detect",n);var s=void 0;return a.$each._p=function(){var n=B.Opal.$destructure(arguments),a=t.$yield1(u,n);return a===e?(s=e.$v,e):(i=a)!==!1&&i!==r?(s=n,e):void 0},a.$each(),void 0===s&&void 0!==n&&(s="function"==typeof n?n():n),void 0===s?r:s},V.$drop=function(t){var n,e=this;t=B.Opal.$coerce_to(t,B.Integer,"to_int"),(n=0>t)!=!1&&n!==r&&e.$raise(B.ArgumentError,"attempt to drop negative size");var i=[],a=0;return e.$each._p=function(){a>=t&&i.push(B.Opal.$destructure(arguments)),a++},e.$each(),i},V.$drop_while=p=function(){var n,i=this,a=p._p,o=a||r;if(p._p=null,o===r)return i.$enum_for("drop_while");var u=[],s=!0;return i.$each._p=function(){var i=B.Opal.$destructure(arguments);if(s){var a=t.$yield1(o,i);if(a===e)return u=e.$v,e;((n=a)===!1||n===r)&&(s=!1,u.push(i))}else u.push(i)},i.$each(),u},V.$each_cons=_=function(){var t=this;return _._p,_._p=null,t.$raise(B.NotImplementedError)},V.$each_entry=v=function(){var t=this;return v._p,v._p=null,t.$raise(B.NotImplementedError)},V.$each_slice=d=function(t){var n,i=this,a=d._p,o=a||r;if(d._p=null,t=B.Opal.$coerce_to(t,B.Integer,"to_int"),(n=0>=t)!=!1&&n!==r&&i.$raise(B.ArgumentError,"invalid slice size"),o===r)return i.$enum_for("each_slice",t);var u,s=[];return i.$each._p=function(){var n=B.Opal.$destructure(arguments);if(s.push(n),s.length===t){if(o(s)===e)return u=e.$v,e;s=[]}},i.$each(),void 0!==u?u:s.length>0&&o(s)===e?e.$v:r},V.$each_with_index=m=function(t){var n,a=this,o=m._p,u=o||r;if(t=i.call(arguments,0),m._p=null,u===r)return(n=a).$enum_for.apply(n,["each_with_index"].concat(t));var s,c=0;return a.$each._p=function(){var t=B.Opal.$destructure(arguments),n=u(t,c);return n===e?(s=e.$v,e):(c++,void 0)},a.$each.apply(a,t),void 0!==s?s:a},V.$each_with_object=g=function(t){var n=this,i=g._p,a=i||r;if(g._p=null,a===r)return n.$enum_for("each_with_object",t);var o;return n.$each._p=function(){var n=B.Opal.$destructure(arguments),r=a(n,t);return r===e?(o=e.$v,e):void 0},n.$each(),void 0!==o?o:t},V.$entries=function(t){var n=this;t=i.call(arguments,0);var r=[];return n.$each._p=function(){r.push(B.Opal.$destructure(arguments))},n.$each.apply(n,t),r},t.defn(R,"$find",V.$detect),V.$find_all=y=function(){var n,i=this,a=y._p,o=a||r;if(y._p=null,o===r)return i.$enum_for("find_all");var u=[];return i.$each._p=function(){var i=B.Opal.$destructure(arguments),a=t.$yield1(o,i);return a===e?(u=e.$v,e):((n=a)!==!1&&n!==r&&u.push(i),void 0)},i.$each(),u},V.$find_index=b=function(n){var i,a=this,o=b._p,u=o||r;if(b._p=null,(i=void 0===n&&u===r)!=!1&&i!==r)return a.$enum_for("find_index");var s=r,c=0;return null!=n?a.$each._p=function(){var t=B.Opal.$destructure(arguments);return t["$=="](n)?(s=c,e):(c+=1,void 0)}:u!==r&&(a.$each._p=function(){var n=t.$yieldX(u,arguments);return n===e?(s=e.$v,e):(i=n)!==!1&&i!==r?(s=c,e):(c+=1,void 0)}),a.$each(),s},V.$first=function(t){var n,i=this,a=r;if((n=void 0===t)!=!1&&n!==r)a=r,i.$each._p=function(){return a=B.Opal.$destructure(arguments),e},i.$each();else{if(a=[],t=B.Opal.$coerce_to(t,B.Integer,"to_int"),(n=0>t)!=!1&&n!==r&&i.$raise(B.ArgumentError,"attempt to take negative size"),(n=0==t)!=!1&&n!==r)return[];var o=0,t=B.Opal.$coerce_to(t,B.Integer,"to_int");i.$each._p=function(){return a.push(B.Opal.$destructure(arguments)),++o>=t?e:void 0},i.$each()}return a},t.defn(R,"$flat_map",V.$collect_concat),V.$grep=M=function(n){var i,a=this,o=M._p,u=o||r;M._p=null;var s=[];return a.$each._p=u!==r?function(){var a=B.Opal.$destructure(arguments),o=n["$==="](a);if((i=o)!==!1&&i!==r){if(o=t.$yield1(u,a),o===e)return s=e.$v,e;s.push(o)}}:function(){var t=B.Opal.$destructure(arguments),e=n["$==="](t);(i=e)!==!1&&i!==r&&s.push(t)},a.$each(),s},V.$group_by=w=function(){var n,i,a,o=this,u=w._p,s=u||r,c=r;if(w._p=null,s===r)return o.$enum_for("group_by");c=B.Hash.$new();var l;return o.$each._p=function(){var o=B.Opal.$destructure(arguments),u=t.$yield1(s,o);return u===e?(l=e.$v,e):(n=u,i=c,(a=i["$[]"](n))!==!1&&a!==r?a:i["$[]="](n,[])["$<<"](o),void 0)},o.$each(),void 0!==l?l:c},V["$include?"]=function(t){var n=this,r=!1;return n.$each._p=function(){var n=B.Opal.$destructure(arguments);return n["$=="](t)?(r=!0,e):void 0},n.$each(),r},V.$inject=D=function(n,i){var a=this,o=D._p,u=o||r;D._p=null;var s=n;return u!==r&&void 0===i?a.$each._p=function(){var n=B.Opal.$destructure(arguments);return void 0===s?(s=n,void 0):(n=t.$yieldX(u,[s,n]),n===e?(s=e.$v,e):(s=n,void 0))}:(void 0===i&&(B.Symbol["$==="](n)||a.$raise(B.TypeError,""+n.$inspect()+" is not a Symbol"),i=n,s=void 0),a.$each._p=function(){var t=B.Opal.$destructure(arguments);return void 0===s?(s=t,void 0):(s=s.$__send__(i,t),void 0)}),a.$each(),s},V.$lazy=function(){var t,n,e,a=this;return(t=(n=B.Enumerator._scope.Lazy).$new,t._p=(e=function(t,n){var a;return e._s||this,null==t&&(t=r),n=i.call(arguments,1),(a=t).$yield.apply(a,[].concat(n))},e._s=a,e),t).call(n,a,a.$enumerator_size())},V.$enumerator_size=function(){var t,n=this;return(t=n["$respond_to?"]("size"))!==!1&&t!==r?n.$size():r},R.$private("enumerator_size"),t.defn(R,"$map",V.$collect),V.$max=E=function(){var t=this,n=E._p,i=n||r;E._p=null;var a;return t.$each._p=i!==r?function(){var n=B.Opal.$destructure(arguments);if(void 0===a)return a=n,void 0;var o=i(n,a);return o===e?(a=e.$v,e):(o===r&&t.$raise(B.ArgumentError,"comparison failed"),o>0&&(a=n),void 0)}:function(){var t=B.Opal.$destructure(arguments);return void 0===a?(a=t,void 0):(B.Opal.$compare(t,a)>0&&(a=t),void 0)},t.$each(),void 0===a?r:a},V.$max_by=x=function(){var n,i=this,a=x._p,o=a||r;if(x._p=null,(n=o)===!1||n===r)return i.$enum_for("max_by");var u,s;return i.$each._p=function(){var n=B.Opal.$destructure(arguments),r=t.$yield1(o,n);return void 0===u?(u=n,s=r,void 0):r===e?(u=e.$v,e):(r["$<=>"](s)>0&&(u=n,s=r),void 0)},i.$each(),void 0===u?r:u},t.defn(R,"$member?",V["$include?"]),V.$min=k=function(){var t=this,n=k._p,i=n||r;k._p=null;var a;return t.$each._p=i!==r?function(){var n=B.Opal.$destructure(arguments);if(void 0===a)return a=n,void 0;var o=i(n,a);return o===e?(a=e.$v,e):(o===r&&t.$raise(B.ArgumentError,"comparison failed"),0>o&&(a=n),void 0)}:function(){var t=B.Opal.$destructure(arguments);return void 0===a?(a=t,void 0):(0>B.Opal.$compare(t,a)&&(a=t),void 0)},t.$each(),void 0===a?r:a},V.$min_by=O=function(){var n,i=this,a=O._p,o=a||r;if(O._p=null,(n=o)===!1||n===r)return i.$enum_for("min_by");var u,s;return i.$each._p=function(){var n=B.Opal.$destructure(arguments),r=t.$yield1(o,n);return void 0===u?(u=n,s=r,void 0):r===e?(u=e.$v,e):(0>r["$<=>"](s)&&(u=n,s=r),void 0)},i.$each(),void 0===u?r:u},V.$minmax=C=function(){var t=this;return C._p,C._p=null,t.$raise(B.NotImplementedError)},V.$minmax_by=I=function(){var t=this;return I._p,I._p=null,t.$raise(B.NotImplementedError)},V["$none?"]=S=function(){var n,i=this,a=S._p,o=a||r;S._p=null;var u=!0;return i.$each._p=o!==r?function(){var i=t.$yieldX(o,arguments);return i===e?(u=e.$v,e):(n=i)!==!1&&n!==r?(u=!1,e):void 0}:function(){var t=B.Opal.$destructure(arguments);return(n=t)!==!1&&n!==r?(u=!1,e):void 0},i.$each(),u},V["$one?"]=A=function(){var n,i=this,a=A._p,o=a||r;A._p=null;var u=!1;return i.$each._p=o!==r?function(){var i=t.$yieldX(o,arguments);if(i===e)return u=e.$v,e;if((n=i)!==!1&&n!==r){if(u===!0)return u=!1,e;u=!0}}:function(){var t=B.Opal.$destructure(arguments);if((n=t)!==!1&&n!==r){if(u===!0)return u=!1,e;u=!0}},i.$each(),u},V.$partition=N=function(){var t=this;return N._p,N._p=null,t.$raise(B.NotImplementedError)},t.defn(R,"$reduce",V.$inject),V.$reverse_each=z=function(){var t=this;return z._p,z._p=null,t.$raise(B.NotImplementedError)},t.defn(R,"$select",V.$find_all),V.$slice_before=q=function(n){var e,i,a,o=this,u=q._p,s=u||r;return q._p=null,(e=void 0===n&&s===r||arguments.length>1)!=!1&&e!==r&&o.$raise(B.ArgumentError,"wrong number of arguments ("+arguments.length+" for 1)"),(e=(i=B.Enumerator).$new,e._p=(a=function(e){var i,o=a._s||this;null==e&&(e=r);var u=[];o.$each._p=s!==r?void 0===n?function(){var n=B.Opal.$destructure(arguments),a=t.$yield1(s,n);(i=a)!==!1&&i!==r&&u.length>0&&(e["$<<"](u),u=[]),u.push(n)}:function(){var t=B.Opal.$destructure(arguments),a=s(t,n.$dup());(i=a)!==!1&&i!==r&&u.length>0&&(e["$<<"](u),u=[]),u.push(t)}:function(){var t=B.Opal.$destructure(arguments),a=n["$==="](t);(i=a)!==!1&&i!==r&&u.length>0&&(e["$<<"](u),u=[]),u.push(t)},o.$each(),u.length>0&&e["$<<"](u)},a._s=o,a),e).call(i)},V.$sort=F=function(){var t=this;return F._p,F._p=null,t.$raise(B.NotImplementedError)},V.$sort_by=T=function(){var t,n,e,i,a,o,u,s,c,l=this,$=T._p,h=$||r;return T._p=null,h===r?l.$enum_for("sort_by"):(t=(n=(i=(a=(u=(s=l).$map,u._p=(c=function(){return c._s||this,arg=B.Opal.$destructure(arguments),[h.$call(arg),arg]},c._s=l,c),u).call(s)).$sort,i._p=(o=function(t,n){return o._s||this,null==t&&(t=r),null==n&&(n=r),t["$[]"](0)["$<=>"](n["$[]"](0))},o._s=l,o),i).call(a)).$map,t._p=(e=function(t){return e._s||this,null==t&&(t=r),t[1]},e._s=l,e),t).call(n)},V.$take=function(t){var n=this;return n.$first(t)},V.$take_while=P=function(){var n,i=this,a=P._p,o=a||r;if(P._p=null,(n=o)===!1||n===r)return i.$enum_for("take_while");var u=[];return i.$each._p=function(){var i=B.Opal.$destructure(arguments),a=t.$yield1(o,i);return a===e?(u=e.$v,e):(n=a)===!1||n===r?e:(u.push(i),void 0)},i.$each(),u},t.defn(R,"$to_a",V.$entries),V.$zip=j=function(t){var n=this;return j._p,t=i.call(arguments,0),j._p=null,n.$raise(B.NotImplementedError)},t.donate(R,["$all?","$any?","$chunk","$collect","$collect_concat","$count","$cycle","$detect","$drop","$drop_while","$each_cons","$each_entry","$each_slice","$each_with_index","$each_with_object","$entries","$find","$find_all","$find_index","$first","$flat_map","$grep","$group_by","$include?","$inject","$lazy","$enumerator_size","$map","$max","$max_by","$member?","$min","$min_by","$minmax","$minmax_by","$none?","$one?","$partition","$reduce","$reverse_each","$select","$slice_before","$sort","$sort_by","$take","$take_while","$to_a","$zip"])}(n)}(Opal),function(t){var n=t.top,r=t.nil,e=t.breaker,i=t.slice,a=t.klass;return t.add_stubs(["$include","$allocate","$new","$to_proc","$coerce_to","$__send__","$===","$call","$enum_for","$destructure","$name","$class","$inspect","$empty?","$+","$[]","$raise","$yield","$each","$enumerator_size","$respond_to?","$try_convert","$<","$for"]),function(n,o){function u(){}var s,c,l,$,h=u=a(n,o,"Enumerator",u),f=u._proto,p=u._scope;return f.size=f.object=f.method=f.args=r,h.$include(p.Enumerable),t.defs(h,"$for",s=function(t,n,e){var a=this,o=s._p,u=o||r;e=i.call(arguments,2),null==n&&(n="each"),s._p=null;var c=a.$allocate();return c.object=t,c.size=u,c.method=n,c.args=e,c}),f.$initialize=c=function(){var t,n,e=this,a=c._p,o=a||r;return c._p=null,o!==!1&&o!==r?(e.object=(t=(n=p.Generator).$new,t._p=o.$to_proc(),t).call(n),e.method="each",e.args=[],e.size=arguments[0]||r,(t=e.size)!==!1&&t!==r?e.size=p.Opal.$coerce_to(e.size,p.Integer,"to_int"):r):(e.object=arguments[0],e.method=arguments[1]||"each",e.args=i.call(arguments,2),e.size=r)},f.$each=l=function(){var t,n,e=this,i=l._p,a=i||r;return l._p=null,(t=a)===!1||t===r?e:(t=(n=e.object).$__send__,t._p=a.$to_proc(),t).apply(n,[e.method].concat(e.args))},f.$size=function(){var t,n=this;return(t=p.Proc["$==="](n.size))!==!1&&t!==r?(t=n.size).$call.apply(t,[].concat(n.args)):n.size},f.$with_index=$=function(t){var n,i=this,a=$._p,o=a||r;if(null==t&&(t=0),$._p=null,t=t!==!1&&t!==r?p.Opal.$coerce_to(t,p.Integer,"to_int"):0,(n=o)===!1||n===r)return i.$enum_for("with_index",t);var u;return i.$each._p=function(){var t=p.Opal.$destructure(arguments),n=o(t,index);return n===e?(u=e.$v,e):(index++,void 0)},i.$each(),void 0!==u?u:void 0},t.defn(h,"$with_object",f.$each_with_object),f.$inspect=function(){var t,n=this,e=r;return e="#<"+n.$class().$name()+": "+n.object.$inspect()+":"+n.method,((t=n.args["$empty?"]())===!1||t===r)&&(e=e["$+"]("("+n.args.$inspect()["$[]"](p.Range.$new(1,-2))+")")),e["$+"](">")},function(n,o){function u(){}var s,c,l=u=a(n,o,"Generator",u),$=u._proto,h=u._scope;return $.block=r,l.$include(h.Enumerable),$.$initialize=s=function(){var t,n=this,e=s._p,i=e||r;return s._p=null,((t=i)===!1||t===r)&&n.$raise(h.LocalJumpError,"no block given"),n.block=i},$.$each=c=function(n){var a,o,u=this,s=c._p,l=s||r,$=r;n=i.call(arguments,0),c._p=null,$=(a=(o=h.Yielder).$new,a._p=l.$to_proc(),a).call(o);try{if(n.unshift($),t.$yieldX(u.block,n)===e)return e.$v}catch(f){if(f===e)return e.$v;throw f}return u},r}(h,null),function(n,o){function u(){}u=a(n,o,"Yielder",u);var s,c=u._proto;return u._scope,c.block=r,c.$initialize=s=function(){var t=this,n=s._p,e=n||r;return s._p=null,t.block=e},c.$yield=function(n){var r=this;n=i.call(arguments,0);var a=t.$yieldX(r.block,n);if(a===e)throw e;return a},c["$<<"]=function(t){var n,r=this;return t=i.call(arguments,0),(n=r).$yield.apply(n,[].concat(t)),r},r}(h,null),function(n,o){function u(){}var s,c,l,$,h,f,p,_,v,d=u=a(n,o,"Lazy",u),m=u._proto,g=u._scope;return m.enumerator=r,function(t,n){function e(){}return e=a(t,n,"StopLazyError",e),e._proto,e._scope,r}(d,g.Exception),m.$initialize=s=function(n,a){var o,u=this,c=s._p,l=c||r;return null==a&&(a=r),s._p=null,l===r&&u.$raise(g.ArgumentError,"tried to call lazy new without a block"),u.enumerator=n,t.find_super_dispatcher(u,"initialize",s,(o=function(a,u){var s,c,$,h=o._s||this;null==a&&(a=r),u=i.call(arguments,1);try{return(s=(c=n).$each,s._p=($=function(n){return $._s||this,n=i.call(arguments,0),n.unshift(a),t.$yieldX(l,n)===e?e:void 0},$._s=h,$),s).apply(c,[].concat(u))}catch(f){if(g.Exception["$==="](f))return r;throw f}},o._s=u,o)).apply(u,[a])},t.defn(d,"$force",m.$to_a),m.$lazy=function(){var t=this;return t},m.$collect=c=function(){var n,a,o,u=this,s=c._p,l=s||r;return c._p=null,((n=l)===!1||n===r)&&u.$raise(g.ArgumentError,"tried to call lazy map without a block"),(n=(a=g.Lazy).$new,n._p=(o=function(n,a){o._s||this,null==n&&(n=r),a=i.call(arguments,1);var u=t.$yieldX(l,a);return u===e?e:(n.$yield(u),void 0)},o._s=u,o),n).call(a,u,u.$enumerator_size())},m.$collect_concat=l=function(){var n,a,o,u=this,s=l._p,c=s||r;return l._p=null,((n=c)===!1||n===r)&&u.$raise(g.ArgumentError,"tried to call lazy map without a block"),(n=(a=g.Lazy).$new,n._p=(o=function(n,a){var u,s,l,$,h,f=o._s||this;null==n&&(n=r),a=i.call(arguments,1);var p=t.$yieldX(c,a);if(p===e)return e;if(p["$respond_to?"]("force")&&p["$respond_to?"]("each"))(u=(s=p).$each,u._p=(l=function(t){return l._s||this,null==t&&(t=r),n.$yield(t)},l._s=f,l),u).call(s);else{var _=g.Opal.$try_convert(p,g.Array,"to_ary");_===r?n.$yield(p):(u=($=p).$each,u._p=(h=function(t){return h._s||this,null==t&&(t=r),n.$yield(t)},h._s=f,h),u).call($)}},o._s=u,o),n).call(a,u,r)},m.$drop=function(t){var n,e,a,o=this,u=r,s=r,c=r;return t=g.Opal.$coerce_to(t,g.Integer,"to_int"),t["$<"](0)&&o.$raise(g.ArgumentError,"attempt to drop negative size"),u=o.$enumerator_size(),s=function(){return(n=g.Integer["$==="](u))!==!1&&n!==r?t["$<"](u)?t:u:u}(),c=0,(n=(e=g.Lazy).$new,n._p=(a=function(n,e){var o;return a._s||this,null==n&&(n=r),e=i.call(arguments,1),c["$<"](t)?c=c["$+"](1):(o=n).$yield.apply(o,[].concat(e))},a._s=o,a),n).call(e,o,s)},m.$drop_while=$=function(){var n,a,o,u=this,s=$._p,c=s||r,l=r;return $._p=null,((n=c)===!1||n===r)&&u.$raise(g.ArgumentError,"tried to call lazy drop_while without a block"),l=!0,(n=(a=g.Lazy).$new,n._p=(o=function(n,a){var u,s;if(o._s||this,null==n&&(n=r),a=i.call(arguments,1),l===!1||l===r)return(s=n).$yield.apply(s,[].concat(a));var $=t.$yieldX(c,a);return $===e?e:(((u=$)===!1||u===r)&&(l=!1,(u=n).$yield.apply(u,[].concat(a))),void 0)},o._s=u,o),n).call(a,u,r)},m.$enum_for=h=function(t,n){var e,a,o=this,u=h._p,s=u||r;return n=i.call(arguments,1),null==t&&(t="each"),h._p=null,(e=(a=o.$class()).$for,e._p=s.$to_proc(),e).apply(a,[o,t].concat(n))},m.$find_all=f=function(){var n,a,o,u=this,s=f._p,c=s||r;return f._p=null,((n=c)===!1||n===r)&&u.$raise(g.ArgumentError,"tried to call lazy select without a block"),(n=(a=g.Lazy).$new,n._p=(o=function(n,a){var u;o._s||this,null==n&&(n=r),a=i.call(arguments,1);var s=t.$yieldX(c,a);return s===e?e:((u=s)!==!1&&u!==r&&(u=n).$yield.apply(u,[].concat(a)),void 0)},o._s=u,o),n).call(a,u,r)},t.defn(d,"$flat_map",m.$collect_concat),m.$grep=p=function(n){var a,o,u,s,c,l=this,$=p._p,h=$||r;return p._p=null,h!==!1&&h!==r?(a=(o=g.Lazy).$new,a._p=(u=function(a,o){var s;u._s||this,null==a&&(a=r),o=i.call(arguments,1);var c=g.Opal.$destructure(o),l=n["$==="](c);if((s=l)!==!1&&s!==r){if(l=t.$yield1(h,c),l===e)return e;a.$yield(t.$yield1(h,c))}},u._s=l,u),a).call(o,l,r):(a=(s=g.Lazy).$new,a._p=(c=function(t,e){var a;c._s||this,null==t&&(t=r),e=i.call(arguments,1);var o=g.Opal.$destructure(e),u=n["$==="](o);(a=u)!==!1&&a!==r&&t.$yield(o)},c._s=l,c),a).call(s,l,r)},t.defn(d,"$map",m.$collect),t.defn(d,"$select",m.$find_all),m.$reject=_=function(){var n,a,o,u=this,s=_._p,c=s||r;return _._p=null,((n=c)===!1||n===r)&&u.$raise(g.ArgumentError,"tried to call lazy reject without a block"),(n=(a=g.Lazy).$new,n._p=(o=function(n,a){var u;o._s||this,null==n&&(n=r),a=i.call(arguments,1);var s=t.$yieldX(c,a);return s===e?e:(((u=s)===!1||u===r)&&(u=n).$yield.apply(u,[].concat(a)),void 0)},o._s=u,o),n).call(a,u,r)},m.$take=function(t){var n,e,a,o=this,u=r,s=r,c=r;return t=g.Opal.$coerce_to(t,g.Integer,"to_int"),t["$<"](0)&&o.$raise(g.ArgumentError,"attempt to take negative size"),u=o.$enumerator_size(),s=function(){return(n=g.Integer["$==="](u))!==!1&&n!==r?t["$<"](u)?t:u:u}(),c=0,(n=(e=g.Lazy).$new,n._p=(a=function(n,e){var o,u=a._s||this;return null==n&&(n=r),e=i.call(arguments,1),c["$<"](t)?((o=n).$yield.apply(o,[].concat(e)),c=c["$+"](1)):u.$raise(g.StopLazyError)},a._s=o,a),n).call(e,o,s)},m.$take_while=v=function(){var n,a,o,u=this,s=v._p,c=s||r;return v._p=null,((n=c)===!1||n===r)&&u.$raise(g.ArgumentError,"tried to call lazy take_while without a block"),(n=(a=g.Lazy).$new,n._p=(o=function(n,a){var u,s=o._s||this;null==n&&(n=r),a=i.call(arguments,1);var l=t.$yieldX(c,a);return l===e?e:((u=l)!==!1&&u!==r?(u=n).$yield.apply(u,[].concat(a)):s.$raise(g.StopLazyError),void 0)},o._s=u,o),n).call(a,u,r)},t.defn(d,"$to_enum",m.$enum_for),m.$inspect=function(){var t=this;return"#<"+t.$class().$name()+": "+t.enumerator.$inspect()+">"},r}(h,h)}(n,null)}(Opal),function(t){var n=t.top,r=t,e=t.nil,i=t.breaker,a=t.slice,o=t.klass,u=t.range;return t.add_stubs(["$include","$new","$class","$raise","$===","$to_a","$respond_to?","$to_ary","$coerce_to","$==","$to_str","$clone","$hash","$<=>","$fits_fixnum!","$inspect","$empty?","$enum_for","$nil?","$coerce_to!","$initialize_clone","$initialize_dup","$replace","$eql?","$length","$begin","$end","$exclude_end?","$fits_array!","$flatten","$object_id","$[]","$to_s","$delete_if","$to_proc","$each","$reverse","$map","$rand","$keep_if","$shuffle!","$>","$<","$sort","$times","$[]=","$<<","$at","$allocate","$initialize","$__send__","$*","$slice","$uniq"]),function(n,r){function s(){}var c,l,$,h,f,p,_,v,d,m,g,y,b,M,w,D,E,x,k,O,C,I=s=o(n,r,"Array",s),S=s._proto,A=s._scope;return S.length=e,I.$include(A.Enumerable),S._isArray=!0,t.defs(I,"$inherited",function(t){var n=e;n=A.Class.$new(A.Array._scope.Wrapper),t._proto=n._proto,t._proto._klass=t,t._alloc=n._alloc,t.__parent=A.Array._scope.Wrapper,t.$allocate=n.$allocate,t.$new=n.$new,t["$[]"]=n["$[]"]}),t.defs(I,"$[]",function(t){return t=a.call(arguments,0)}),S.$initialize=function(t){var n,r=this;return t=a.call(arguments,0),(n=r.$class()).$new.apply(n,[].concat(t))},t.defs(I,"$new",c=function(t,n){var r,a=this,o=c._p,u=o||e;if(null==t&&(t=e),null==n&&(n=e),c._p=null,(r=arguments.length>2)!=!1&&r!==e&&a.$raise(A.ArgumentError,"wrong number of arguments ("+arguments.length+" for 0..2)"),(r=0===arguments.length)!=!1&&r!==e)return[];if((r=1===arguments.length)!=!1&&r!==e){if((r=A.Array["$==="](t))!==!1&&r!==e)return t.$to_a();if((r=t["$respond_to?"]("to_ary"))!==!1&&r!==e)return t.$to_ary()}t=A.Opal.$coerce_to(t,A.Integer,"to_int"),(r=0>t)!=!1&&r!==e&&a.$raise(A.ArgumentError,"negative array size");var s=[];if(u===e)for(var l=0;t>l;l++)s.push(n);else for(var $,l=0;t>l;l++){if($=u(l),$===i)return i.$v;s[l]=$}return s}),t.defs(I,"$try_convert",function(t){var n;return(n=A.Array["$==="](t))!==!1&&n!==e?t:(n=t["$respond_to?"]("to_ary"))!==!1&&n!==e?t.$to_ary():e}),S["$&"]=function(t){var n,r=this;t=(n=A.Array["$==="](t))!==!1&&n!==e?t.$to_a():A.Opal.$coerce_to(t,A.Array,"to_ary").$to_a();for(var i=[],a={},o=0,u=r.length;u>o;o++){var s=r[o];if(!a[s])for(var c=0,l=t.length;l>c;c++){var $=t[c];!a[$]&&s["$=="]($)&&(a[s]=!0,i.push(s))}}return i},S["$*"]=function(t){var n,r=this;if((n=t["$respond_to?"]("to_str"))!==!1&&n!==e)return r.join(t.$to_str());((n=t["$respond_to?"]("to_int"))===!1||n===e)&&r.$raise(A.TypeError,"no implicit conversion of "+t.$class()+" into Integer"),t=A.Opal.$coerce_to(t,A.Integer,"to_int"),(n=0>t)!=!1&&n!==e&&r.$raise(A.ArgumentError,"negative argument");for(var i=[],a=0;t>a;a++)i=i.concat(r);return i},S["$+"]=function(t){var n,r=this;return t=(n=A.Array["$==="](t))!==!1&&n!==e?t.$to_a():A.Opal.$coerce_to(t,A.Array,"to_ary").$to_a(),r.concat(t)},S["$-"]=function(t){var n,r=this;if(t=(n=A.Array["$==="](t))!==!1&&n!==e?t.$to_a():A.Opal.$coerce_to(t,A.Array,"to_ary").$to_a(),(n=0===r.length)!=!1&&n!==e)return[];if((n=0===t.length)!=!1&&n!==e)return r.$clone();for(var i={},a=[],o=0,u=t.length;u>o;o++)i[t[o]]=!0;for(var o=0,u=r.length;u>o;o++){var s=r[o];i[s]||a.push(s)}return a},S["$<<"]=function(t){var n=this;return n.push(t),n},S["$<=>"]=function(t){var n,r=this;if((n=A.Array["$==="](t))!==!1&&n!==e)t=t.$to_a();else{if((n=t["$respond_to?"]("to_ary"))===!1||n===e)return e;t=t.$to_ary().$to_a()}if(r.$hash()===t.$hash())return 0;if(r.length!=t.length)return r.length>t.length?1:-1;for(var i=0,a=r.length;a>i;i++){var o=r[i]["$<=>"](t[i]);if(0!==o)return o}return 0},S["$=="]=function(t){var n,r=this;if((n=r===t)!=!1&&n!==e)return!0;if((n=A.Array["$==="](t))===!1||n===e)return(n=t["$respond_to?"]("to_ary"))===!1||n===e?!1:t["$=="](r);if(t=t.$to_a(),(n=r.length===t.length)==!1||n===e)return!1;for(var i=0,a=r.length;a>i;i++){var o=r[i],u=t[i];if(!(o._isArray&&u._isArray&&o===r||o["$=="](u)))return!1}return!0},S["$[]"]=function(t,n){var r,i=this;if((r=A.Range["$==="](t))!==!1&&r!==e){var a=i.length,o=t.exclude,u=A.Opal.$coerce_to(t.begin,A.Integer,"to_int"),s=A.Opal.$coerce_to(t.end,A.Integer,"to_int");return 0>u&&(u+=a,0>u)?e:(A.Opal["$fits_fixnum!"](u),u>a?e:0>s&&(s+=a,0>s)?[]:(A.Opal["$fits_fixnum!"](s),o||(s+=1),i.slice(u,s)))}t=A.Opal.$coerce_to(t,A.Integer,"to_int");var a=i.length;return 0>t&&(t+=a,0>t)?e:(A.Opal["$fits_fixnum!"](t),void 0===n?t>=a||0>t?e:i[t]:(n=A.Opal.$coerce_to(n,A.Integer,"to_int"),A.Opal["$fits_fixnum!"](n),0>n||t>a||0>t?e:i.slice(t,t+n)))},S["$[]="]=function(t,n,r){var i,a=this,o=e,u=e;if((i=A.Range["$==="](t))!==!1&&i!==e){o=(i=A.Array["$==="](n))!==!1&&i!==e?n.$to_a():(i=n["$respond_to?"]("to_ary"))!==!1&&i!==e?n.$to_ary().$to_a():[n];var s=a.length,c=t.exclude,l=A.Opal.$coerce_to(t.begin,A.Integer,"to_int"),$=A.Opal.$coerce_to(t.end,A.Integer,"to_int");if(0>l&&(l+=s,0>l&&a.$raise(A.RangeError,""+t.$inspect()+" out of range")),A.Opal["$fits_fixnum!"](l),0>$&&($+=s),A.Opal["$fits_fixnum!"]($),c||($+=1),l>s)for(var h=s;t>h;h++)a[h]=e;return 0>$?a.splice.apply(a,[l,0].concat(o)):a.splice.apply(a,[l,$-l].concat(o)),n}(i=void 0===r)!=!1&&i!==e?u=1:(u=n,n=r,o=(i=A.Array["$==="](n))!==!1&&i!==e?n.$to_a():(i=n["$respond_to?"]("to_ary"))!==!1&&i!==e?n.$to_ary().$to_a():[n]);var f,s=a.length,t=A.Opal.$coerce_to(t,A.Integer,"to_int"),u=A.Opal.$coerce_to(u,A.Integer,"to_int");if(0>t&&(f=t,t+=s,0>t&&a.$raise(A.IndexError,"index "+f+" too small for array; minimum "+-a.length)),A.Opal["$fits_fixnum!"](t),0>u&&a.$raise(A.IndexError,"negative length ("+u+")"),A.Opal["$fits_fixnum!"](u),t>s)for(var h=s;t>h;h++)a[h]=e;return void 0===r?a[t]=n:a.splice.apply(a,[t,u].concat(o)),n},S.$assoc=function(t){for(var n,r=this,i=0,a=r.length;a>i;i++)if(n=r[i],n.length&&n[0]["$=="](t))return n;return e},S.$at=function(t){var n=this;return t=A.Opal.$coerce_to(t,A.Integer,"to_int"),0>t&&(t+=n.length),0>t||t>=n.length?e:n[t]},S.$cycle=l=function(n){var r,a,o=this,u=l._p,s=u||e;if(null==n&&(n=e),l._p=null,(r=(a=o["$empty?"]())!==!1&&a!==e?a:n["$=="](0))!==!1&&r!==e)return e;if((r=s)===!1||r===e)return o.$enum_for("cycle",n);if((r=n["$nil?"]())!==!1&&r!==e)for(;;)for(var c=0,$=o.length;$>c;c++){var h=t.$yield1(s,o[c]);if(h===i)return i.$v}else{if(n=A.Opal["$coerce_to!"](n,A.Integer,"to_int"),0>=n)return o;for(;n>0;){for(var c=0,$=o.length;$>c;c++){var h=t.$yield1(s,o[c]);if(h===i)return i.$v}n--}}return o},S.$clear=function(){var t=this;return t.splice(0,t.length),t},S.$clone=function(){var t=this,n=e;return n=[],n.$initialize_clone(t),n},S.$dup=function(){var t=this,n=e;return n=[],n.$initialize_dup(t),n},S.$initialize_copy=function(t){var n=this;return n.$replace(t)},S.$collect=$=function(){var t=this,n=$._p,r=n||e;if($._p=null,r===e)return t.$enum_for("collect");for(var a=[],o=0,u=t.length;u>o;o++){var s=Opal.$yield1(r,t[o]);if(s===i)return i.$v;a.push(s)}return a},S["$collect!"]=h=function(){var t=this,n=h._p,r=n||e;if(h._p=null,r===e)return t.$enum_for("collect!");for(var a=0,o=t.length;o>a;a++){var u=Opal.$yield1(r,t[a]);if(u===i)return i.$v;t[a]=u}return t},S.$compact=function(){for(var t,n=this,r=[],i=0,a=n.length;a>i;i++)(t=n[i])!==e&&r.push(t);return r},S["$compact!"]=function(){for(var t=this,n=t.length,r=0,i=t.length;i>r;r++)t[r]===e&&(t.splice(r,1),i--,r--);return t.length===n?e:t},S.$concat=function(t){var n,r=this;t=(n=A.Array["$==="](t))!==!1&&n!==e?t.$to_a():A.Opal.$coerce_to(t,A.Array,"to_ary").$to_a();for(var i=0,a=t.length;a>i;i++)r.push(t[i]);return r},S.$delete=function(t){for(var n=this,r=n.length,i=0,a=r;a>i;i++)n[i]["$=="](t)&&(n.splice(i,1),a--,i--);return n.length===r?e:t},S.$delete_at=function(t){var n=this;if(0>t&&(t+=n.length),0>t||t>=n.length)return e;var r=n[t];return n.splice(t,1),r},S.$delete_if=f=function(){var t=this,n=f._p,r=n||e;if(f._p=null,r===e)return t.$enum_for("delete_if");for(var a,o=0,u=t.length;u>o;o++){if((a=r(t[o]))===i)return i.$v;a!==!1&&a!==e&&(t.splice(o,1),u--,o--)}return t},S.$drop=function(t){var n=this;return 0>t&&n.$raise(A.ArgumentError),n.slice(t)},t.defn(I,"$dup",S.$clone),S.$each=p=function(){var n=this,r=p._p,a=r||e;if(p._p=null,a===e)return n.$enum_for("each");for(var o=0,u=n.length;u>o;o++){var s=t.$yield1(a,n[o]);if(s==i)return i.$v}return n},S.$each_index=_=function(){var n=this,r=_._p,a=r||e;if(_._p=null,a===e)return n.$enum_for("each_index");for(var o=0,u=n.length;u>o;o++){var s=t.$yield1(a,o);if(s===i)return i.$v}return n},S["$empty?"]=function(){var t=this;return 0===t.length},S["$eql?"]=function(t){var n,r=this;if((n=r===t)!=!1&&n!==e)return!0;if((n=A.Array["$==="](t))===!1||n===e)return!1;if(t=t.$to_a(),(n=r.length===t.length)==!1||n===e)return!1;for(var i=0,a=r.length;a>i;i++){var o=r[i],u=t[i];if(!(o._isArray&&u._isArray&&o===r||o["$eql?"](u)))return!1}return!0},S.$fetch=v=function(t,n){var r=this,i=v._p,a=i||e;v._p=null;var o=t;return 0>t&&(t+=r.length),t>=0&&r.length>t?r[t]:a!==e?a(o):null!=n?n:(0===r.length?r.$raise(A.IndexError,"index "+o+" outside of array bounds: 0...0"):r.$raise(A.IndexError,"index "+o+" outside of array bounds: -"+r.length+"..."+r.length),void 0)},S.$fill=d=function(n){var r,o=this,u=d._p,s=u||e,c=e,l=e,$=e,h=e,f=e;if(n=a.call(arguments,0),d._p=null,s!==!1&&s!==e?((r=n.length>2)!=!1&&r!==e&&o.$raise(A.ArgumentError,"wrong number of arguments ("+n.$length()+" for 0..2)"),r=t.to_ary(n),c=null==r[0]?e:r[0],l=null==r[1]?e:r[1]):((r=0==n.length)!=!1&&r!==e?o.$raise(A.ArgumentError,"wrong number of arguments (0 for 1..3)"):(r=n.length>3)!=!1&&r!==e&&o.$raise(A.ArgumentError,"wrong number of arguments ("+n.$length()+" for 1..3)"),r=t.to_ary(n),$=null==r[0]?e:r[0],c=null==r[1]?e:r[1],l=null==r[2]?e:r[2]),(r=A.Range["$==="](c))!==!1&&r!==e){if(l!==!1&&l!==e&&o.$raise(A.TypeError,"length invalid with range"),h=A.Opal.$coerce_to(c.$begin(),A.Integer,"to_int"),(r=0>h)!=!1&&r!==e&&(h+=o.length),(r=0>h)!=!1&&r!==e&&o.$raise(A.RangeError,""+c.$inspect()+" out of range"),f=A.Opal.$coerce_to(c.$end(),A.Integer,"to_int"),(r=0>f)!=!1&&r!==e&&(f+=o.length),((r=c["$exclude_end?"]())===!1||r===e)&&(f+=1),(r=h>=f)!=!1&&r!==e)return o}else if(c!==!1&&c!==e)if(h=A.Opal.$coerce_to(c,A.Integer,"to_int"),(r=0>h)!=!1&&r!==e&&(h+=o.length),(r=0>h)!=!1&&r!==e&&(h=0),l!==!1&&l!==e){if(f=A.Opal.$coerce_to(l,A.Integer,"to_int"),(r=0==f)!=!1&&r!==e)return o;f+=h}else f=o.length;else h=0,f=o.length;if(A.Opal["$fits_fixnum!"](f),A.Opal["$fits_array!"](f),(r=h>o.length)!=!1&&r!==e)for(var p=o.length;f>p;p++)o[p]=e;if((r=f>o.length)!=!1&&r!==e&&(o.length=f),s!==!1&&s!==e)for(o.length;f>h;h++){var _=s(h);if(_===i)return i.$v;o[h]=_}else for(o.length;f>h;h++)o[h]=$;
return o},S.$first=function(t){var n=this;return null!=t?(0>t&&n.$raise(A.ArgumentError),n.slice(0,t)):0===n.length?e:n[0]},S.$flatten=function(t){for(var n=this,r=[],e=0,i=n.length;i>e;e++){var a=n[e];a["$respond_to?"]("to_ary")?(a=a.$to_ary(),null==t?r.push.apply(r,a.$flatten().$to_a()):0==t?r.push(a):r.push.apply(r,a.$flatten(t-1).$to_a())):r.push(a)}return r},S["$flatten!"]=function(t){var n=this,r=n.$flatten(t);if(n.length==r.length){for(var i=0,a=n.length;a>i&&n[i]===r[i];i++);if(i==a)return e}return n.$replace(r),n},S.$hash=function(){var t=this;return t._id||(t._id=Opal.uid())},S["$include?"]=function(t){for(var n=this,r=0,e=n.length;e>r;r++)if(n[r]["$=="](t))return!0;return!1},S.$index=m=function(t){var n=this,r=m._p,a=r||e;if(m._p=null,null!=t){for(var o=0,u=n.length;u>o;o++)if(n[o]["$=="](t))return o}else{if(a===e)return n.$enum_for("index");for(var s,o=0,u=n.length;u>o;o++){if((s=a(n[o]))===i)return i.$v;if(s!==!1&&s!==e)return o}}return e},S.$insert=function(t,n){var r=this;if(n=a.call(arguments,1),n.length>0){if(0>t&&(t+=r.length+1,0>t&&r.$raise(A.IndexError,""+t+" is out of bounds")),t>r.length)for(var i=r.length;t>i;i++)r.push(e);r.splice.apply(r,[t,0].concat(n))}return r},S.$inspect=function(){var t,n,r,e,i,a,o=this;for(n=[],a=o.$object_id(),i=o.length,t=0;i>t;t++)r=o["$[]"](t),e=r.$object_id()===a?"[...]":r.$inspect(),n.push(e);return"["+n.join(", ")+"]"},S.$join=function(t){var n=this;null==t&&(t="");for(var r=[],e=0,i=n.length;i>e;e++)r.push(n[e].$to_s());return r.join(t)},S.$keep_if=g=function(){var t=this,n=g._p,r=n||e;if(g._p=null,r===e)return t.$enum_for("keep_if");for(var a,o=0,u=t.length;u>o;o++){if((a=r(t[o]))===i)return i.$v;(a===!1||a===e)&&(t.splice(o,1),u--,o--)}return t},S.$last=function(t){var n=this,r=n.length;return(t===e||"string"==typeof t)&&n.$raise(A.TypeError,"no implicit conversion to integer"),"object"==typeof t&&(t["$respond_to?"]("to_int")?t=t.$to_int():n.$raise(A.TypeError,"no implicit conversion to integer")),null==t?0===r?e:n[r-1]:(0>t&&n.$raise(A.ArgumentError,"negative count given"),t>r&&(t=r),n.slice(r-t,r))},S.$length=function(){var t=this;return t.length},t.defn(I,"$map",S.$collect),t.defn(I,"$map!",S["$collect!"]),S.$pop=function(t){var n=this,r=n.length;return null==t?0===r?e:n.pop():(0>t&&n.$raise(A.ArgumentError,"negative count given"),t>r?n.splice(0,n.length):n.splice(r-t,r))},S.$push=function(t){var n=this;t=a.call(arguments,0);for(var r=0,e=t.length;e>r;r++)n.push(t[r]);return n},S.$rassoc=function(t){for(var n,r=this,i=0,a=r.length;a>i;i++)if(n=r[i],n.length&&void 0!==n[1]&&n[1]["$=="](t))return n;return e},S.$reject=y=function(){var t=this,n=y._p,r=n||e;if(y._p=null,r===e)return t.$enum_for("reject");for(var a,o=[],u=0,s=t.length;s>u;u++){if((a=r(t[u]))===i)return i.$v;(a===!1||a===e)&&o.push(t[u])}return o},S["$reject!"]=b=function(){var t,n,r=this,i=b._p,a=i||e;if(b._p=null,a===e)return r.$enum_for("reject!");var o=r.length;return(t=(n=r).$delete_if,t._p=a.$to_proc(),t).call(n),r.length===o?e:r},S.$replace=function(t){var n,r=this;return t=(n=A.Array["$==="](t))!==!1&&n!==e?t.$to_a():A.Opal.$coerce_to(t,A.Array,"to_ary").$to_a(),r.splice(0,r.length),r.push.apply(r,t),r},S.$reverse=function(){var t=this;return t.slice(0).reverse()},S["$reverse!"]=function(){var t=this;return t.reverse()},S.$reverse_each=M=function(){var t,n,r=this,i=M._p,a=i||e;return M._p=null,a===e?r.$enum_for("reverse_each"):((t=(n=r.$reverse()).$each,t._p=a.$to_proc(),t).call(n),r)},S.$rindex=w=function(t){var n=this,r=w._p,a=r||e;if(w._p=null,null!=t){for(var o=n.length-1;o>=0;o--)if(n[o]["$=="](t))return o}else if(a!==e)for(var u,o=n.length-1;o>=0;o--){if((u=a(n[o]))===i)return i.$v;if(u!==!1&&u!==e)return o}else if(null==t)return n.$enum_for("rindex");return e},S.$sample=function(t){var n,r,i,a,o=this;return null==t&&(t=e),i=t,r=i===e||i===!1,(n=r!==!1&&r!==e?o["$empty?"]():r)!==!1&&n!==e?e:(n=(r=t!==!1&&t!==e)?o["$empty?"]():r)!==!1&&n!==e?[]:t!==!1&&t!==e?(n=(r=u(1,t,!1)).$map,n._p=(a=function(){var t=a._s||this;return t["$[]"](t.$rand(t.$length()))},a._s=o,a),n).call(r):o["$[]"](o.$rand(o.$length()))},S.$select=D=function(){var n=this,r=D._p,a=r||e;if(D._p=null,a===e)return n.$enum_for("select");for(var o,u,s=[],c=0,l=n.length;l>c;c++){if(o=n[c],(u=t.$yield1(a,o))===i)return i.$v;u!==!1&&u!==e&&s.push(o)}return s},S["$select!"]=E=function(){var t,n,r=this,i=E._p,a=i||e;if(E._p=null,a===e)return r.$enum_for("select!");var o=r.length;return(t=(n=r).$keep_if,t._p=a.$to_proc(),t).call(n),r.length===o?e:r},S.$shift=function(t){var n=this;return 0===n.length?e:null==t?n.shift():n.splice(0,t)},t.defn(I,"$size",S.$length),S.$shuffle=function(){var t=this;return t.$clone()["$shuffle!"]()},S["$shuffle!"]=function(){for(var t=this,n=t.length-1;n>0;n--){var r=t[n],e=Math.floor(Math.random()*(n+1));t[n]=t[e],t[e]=r}return t},t.defn(I,"$slice",S["$[]"]),S["$slice!"]=function(t,n){var r=this;return 0>t&&(t+=r.length),null!=n?r.splice(t,n):0>t||t>=r.length?e:r.splice(t,1)[0]},S.$sort=x=function(){var t,n=this,r=x._p,a=r||e;if(x._p=null,(t=n.length>1)==!1||t===e)return n;a===e&&(a=function(t,n){return t["$<=>"](n)});try{return n.slice().sort(function(t,r){var o=a(t,r);if(o===i)throw i;return o===e&&n.$raise(A.ArgumentError,"comparison of "+t.$inspect()+" with "+r.$inspect()+" failed"),o["$>"](0)?1:o["$<"](0)?-1:0})}catch(o){if(o===i)return i.$v;throw o}},S["$sort!"]=k=function(){var t,n,r=this,i=k._p,a=i||e;k._p=null;var o;o=a!==e?(t=(n=r.slice()).$sort,t._p=a.$to_proc(),t).call(n):r.slice().$sort(),r.length=0;for(var u=0,s=o.length;s>u;u++)r.push(o[u]);return r},S.$take=function(t){var n=this;return 0>t&&n.$raise(A.ArgumentError),n.slice(0,t)},S.$take_while=O=function(){var t=this,n=O._p,r=n||e;O._p=null;for(var a,o,u=[],s=0,c=t.length;c>s;s++){if(a=t[s],(o=r(a))===i)return i.$v;if(o===!1||o===e)return u;u.push(a)}return u},S.$to_a=function(){var t=this;return t},t.defn(I,"$to_ary",S.$to_a),t.defn(I,"$to_s",S.$inspect),S.$transpose=function(){var t,n,r,i=this,a=e,o=e;return(t=i["$empty?"]())!==!1&&t!==e?[]:(a=[],o=e,(t=(n=i).$each,t._p=(r=function(t){var n,i,u,s=r._s||this;return null==t&&(t=e),t=(n=A.Array["$==="](t))!==!1&&n!==e?t.$to_a():A.Opal.$coerce_to(t,A.Array,"to_ary").$to_a(),(n=o)!==!1&&n!==e?n:o=t.length,i=t.length["$=="](o),(n=i===e||i===!1)!=!1&&n!==e&&s.$raise(A.IndexError,"element size differs ("+t.length+" should be "+o),(n=(i=t.length).$times,n._p=(u=function(n){var r,i,o,s=(u._s||this,e);return null==n&&(n=e),r=n,i=a,s=(o=i["$[]"](r))!==!1&&o!==e?o:i["$[]="](r,[]),s["$<<"](t.$at(n))},u._s=s,u),n).call(i)},r._s=i,r),t).call(n),a)},S.$uniq=function(){for(var t,n,r=this,e=[],i={},a=0,o=r.length;o>a;a++)t=r[a],n=t,i[n]||(i[n]=!0,e.push(t));return e},S["$uniq!"]=function(){for(var t,n,r=this,i=r.length,a={},o=0,u=i;u>o;o++)t=r[o],n=t,a[n]?(r.splice(o,1),u--,o--):a[n]=!0;return r.length===i?e:r},S.$unshift=function(t){var n=this;t=a.call(arguments,0);for(var r=t.length-1;r>=0;r--)n.unshift(t[r]);return n},S.$zip=C=function(t){var n=this,r=C._p,i=r||e;t=a.call(arguments,0),C._p=null;for(var o,u,s=[],c=n.length,l=0;c>l;l++){o=[n[l]];for(var $=0,h=t.length;h>$;$++)u=t[$][l],null==u&&(u=e),o[$+1]=u;s[l]=o}if(i!==e){for(var l=0;c>l;l++)i(s[l]);return e}return s},e}(n,null),function(n,r){function i(){}var u,s,c,l,$,h=i=o(n,r,"Wrapper",i),f=i._proto,p=i._scope;return f.literal=e,t.defs(h,"$allocate",u=function(n){var r=this,a=(u._p,e);return null==n&&(n=[]),u._p=null,a=t.find_super_dispatcher(r,"allocate",u,null,i).apply(r,[]),a.literal=n,a}),t.defs(h,"$new",s=function(t){var n,r,i=this,o=s._p,u=o||e,c=e;return t=a.call(arguments,0),s._p=null,c=i.$allocate(),(n=(r=c).$initialize,n._p=u.$to_proc(),n).apply(r,[].concat(t)),c}),t.defs(h,"$[]",function(t){var n=this;return t=a.call(arguments,0),n.$allocate(t)}),f.$initialize=c=function(t){var n,r,i=this,o=c._p,u=o||e;return t=a.call(arguments,0),c._p=null,i.literal=(n=(r=p.Array).$new,n._p=u.$to_proc(),n).apply(r,[].concat(t))},f.$method_missing=l=function(t){var n,r,i=this,o=l._p,u=o||e,s=e;return t=a.call(arguments,0),l._p=null,s=(n=(r=i.literal).$__send__,n._p=u.$to_proc(),n).apply(r,[].concat(t)),(n=s===i.literal)!=!1&&n!==e?i:s},f.$initialize_copy=function(t){var n=this;return n.literal=t.literal.$clone()},f["$respond_to?"]=$=function(n){var r,i=a.call(arguments,0),o=this,u=$._p;return $._p=null,(r=t.find_super_dispatcher(o,"respond_to?",$,u).apply(o,i))!==!1&&r!==e?r:o.literal["$respond_to?"](n)},f["$=="]=function(t){var n=this;return n.literal["$=="](t)},f["$eql?"]=function(t){var n=this;return n.literal["$eql?"](t)},f.$to_a=function(){var t=this;return t.literal},f.$to_ary=function(){var t=this;return t},f.$inspect=function(){var t=this;return t.literal.$inspect()},f["$*"]=function(t){var n=this,r=n.literal["$*"](t);return r._isArray?n.$class().$allocate(r):r},f["$[]"]=function(t,n){var r=this,e=r.literal.$slice(t,n);return e._isArray&&(t._isRange||void 0!==n)?r.$class().$allocate(e):e},t.defn(h,"$slice",f["$[]"]),f.$uniq=function(){var t=this;return t.$class().$allocate(t.literal.$uniq())},f.$flatten=function(t){var n=this;return n.$class().$allocate(n.literal.$flatten(t))},e}(r.Array,null)}(Opal),function(t){var n=t.top,r=t.nil,e=t.breaker,i=t.slice,a=t.klass;return t.add_stubs(["$include","$==","$call","$enum_for","$raise","$flatten","$inspect","$alias_method","$clone"]),function(n,o){function u(){}var s,c,l,$,h,f,p,_,v,d,m,g,y=u=a(n,o,"Hash",u),b=u._proto,M=u._scope;b.proc=b.none=r,y.$include(M.Enumerable);var w={}.hasOwnProperty;return t.defs(y,"$[]",function(n){return n=i.call(arguments,0),t.hash.apply(null,n)}),t.defs(y,"$allocate",function(){var t=this,n=new t._alloc;return n.map={},n.keys=[],n}),b.$initialize=s=function(t){var n=this,e=s._p,i=e||r;return s._p=null,null!=t?n.none=t:i!==r&&(n.proc=i),n},b["$=="]=function(t){var n,e=this;if(e===t)return!0;if(!t.map||!t.keys)return!1;if(e.keys.length!==t.keys.length)return!1;for(var i=e.map,a=t.map,o=0,u=e.keys.length;u>o;o++){var s=e.keys[o],c=i[s],l=a[s];if(n=c["$=="](l),n===r||n===!1)return!1}return!0},b["$[]"]=function(t){var n=this,e=n.map;if(w.call(e,t))return e[t];var i=n.proc;return i!==r?i.$call(n,t):n.none},b["$[]="]=function(t,n){var r=this,e=r.map;return w.call(e,t)||r.keys.push(t),e[t]=n,n},b.$assoc=function(t){for(var n,e=this,i=e.keys,a=0,o=i.length;o>a;a++)if(n=i[a],n["$=="](t))return[n,e.map[n]];return r},b.$clear=function(){var t=this;return t.map={},t.keys=[],t},b.$clone=function(){for(var t=this,n={},r=[],e=0,i=t.keys.length;i>e;e++){var a=t.keys[e],o=t.map[a];r.push(a),n[a]=o}var u=new t._klass._alloc;return u.map=n,u.keys=r,u.none=t.none,u.proc=t.proc,u},b.$default=function(){var t=this;return t.none},b["$default="]=function(t){var n=this;return n.none=t},b.$default_proc=function(){var t=this;return t.proc},b["$default_proc="]=function(t){var n=this;return n.proc=t},b.$delete=function(t){var n=this,e=n.map,i=e[t];return null!=i?(delete e[t],n.keys.$delete(t),i):r},b.$delete_if=c=function(){var t,n=this,i=c._p,a=i||r;if(c._p=null,(t=a)===!1||t===r)return n.$enum_for("delete_if");for(var o,u=n.map,s=n.keys,l=0,$=s.length;$>l;l++){var h=s[l],f=u[h];if((o=a(h,f))===e)return e.$v;o!==!1&&o!==r&&(s.splice(l,1),delete u[h],$--,l--)}return n},t.defn(y,"$dup",b.$clone),b.$each=l=function(){var n,i=this,a=l._p,o=a||r;if(l._p=null,(n=o)===!1||n===r)return i.$enum_for("each");for(var u=i.map,s=i.keys,c=0,$=s.length;$>c;c++){var h=s[c],f=t.$yield1(o,[h,u[h]]);if(f===e)return e.$v}return i},b.$each_key=$=function(){var t,n=this,i=$._p,a=i||r;if($._p=null,(t=a)===!1||t===r)return n.$enum_for("each_key");for(var o=n.keys,u=0,s=o.length;s>u;u++){var c=o[u];if(a(c)===e)return e.$v}return n},t.defn(y,"$each_pair",b.$each),b.$each_value=h=function(){var t,n=this,i=h._p,a=i||r;if(h._p=null,(t=a)===!1||t===r)return n.$enum_for("each_value");for(var o=n.map,u=n.keys,s=0,c=u.length;c>s;s++)if(a(o[u[s]])===e)return e.$v;return n},b["$empty?"]=function(){var t=this;return 0===t.keys.length},t.defn(y,"$eql?",b["$=="]),b.$fetch=f=function(t,n){var i=this,a=f._p,o=a||r;f._p=null;var u=i.map[t];if(null!=u)return u;if(o!==r){var u;return(u=o(t))===e?e.$v:u}return null!=n?n:(i.$raise(M.KeyError,"key not found"),void 0)},b.$flatten=function(t){for(var n=this,r=n.map,e=n.keys,i=[],a=0,o=e.length;o>a;a++){var u=e[a],s=r[u];i.push(u),s._isArray?null==t||1===t?i.push(s):i=i.concat(s.$flatten(t-1)):i.push(s)}return i},b["$has_key?"]=function(t){var n=this;return w.call(n.map,t)},b["$has_value?"]=function(t){var n=this;for(var r in n.map)if(n.map[r]["$=="](t))return!0;return!1},b.$hash=function(){var t=this;return t._id},t.defn(y,"$include?",b["$has_key?"]),b.$index=function(t){for(var n=this,e=n.map,i=n.keys,a=0,o=i.length;o>a;a++){var u=i[a];if(e[u]["$=="](t))return u}return r},b.$indexes=function(t){var n=this;t=i.call(arguments,0);for(var r,e=[],a=n.map,o=0,u=t.length;u>o;o++){var s=t[o],r=a[s];null!=r?e.push(r):e.push(n.none)}return e},t.defn(y,"$indices",b.$indexes),b.$inspect=function(){for(var t=this,n=[],r=t.keys,e=t.map,i=0,a=r.length;a>i;i++){var o=r[i],u=e[o];u===t?n.push(o.$inspect()+"=>"+"{...}"):n.push(o.$inspect()+"=>"+e[o].$inspect())}return"{"+n.join(", ")+"}"},b.$invert=function(){for(var n=this,r=t.hash(),e=n.keys,i=n.map,a=r.keys,o=r.map,u=0,s=e.length;s>u;u++){var c=e[u],l=i[c];a.push(l),o[l]=c}return r},b.$keep_if=p=function(){var t,n=this,i=p._p,a=i||r;if(p._p=null,(t=a)===!1||t===r)return n.$enum_for("keep_if");for(var o,u=n.map,s=n.keys,c=0,l=s.length;l>c;c++){var $=s[c],h=u[$];if((o=a($,h))===e)return e.$v;(o===!1||o===r)&&(s.splice(c,1),delete u[$],l--,c--)}return n},t.defn(y,"$key",b.$index),t.defn(y,"$key?",b["$has_key?"]),b.$keys=function(){var t=this;return t.keys.slice(0)},b.$length=function(){var t=this;return t.keys.length},t.defn(y,"$member?",b["$has_key?"]),b.$merge=_=function(n){var e=this,i=_._p,a=i||r;_._p=null;for(var o=e.keys,u=e.map,s=t.hash(),c=s.keys,l=s.map,$=0,h=o.length;h>$;$++){var f=o[$];c.push(f),l[f]=u[f]}var o=n.keys,u=n.map;if(a===r)for(var $=0,h=o.length;h>$;$++){var f=o[$];null==l[f]&&c.push(f),l[f]=u[f]}else for(var $=0,h=o.length;h>$;$++){var f=o[$];null==l[f]?(c.push(f),l[f]=u[f]):l[f]=a(f,l[f],u[f])}return s},b["$merge!"]=v=function(t){var n=this,e=v._p,i=e||r;v._p=null;var a=n.keys,o=n.map,u=t.keys,s=t.map;if(i===r)for(var c=0,l=u.length;l>c;c++){var $=u[c];null==o[$]&&a.push($),o[$]=s[$]}else for(var c=0,l=u.length;l>c;c++){var $=u[c];null==o[$]?(a.push($),o[$]=s[$]):o[$]=i($,o[$],s[$])}return n},b.$rassoc=function(t){for(var n=this,e=n.keys,i=n.map,a=0,o=e.length;o>a;a++){var u=e[a],s=i[u];if(s["$=="](t))return[u,s]}return r},b.$reject=d=function(){var n,i=this,a=d._p,o=a||r;if(d._p=null,(n=o)===!1||n===r)return i.$enum_for("reject");for(var u=i.keys,s=i.map,c=t.hash(),l=c.map,$=c.keys,h=0,f=u.length;f>h;h++){var p,_=u[h],v=s[_];if((p=o(_,v))===e)return e.$v;(p===!1||p===r)&&($.push(_),l[_]=v)}return c},b.$replace=function(t){for(var n=this,r=n.map={},e=n.keys=[],i=0,a=t.keys.length;a>i;i++){var o=t.keys[i];e.push(o),r[o]=t.map[o]}return n},b.$select=m=function(){var n,i=this,a=m._p,o=a||r;if(m._p=null,(n=o)===!1||n===r)return i.$enum_for("select");for(var u=i.keys,s=i.map,c=t.hash(),l=c.map,$=c.keys,h=0,f=u.length;f>h;h++){var p,_=u[h],v=s[_];if((p=o(_,v))===e)return e.$v;p!==!1&&p!==r&&($.push(_),l[_]=v)}return c},b["$select!"]=g=function(){var t,n=this,i=g._p,a=i||r;if(g._p=null,(t=a)===!1||t===r)return n.$enum_for("select!");for(var o,u=n.map,s=n.keys,c=r,l=0,$=s.length;$>l;l++){var h=s[l],f=u[h];if((o=a(h,f))===e)return e.$v;(o===!1||o===r)&&(s.splice(l,1),delete u[h],$--,l--,c=n)}return c},b.$shift=function(){var t=this,n=t.keys,e=t.map;if(n.length){var i=n[0],a=e[i];return delete e[i],n.splice(0,1),[i,a]}return r},t.defn(y,"$size",b.$length),y.$alias_method("store","[]="),b.$to_a=function(){for(var t=this,n=t.keys,r=t.map,e=[],i=0,a=n.length;a>i;i++){var o=n[i];e.push([o,r[o]])}return e},b.$to_h=function(){var t=this,n=new Opal.Hash._alloc,r=t.$clone();return n.map=r.map,n.keys=r.keys,n.none=r.none,n.proc=r.proc,n},b.$to_hash=function(){var t=this;return t},t.defn(y,"$to_s",b.$inspect),t.defn(y,"$update",b["$merge!"]),t.defn(y,"$value?",b["$has_value?"]),t.defn(y,"$values_at",b.$indexes),b.$values=function(){var t=this,n=t.map,r=[];for(var e in n)r.push(n[e]);return r},r}(n,null)}(Opal),function(t){var n=t.top,r=t,e=t.nil,i=t.breaker,a=t.slice,o=t.klass,u=t.gvars;return t.add_stubs(["$include","$to_str","$===","$format","$coerce_to","$to_s","$respond_to?","$<=>","$raise","$=~","$empty?","$ljust","$ceil","$/","$+","$rjust","$floor","$to_a","$each_char","$coerce_to!","$enum_for","$split","$chomp","$escape","$class","$to_i","$name","$each_line","$match","$to_proc","$new","$is_a?","$[]","$str","$value","$try_convert"]),function(n,r){function s(){}var c,l,$,h,f,p,_=s=o(n,r,"String",s),v=s._proto,d=s._scope;return v.length=e,_.$include(d.Comparable),v._isString=!0,t.defs(_,"$try_convert",function(t){try{return t.$to_str()}catch(n){return e}}),t.defs(_,"$new",function(t){return null==t&&(t=""),new String(t)}),v["$%"]=function(t){var n,r=this;return(n=d.Array["$==="](t))!==!1&&n!==e?(n=r).$format.apply(n,[r].concat(t)):r.$format(r,t)},v["$*"]=function(t){var n=this;if(1>t)return"";for(var r="",e=n;t>0;)1&t&&(r+=e),t>>=1,e+=e;return r},v["$+"]=function(t){var n=this;return t=d.Opal.$coerce_to(t,d.String,"to_str"),n+t.$to_s()},v["$<=>"]=function(t){var n,r=this;if((n=t["$respond_to?"]("to_str"))!==!1&&n!==e)return t=t.$to_str().$to_s(),r>t?1:t>r?-1:0;var i=t["$<=>"](r);return i===e?e:i>0?-1:0>i?1:0},v["$=="]=function(t){var n=this;return!(!t._isString||n.valueOf()!==t.valueOf())},t.defn(_,"$===",v["$=="]),v["$=~"]=function(t){var n=this;return t._isString&&n.$raise(d.TypeError,"type mismatch: String given"),t["$=~"](n)},v["$[]"]=function(t,n){var r=this,i=r.length;if(t._isRange){var a=t.exclude,n=t.end,t=t.begin;return 0>t&&(t+=i),0>n&&(n+=i),a||(n+=1),t>i?e:(n-=t,0>n&&(n=0),r.substr(t,n))}return 0>t&&(t+=r.length),null==n?t>=r.length||0>t?e:r.substr(t,1):t>r.length||0>t?e:r.substr(t,n)},v.$capitalize=function(){var t=this;return t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()},v.$casecmp=function(t){var n=this;return t=d.Opal.$coerce_to(t,d.String,"to_str").$to_s(),n.toLowerCase()["$<=>"](t.toLowerCase())},v.$center=function(t,n){var r,i=this;if(null==n&&(n=" "),t=d.Opal.$coerce_to(t,d.Integer,"to_int"),n=d.Opal.$coerce_to(n,d.String,"to_str").$to_s(),(r=n["$empty?"]())!==!1&&r!==e&&i.$raise(d.ArgumentError,"zero width padding"),(r=i.length>=t)!=!1&&r!==e)return i;var a=i.$ljust(t["$+"](i.length)["$/"](2).$ceil(),n),o=i.$rjust(t["$+"](i.length)["$/"](2).$floor(),n);return o+a.slice(i.length)},v.$chars=function(){var t=this;return t.$each_char().$to_a()},v.$chomp=function(t){var n,r=this;if(null==t&&(t=u["/"]),(n=t===e||0===r.length)!=!1&&n!==e)return r;if(t=d.Opal["$coerce_to!"](t,d.String,"to_str").$to_s(),"\n"===t)return r.replace(/\r?\n?$/,"");if(""===t)return r.replace(/(\r?\n)+$/,"");if(r.length>t.length){var i=r.substr(-1*t.length);if(i===t)return r.substr(0,r.length-t.length)}return r},v.$chop=function(){var t=this,n=t.length;return 1>=n?"":"\n"===t.charAt(n-1)&&"\r"===t.charAt(n-2)?t.substr(0,n-2):t.substr(0,n-1)},v.$chr=function(){var t=this;return t.charAt(0)},v.$clone=function(){var t=this;return t.slice()},v.$count=function(t){var n=this;return(n.length-n.replace(RegExp(t,"g"),"").length)/t.length},t.defn(_,"$dup",v.$clone),v.$downcase=function(){var t=this;return t.toLowerCase()},v.$each_char=c=function(){var n,r=this,a=c._p,o=a||e;if(c._p=null,o===e)return r.$enum_for("each_char");for(var u=0,s=r.length;s>u;u++)(n=t.$yield1(o,r.charAt(u)))===i?i.$v:n;return r},v.$each_line=l=function(n){var r,a=this,o=l._p,s=o||e;if(null==n&&(n=u["/"]),l._p=null,s===e)return a.$split(n);for(var c=a.$chomp(),$=a.length!=c.length,h=c.split(n),f=0,p=h.length;p>f;f++)p-1>f||$?(r=t.$yield1(s,h[f]+n))===i?i.$v:r:(r=t.$yield1(s,h[f]))===i?i.$v:r;return a},v["$empty?"]=function(){var t=this;return 0===t.length},v["$end_with?"]=function(t){var n=this;t=a.call(arguments,0);for(var r=0,e=t.length;e>r;r++){var i=d.Opal.$coerce_to(t[r],d.String,"to_str");if(n.length>=i.length&&n.substr(0-i.length)===i)return!0}return!1},t.defn(_,"$eql?",v["$=="]),t.defn(_,"$equal?",v["$==="]),v.$gsub=$=function(t,n){var r,i,a=this,o=$._p,u=o||e;$._p=null,(r=(i=d.String["$==="](t))!==!1&&i!==e?i:t["$respond_to?"]("to_str"))!==!1&&r!==e&&(t=RegExp(""+d.Regexp.$escape(t.$to_str()))),((r=d.Regexp["$==="](t))===!1||r===e)&&a.$raise(d.TypeError,"wrong argument type "+t.$class()+" (expected Regexp)");var t=""+t,s=t.substr(t.lastIndexOf("/")+1)+"g",c=t.substr(1,t.lastIndexOf("/")-1);return a.$sub._p=u,a.$sub(RegExp(c,s),n)},v.$hash=function(){var t=this;return""+t},v.$hex=function(){var t=this;return t.$to_i(16)},v["$include?"]=function(t){var n,r=this;return t._isString?-1!==r.indexOf(t):(((n=t["$respond_to?"]("to_str"))===!1||n===e)&&r.$raise(d.TypeError,"no implicit conversion of "+t.$class().$name()+" into String"),-1!==r.indexOf(t.$to_str()))},v.$index=function(t,n){var r,i,a=this,o=e;if(null==n&&(n=e),(r=d.String["$==="](t))!==!1&&r!==e?t=t.$to_s():(r=t["$respond_to?"]("to_str"))!==!1&&r!==e?t=t.$to_str().$to_s():(i=d.Regexp["$==="](t),(r=i===e||i===!1)!=!1&&r!==e&&a.$raise(d.TypeError,"type mismatch: "+t.$class()+" given")),o=-1,n!==!1&&n!==e){n=d.Opal.$coerce_to(n,d.Integer,"to_int");var u=a.length;if(0>n&&(n+=u),n>u)return e;o=(r=d.Regexp["$==="](t))!==!1&&r!==e?(r=t["$=~"](a.substr(n)))!==!1&&r!==e?r:-1:a.substr(n).indexOf(t),-1!==o&&(o+=n)}else o=(r=d.Regexp["$==="](t))!==!1&&r!==e?(r=t["$=~"](a))!==!1&&r!==e?r:-1:a.indexOf(t);return(r=-1===o)!=!1&&r!==e?e:o},v.$inspect=function(){var t=this,n=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,r={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return n.lastIndex=0,n.test(t)?'"'+t.replace(n,function(t){var n=r[t];return"string"==typeof n?n:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'},v.$intern=function(){var t=this;return t},v.$lines=function(t){var n=this;return null==t&&(t=u["/"]),n.$each_line(t).$to_a()},v.$length=function(){var t=this;return t.length},v.$ljust=function(t,n){var r,i=this;if(null==n&&(n=" "),t=d.Opal.$coerce_to(t,d.Integer,"to_int"),n=d.Opal.$coerce_to(n,d.String,"to_str").$to_s(),(r=n["$empty?"]())!==!1&&r!==e&&i.$raise(d.ArgumentError,"zero width padding"),(r=i.length>=t)!=!1&&r!==e)return i;var a=-1,o="";for(t-=i.length;t>++a;)o+=n;return i+o.slice(0,t)},v.$lstrip=function(){var t=this;return t.replace(/^\s*/,"")},v.$match=h=function(t,n){var r,i,a=this,o=h._p,u=o||e;return h._p=null,(r=(i=d.String["$==="](t))!==!1&&i!==e?i:t["$respond_to?"]("to_str"))!==!1&&r!==e&&(t=RegExp(""+d.Regexp.$escape(t.$to_str()))),((r=d.Regexp["$==="](t))===!1||r===e)&&a.$raise(d.TypeError,"wrong argument type "+t.$class()+" (expected Regexp)"),(r=(i=t).$match,r._p=u.$to_proc(),r).call(i,a,n)},v.$next=function(){var t=this;if(0===t.length)return"";var n=t.substr(0,t.length-1),r=String.fromCharCode(t.charCodeAt(t.length-1)+1);return n+r},v.$ord=function(){var t=this;return t.charCodeAt(0)},v.$partition=function(t){var n=this,r=n.split(t),e=r[0].length===n.length?"":t;return[r[0],e,r.slice(1).join(""+t)]},v.$reverse=function(){var t=this;return t.split("").reverse().join("")},v.$rindex=function(t,n){var r=this,i=null==t?Opal.NilClass:t.constructor;if(i!=String&&i!=RegExp){var a="type mismatch: "+i+" given";r.$raise(d.TypeError.$new(a))}if(0==r.length)return 0==t.length?0:e;var o=-1;return null!=n?(0>n&&(n=r.length+n),i==String?o=r.lastIndexOf(t,n):(o=r.substr(0,n+1).$reverse().search(t),-1!==o&&(o=n-o))):i==String?o=r.lastIndexOf(t):(o=r.$reverse().search(t),-1!==o&&(o=r.length-1-o)),-1===o?e:o},v.$rjust=function(t,n){var r,i=this;if(null==n&&(n=" "),t=d.Opal.$coerce_to(t,d.Integer,"to_int"),n=d.Opal.$coerce_to(n,d.String,"to_str").$to_s(),(r=n["$empty?"]())!==!1&&r!==e&&i.$raise(d.ArgumentError,"zero width padding"),(r=i.length>=t)!=!1&&r!==e)return i;var a=Math.floor(t-i.length),o=Math.floor(a/n.length),u=Array(o+1).join(n),s=a-u.length;return u+n.slice(0,s)+i},v.$rstrip=function(){var t=this;return t.replace(/\s*$/,"")},v.$scan=f=function(t){var n=this,r=f._p,i=r||e;f._p=null,t.global?t.lastIndex=0:t=RegExp(t.source,"g"+(t.multiline?"m":"")+(t.ignoreCase?"i":""));for(var a,o=[];null!=(a=t.exec(n));)d.MatchData.$new(t,a),i===e?1==a.length?o.push(a[0]):o.push(a.slice(1)):1==a.length?i(a[0]):i.apply(n,a.slice(1));return i!==e?n:o},t.defn(_,"$size",v.$length),t.defn(_,"$slice",v["$[]"]),v.$split=function(t,n){var r,i=this;return null==t&&(t=(r=u[";"])!==!1&&r!==e?r:" "),i.split(t,n)},v["$start_with?"]=function(t){var n=this;t=a.call(arguments,0);for(var r=0,e=t.length;e>r;r++){var i=d.Opal.$coerce_to(t[r],d.String,"to_str");if(0===n.indexOf(i))return!0}return!1},v.$strip=function(){var t=this;return t.replace(/^\s*/,"").replace(/\s*$/,"")},v.$sub=p=function(t,n){var r=this,i=p._p,a=i||e;return p._p=null,"string"==typeof n?(n=n.replace(/\\([1-9])/g,"$$$1"),r.replace(t,n)):a!==e?r.replace(t,function(){for(var t=[],n=0,r=arguments.length;r>n;n++){var i=arguments[n];void 0==i?t.push(e):t.push(i)}return t.pop(),t.pop(),t.length,u["&"]=t[0],u["~"]=t,a(t[0])}):void 0!==n?n["$is_a?"](d.Hash)?r.replace(t,function(){var t=n["$[]"](r.$str());return null==t?e:r.$value().$to_s()}):(n=d.String.$try_convert(n),null==n&&r.$raise(d.TypeError,"can't convert "+n.$class()+" into String"),r.replace(t,n)):(n=(""+n).replace(/\\([1-9])/g,"$$$1"),r.replace(t,n))},t.defn(_,"$succ",v.$next),v.$sum=function(t){var n=this;null==t&&(t=16);for(var r=0,e=0,i=n.length;i>e;e++)r+=n.charCodeAt(e)%((1<<t)-1);return r},v.$swapcase=function(){var t=this,n=t.replace(/([a-z]+)|([A-Z]+)/g,function(t,n){return n?t.toUpperCase():t.toLowerCase()});return t.constructor===String?n:t.$class().$new(n)},v.$to_a=function(){var t=this;return 0===t.length?[]:[t]},v.$to_f=function(){var t=this,n=parseFloat(t);return isNaN(n)?0:n},v.$to_i=function(t){var n=this;null==t&&(t=10);var r=parseInt(n,t);return isNaN(r)?0:r},v.$to_proc=function(){var t=this,n="$"+t;return function(t){var r=t[n];return r?r.call(t):t.$method_missing(n)}},v.$to_s=function(){var t=this;return""+t},t.defn(_,"$to_str",v.$to_s),t.defn(_,"$to_sym",v.$intern),v.$tr=function(t,n){var r=this;if(0==t.length||t===n)return r;var e={},i=t.split(""),a=i.length,o=n.split(""),u=o.length,s=!1,c=null;"^"===i[0]&&(s=!0,i.shift(),c=o[u-1],a-=1);for(var l=[],$=null,h=!1,f=0;a>f;f++){var p=i[f];if(null==$)$=p,l.push(p);else if("-"===p)"-"===$?(l.push("-"),l.push("-")):f==a-1?l.push("-"):h=!0;else if(h){for(var _=$.charCodeAt(0)+1,v=p.charCodeAt(0),d=_;v>d;d++)l.push(String.fromCharCode(d));l.push(p),h=null,$=null}else l.push(p)}if(i=l,a=i.length,s)for(var f=0;a>f;f++)e[i[f]]=!0;else{if(u>0){for(var m=[],g=null,h=!1,f=0;u>f;f++){var p=o[f];if(null==$)$=p,m.push(p);else if("-"===p)"-"===g?(m.push("-"),m.push("-")):f==u-1?m.push("-"):h=!0;else if(h){for(var _=$.charCodeAt(0)+1,v=p.charCodeAt(0),d=_;v>d;d++)m.push(String.fromCharCode(d));m.push(p),h=null,$=null}else m.push(p)}o=m,u=o.length}var y=a-u;if(y>0)for(var b=u>0?o[u-1]:"",f=0;y>f;f++)o.push(b);for(var f=0;a>f;f++)e[i[f]]=o[f]}for(var M="",f=0,w=r.length;w>f;f++){var p=r.charAt(f),D=e[p];M+=s?null==D?c:p:null!=D?D:p}return M},v.$tr_s=function(t,n){var r=this;if(0==t.length)return r;var e={},i=t.split(""),a=i.length,o=n.split(""),u=o.length,s=!1,c=null;"^"===i[0]&&(s=!0,i.shift(),c=o[u-1],a-=1);for(var l=[],$=null,h=!1,f=0;a>f;f++){var p=i[f];if(null==$)$=p,l.push(p);else if("-"===p)"-"===$?(l.push("-"),l.push("-")):f==a-1?l.push("-"):h=!0;else if(h){for(var _=$.charCodeAt(0)+1,v=p.charCodeAt(0),d=_;v>d;d++)l.push(String.fromCharCode(d));l.push(p),h=null,$=null}else l.push(p)}if(i=l,a=i.length,s)for(var f=0;a>f;f++)e[i[f]]=!0;else{if(u>0){for(var m=[],g=null,h=!1,f=0;u>f;f++){var p=o[f];if(null==$)$=p,m.push(p);else if("-"===p)"-"===g?(m.push("-"),m.push("-")):f==u-1?m.push("-"):h=!0;else if(h){for(var _=$.charCodeAt(0)+1,v=p.charCodeAt(0),d=_;v>d;d++)m.push(String.fromCharCode(d));m.push(p),h=null,$=null}else m.push(p)}o=m,u=o.length}var y=a-u;if(y>0)for(var b=u>0?o[u-1]:"",f=0;y>f;f++)o.push(b);for(var f=0;a>f;f++)e[i[f]]=o[f]}for(var M="",w=null,f=0,D=r.length;D>f;f++){var p=r.charAt(f),E=e[p];s?null==E?null==w&&(M+=c,w=!0):(M+=p,w=null):null!=E?(null==w||w!==E)&&(M+=E,w=E):(M+=p,w=null)}return M},v.$upcase=function(){var t=this;return t.toUpperCase()},v.$freeze=function(){var t=this;return t},v["$frozen?"]=function(){return!0},e}(n,null),t.cdecl(r,"Symbol",r.String)}(Opal),function(t){var n=t.top,r=t.nil,e=(t.breaker,t.slice),i=t.klass,a=t.gvars;return t.add_stubs(["$attr_reader","$pre_match","$post_match","$[]","$===","$==","$raise","$inspect"]),function(n,o){function u(){}var s,c=u=i(n,o,"MatchData",u),l=u._proto,$=u._scope;return l.string=l.matches=l.begin=r,c.$attr_reader("post_match","pre_match","regexp","string"),t.defs(c,"$new",s=function(n,e){var i=this,o=(s._p,r);return s._p=null,o=t.find_super_dispatcher(i,"new",s,null,u).apply(i,[n,e]),a["`"]=o.$pre_match(),a["'"]=o.$post_match(),a["~"]=o,o}),l.$initialize=function(t,n){var e=this;e.regexp=t,e.begin=n.index,e.string=n.input,e.pre_match=e.string.substr(0,t.lastIndex-n[0].length),e.post_match=e.string.substr(t.lastIndex),e.matches=[];for(var i=0,a=n.length;a>i;i++){var o=n[i];null==o?e.matches.push(r):e.matches.push(o)}},l["$[]"]=function(t){var n,r=this;return t=e.call(arguments,0),(n=r.matches)["$[]"].apply(n,[].concat(t))},l["$=="]=function(t){var n,e,i,a,o=this;return(n=$.MatchData["$==="](t))===!1||n===r?!1:(a=o.string==t.string,i=a!==!1&&a!==r?o.regexp==t.regexp:a,e=i!==!1&&i!==r?o.pre_match==t.pre_match:i,n=e!==!1&&e!==r?o.post_match==t.post_match:e,n!==!1&&n!==r?o.begin==t.begin:n)},l.$begin=function(t){var n,e,i,a=this;return i=t["$=="](0),e=i===r||i===!1,(n=e!==!1&&e!==r?(i=t["$=="](1),i===r||i===!1):e)!==!1&&n!==r&&a.$raise($.ArgumentError,"MatchData#begin only supports 0th element"),a.begin},l.$captures=function(){var t=this;return t.matches.slice(1)},l.$inspect=function(){for(var t=this,n="#<MatchData "+t.matches[0].$inspect(),r=1,e=t.matches.length;e>r;r++)n+=" "+r+":"+t.matches[r].$inspect();return n+">"},l.$length=function(){var t=this;return t.matches.length},t.defn(c,"$size",l.$length),l.$to_a=function(){var t=this;return t.matches},l.$to_s=function(){var t=this;return t.matches[0]},l.$values_at=function(t){var n=this;t=e.call(arguments,0);for(var i=[],a=n.matches.length,o=0,u=t.length;u>o;o++){var s=t[o];s>=0?i.push(n.matches[s]):(s+=a,s>0?i.push(n.matches[s]):i.push(r))}return i},r}(n,null)}(Opal),function(t){var n,r,e,i,a,o,u,s=t.top,c=t,l=t.nil,$=t.breaker,h=(t.slice,t.klass),f=t.hash2;return t.add_stubs(["$+","$[]","$new","$to_proc","$each","$const_set","$sub","$===","$const_get","$==","$name","$include?","$names","$constants","$raise","$attr_accessor","$attr_reader","$register","$length","$bytes","$to_a","$each_byte","$bytesize","$enum_for","$find","$getbyte"]),function(n,r){function e(){}var i,a=e=h(n,r,"Encoding",e),o=e._proto,u=e._scope;return o.ascii=o.dummy=o.name=l,t.defs(a,"$register",i=function(t,n){var r,e,a,o,s=this,c=i._p,$=c||l,h=l,p=l;return null==n&&(n=f([],{})),i._p=null,h=[t]["$+"]((r=n["$[]"]("aliases"))!==!1&&r!==l?r:[]),p=(r=(e=u.Class).$new,r._p=$.$to_proc(),r).call(e,s).$new(t,h,(r=n["$[]"]("ascii"))!==!1&&r!==l?r:!1,(r=n["$[]"]("dummy"))!==!1&&r!==l?r:!1),(r=(a=h).$each,r._p=(o=function(t){var n=o._s||this;return null==t&&(t=l),n.$const_set(t.$sub("-","_"),p)},o._s=s,o),r).call(a)}),t.defs(a,"$find",function(n){try{var r,e,i,a=this;return(r=a["$==="](n))!==!1&&r!==l?n:((r=(e=a.$constants()).$each,r._p=(i=function(r){var e,a,o=i._s||this,u=l;return null==r&&(r=l),u=o.$const_get(r),(e=(a=u.$name()["$=="](n))!==!1&&a!==l?a:u.$names()["$include?"](n))===!1||e===l?l:(t.$return(u),void 0)},i._s=a,i),r).call(e),a.$raise(u.ArgumentError,"unknown encoding name - "+n))}catch(o){if(o===t.returner)return o.$v;
throw o}}),function(t){return t._scope,t._proto,t.$attr_accessor("default_external")}(a.$singleton_class()),a.$attr_reader("name","names"),o.$initialize=function(t,n,r,e){var i=this;return i.name=t,i.names=n,i.ascii=r,i.dummy=e},o["$ascii_compatible?"]=function(){var t=this;return t.ascii},o["$dummy?"]=function(){var t=this;return t.dummy},o.$to_s=function(){var t=this;return t.name},o.$inspect=function(){var t,n=this;return"#<Encoding:"+n.name+function(){return(t=n.dummy)!==!1&&t!==l?" (dummy)":l}()+">"},o.$each_byte=function(){var t=this;return t.$raise(u.NotImplementedError)},o.$getbyte=function(){var t=this;return t.$raise(u.NotImplementedError)},o.$bytesize=function(){var t=this;return t.$raise(u.NotImplementedError)},l}(s,null),(n=(r=c.Encoding).$register,n._p=(e=function(){var n,r=e._s||this;return t.defn(r,"$each_byte",n=function(r){var e,i=n._p,a=i||l;n._p=null;for(var o=0,u=r.length;u>o;o++){var s=r.charCodeAt(o);if(127>=s)(e=t.$yield1(a,s))===$?$.$v:e;else for(var c=encodeURIComponent(r.charAt(o)).substr(1).split("%"),h=0,f=c.length;f>h;h++)(e=t.$yield1(a,parseInt(c[h],16)))===$?$.$v:e}}),t.defn(r,"$bytesize",function(){var t=this;return t.$bytes().$length()}),l},e._s=s,e),n).call(r,"UTF-8",f(["aliases","ascii"],{aliases:["CP65001"],ascii:!0})),(n=(i=c.Encoding).$register,n._p=(a=function(){var n,r=a._s||this;return t.defn(r,"$each_byte",n=function(r){var e,i=n._p,a=i||l;n._p=null;for(var o=0,u=r.length;u>o;o++){var s=r.charCodeAt(o);(e=t.$yield1(a,255&s))===$?$.$v:e,(e=t.$yield1(a,s>>8))===$?$.$v:e}}),t.defn(r,"$bytesize",function(){var t=this;return t.$bytes().$length()}),l},a._s=s,a),n).call(i,"UTF-16LE"),(n=(o=c.Encoding).$register,n._p=(u=function(){var n,r=u._s||this;return t.defn(r,"$each_byte",n=function(r){var e,i=n._p,a=i||l;n._p=null;for(var o=0,u=r.length;u>o;o++)(e=t.$yield1(a,255&r.charCodeAt(o)))===$?$.$v:e}),t.defn(r,"$bytesize",function(){var t=this;return t.$bytes().$length()}),l},u._s=s,u),n).call(o,"ASCII-8BIT",f(["aliases","ascii"],{aliases:["BINARY"],ascii:!0})),function(t,n){function r(){}r=h(t,n,"String",r);var e,i=r._proto,a=r._scope;return i.encoding=l,i.encoding=a.Encoding._scope.UTF_16LE,i.$bytes=function(){var t=this;return t.$each_byte().$to_a()},i.$bytesize=function(){var t=this;return t.encoding.$bytesize(t)},i.$each_byte=e=function(){var t,n,r=this,i=e._p,a=i||l;return e._p=null,a===l?r.$enum_for("each_byte"):((t=(n=r.encoding).$each_byte,t._p=a.$to_proc(),t).call(n,r),r)},i.$encoding=function(){var t=this;return t.encoding},i.$force_encoding=function(t){var n=this;if(t=a.Encoding.$find(t),t["$=="](n.encoding))return n;var r=new native_string(n);return r.encoding=t,r},i.$getbyte=function(t){var n=this;return n.encoding.$getbyte(n,t)},l}(s,null)}(Opal),function(t){var n=t.top,r=t,e=t.nil,i=t.breaker,a=t.slice,o=t.klass;return t.add_stubs(["$include","$undef_method","$coerce","$===","$raise","$class","$__send__","$send_coerced","$to_int","$respond_to?","$==","$enum_for","$<","$>","$floor","$/","$%"]),function(n,r){function u(){}var s,c,l,$,h,f=u=o(n,r,"Numeric",u),p=u._proto,_=u._scope;return f.$include(_.Comparable),p._isNumber=!0,function(t){return t._scope,t._proto,t.$undef_method("new")}(f.$singleton_class()),p.$coerce=function(t,n){var r=this,i=e;null==n&&(n="operation");try{return t._isNumber?[r,t]:t.$coerce(r)}catch(a){return function(){return i=n,"operation"["$==="](i)?r.$raise(_.TypeError,""+t.$class()+" can't be coerce into Numeric"):"comparison"["$==="](i)?r.$raise(_.ArgumentError,"comparison of "+r.$class()+" with "+t.$class()+" failed"):e}()}},p.$send_coerced=function(n,r){var i,a=this,o=e,u=e,s=e,c=e;return o=function(){return u=n,"+"["$==="](u)||"-"["$==="](u)||"*"["$==="](u)||"/"["$==="](u)||"%"["$==="](u)||"&"["$==="](u)||"|"["$==="](u)||"^"["$==="](u)||"**"["$==="](u)?"operation":">"["$==="](u)||">="["$==="](u)||"<"["$==="](u)||"<="["$==="](u)||"<=>"["$==="](u)?"comparison":e}(),i=t.to_ary(a.$coerce(r,o)),s=null==i[0]?e:i[0],c=null==i[1]?e:i[1],s.$__send__(n,c)},p["$+"]=function(t){var n=this;return t._isNumber?n+t:n.$send_coerced("+",t)},p["$-"]=function(t){var n=this;return t._isNumber?n-t:n.$send_coerced("-",t)},p["$*"]=function(t){var n=this;return t._isNumber?n*t:n.$send_coerced("*",t)},p["$/"]=function(t){var n=this;return t._isNumber?n/t:n.$send_coerced("/",t)},p["$%"]=function(t){var n=this;return t._isNumber?0>t||0>n?(n%t+t)%t:n%t:n.$send_coerced("%",t)},p["$&"]=function(t){var n=this;return t._isNumber?n&t:n.$send_coerced("&",t)},p["$|"]=function(t){var n=this;return t._isNumber?n|t:n.$send_coerced("|",t)},p["$^"]=function(t){var n=this;return t._isNumber?n^t:n.$send_coerced("^",t)},p["$<"]=function(t){var n=this;return t._isNumber?t>n:n.$send_coerced("<",t)},p["$<="]=function(t){var n=this;return t._isNumber?t>=n:n.$send_coerced("<=",t)},p["$>"]=function(t){var n=this;return t._isNumber?n>t:n.$send_coerced(">",t)},p["$>="]=function(t){var n=this;return t._isNumber?n>=t:n.$send_coerced(">=",t)},p["$<=>"]=function(t){var n=this;try{return t._isNumber?n>t?1:t>n?-1:0:n.$send_coerced("<=>",t)}catch(r){if(_.ArgumentError["$==="](r))return e;throw r}},p["$<<"]=function(t){var n=this;return n<<t.$to_int()},p["$>>"]=function(t){var n=this;return n>>t.$to_int()},p["$+@"]=function(){var t=this;return+t},p["$-@"]=function(){var t=this;return-t},p["$~"]=function(){var t=this;return~t},p["$**"]=function(t){var n=this;return t._isNumber?Math.pow(n,t):n.$send_coerced("**",t)},p["$=="]=function(t){var n=this;return t._isNumber?n==Number(t):t["$respond_to?"]("==")?t["$=="](n):!1},p.$abs=function(){var t=this;return Math.abs(t)},p.$ceil=function(){var t=this;return Math.ceil(t)},p.$chr=function(){var t=this;return String.fromCharCode(t)},p.$conj=function(){var t=this;return t},t.defn(f,"$conjugate",p.$conj),p.$downto=s=function(t){var n,r=this,a=s._p,o=a||e;if(s._p=null,(n=o)===!1||n===e)return r.$enum_for("downto",t);for(var u=r;u>=t;u--)if(o(u)===i)return i.$v;return r},t.defn(f,"$eql?",p["$=="]),t.defn(f,"$equal?",p["$=="]),p["$even?"]=function(){var t=this;return 0===t%2},p.$floor=function(){var t=this;return Math.floor(t)},p.$hash=function(){var t=this;return""+t},p["$integer?"]=function(){var t=this;return 0===t%1},p["$is_a?"]=c=function(n){var r,i,o=a.call(arguments,0),u=this,s=c._p;return c._p=null,(r=(i=n["$=="](_.Float))?_.Float["$==="](u):i)!==!1&&r!==e?!0:(r=(i=n["$=="](_.Integer))?_.Integer["$==="](u):i)!==!1&&r!==e?!0:t.find_super_dispatcher(u,"is_a?",c,s).apply(u,o)},t.defn(f,"$magnitude",p.$abs),t.defn(f,"$modulo",p["$%"]),p.$next=function(){var t=this;return t+1},p["$nonzero?"]=function(){var t=this;return 0==t?e:t},p["$odd?"]=function(){var t=this;return 0!==t%2},p.$ord=function(){var t=this;return t},p.$pred=function(){var t=this;return t-1},p.$step=l=function(t,n){var r,i=this,a=l._p,o=a||e;if(null==n&&(n=1),l._p=null,(r=o)===!1||r===e)return i.$enum_for("step",t,n);(r=0==n)!=!1&&r!==e&&i.$raise(_.ArgumentError,"step cannot be 0");var u=i;if(n>0)for(;t>=u;)o(u),u+=n;else for(;u>=t;)o(u),u+=n;return i},t.defn(f,"$succ",p.$next),p.$times=$=function(){var t,n=this,r=$._p,a=r||e;if($._p=null,(t=a)===!1||t===e)return n.$enum_for("times");for(var o=0;n>o;o++)if(a(o)===i)return i.$v;return n},p.$to_f=function(){var t=this;return parseFloat(t)},p.$to_i=function(){var t=this;return parseInt(t)},t.defn(f,"$to_int",p.$to_i),p.$to_s=function(t){var n,r,i=this;return null==t&&(t=10),(n=(r=t["$<"](2))!==!1&&r!==e?r:t["$>"](36))!==!1&&n!==e&&i.$raise(_.ArgumentError,"base must be between 2 and 36"),i.toString(t)},t.defn(f,"$inspect",p.$to_s),p.$divmod=function(t){var n=this,r=e,i=e;return r=n["$/"](t).$floor(),i=n["$%"](t),[r,i]},p.$upto=h=function(t){var n,r=this,a=h._p,o=a||e;if(h._p=null,(n=o)===!1||n===e)return r.$enum_for("upto",t);for(var u=r;t>=u;u++)if(o(u)===i)return i.$v;return r},p["$zero?"]=function(){var t=this;return 0==t},p.$size=function(){return 4},p["$nan?"]=function(){var t=this;return isNaN(t)},p["$finite?"]=function(){var t=this;return 1/0==t||t==-1/0},p["$infinite?"]=function(){var t,n=this;return(t=1/0==n)!=!1&&t!==e?1:(t=n==-1/0)!=!1&&t!==e?-1:e},e}(n,null),t.cdecl(r,"Fixnum",r.Numeric),function(n,r){function i(){}var a=i=o(n,r,"Integer",i);return i._proto,i._scope,t.defs(a,"$===",function(t){return!(!t._isNumber||0!=t%1)}),e}(n,r.Numeric),function(n,r){function e(){}var i=e=o(n,r,"Float",e),a=(e._proto,e._scope);return t.defs(i,"$===",function(t){return!(!t._isNumber||0==t%1)}),t.cdecl(a,"INFINITY",1/0),t.cdecl(a,"NAN",0/0)}(n,r.Numeric)}(Opal),function(t){var n=t.top,r=t.nil,e=t.breaker,i=t.slice,a=t.klass;return t.add_stubs(["$raise"]),function(n,o){function u(){}var s,c,l=u=a(n,o,"Proc",u),$=u._proto,h=u._scope;return $._isProc=!0,$.is_lambda=!1,t.defs(l,"$new",s=function(){var t,n=this,e=s._p,i=e||r;return s._p=null,((t=i)===!1||t===r)&&n.$raise(h.ArgumentError,"tried to create a Proc object without a block"),i}),$.$call=c=function(t){var n=this,a=c._p,o=a||r;t=i.call(arguments,0),c._p=null,o!==r&&(n._p=o);var u;return u=n.is_lambda?n.apply(null,t):Opal.$yieldX(n,t),u===e?e.$v:u},t.defn(l,"$[]",$.$call),$.$to_proc=function(){var t=this;return t},$["$lambda?"]=function(){var t=this;return!!t.is_lambda},$.$arity=function(){var t=this;return t.length},r}(n,null)}(Opal),function(t){var n=t.top,r=t.nil,e=(t.breaker,t.slice),i=t.klass;return t.add_stubs(["$attr_reader","$class","$arity","$new","$name"]),function(n,a){function o(){}var u,s=o=i(n,a,"Method",o),c=o._proto,l=o._scope;return c.method=c.receiver=c.owner=c.name=c.obj=r,s.$attr_reader("owner","receiver","name"),c.$initialize=function(t,n,r){var e=this;return e.receiver=t,e.owner=t.$class(),e.name=r,e.method=n},c.$arity=function(){var t=this;return t.method.$arity()},c.$call=u=function(t){var n=this,i=u._p,a=i||r;return t=e.call(arguments,0),u._p=null,n.method._p=a,n.method.apply(n.receiver,t)},t.defn(s,"$[]",c.$call),c.$unbind=function(){var t=this;return l.UnboundMethod.$new(t.owner,t.method,t.name)},c.$to_proc=function(){var t=this;return t.method},c.$inspect=function(){var t=this;return"#<Method: "+t.obj.$class().$name()+"#"+t.name+"}>"},r}(n,null),function(t,n){function e(){}var a=e=i(t,n,"UnboundMethod",e),o=e._proto,u=e._scope;return o.method=o.name=o.owner=r,a.$attr_reader("owner","name"),o.$initialize=function(t,n,r){var e=this;return e.owner=t,e.method=n,e.name=r},o.$arity=function(){var t=this;return t.method.$arity()},o.$bind=function(t){var n=this;return u.Method.$new(t,n.method,n.name)},o.$inspect=function(){var t=this;return"#<UnboundMethod: "+t.owner.$name()+"#"+t.name+">"},r}(n,null)}(Opal),function(t){var n=t.top,r=t.nil,e=t.breaker,i=t.slice,a=t.klass;return t.add_stubs(["$include","$attr_reader","$include?","$<=","$<","$enum_for","$succ","$==","$===","$exclude_end?","$eql?","$begin","$end","$cover?","$raise","$inspect"]),function(n,o){function u(){}var s,c,l,$=u=a(n,o,"Range",u),h=u._proto,f=u._scope;return h.begin=h.exclude=h.end=r,$.$include(f.Enumerable),h._isRange=!0,$.$attr_reader("begin","end"),h.$initialize=function(t,n,r){var e=this;return null==r&&(r=!1),e.begin=t,e.end=n,e.exclude=r},h["$=="]=function(t){var n=this;return t._isRange?n.exclude===t.exclude&&n.begin==t.begin&&n.end==t.end:!1},h["$==="]=function(t){var n=this;return n["$include?"](t)},h["$cover?"]=function(t){var n,e,i=this;return(n=i.begin["$<="](t))?function(){return(e=i.exclude)!==!1&&e!==r?t["$<"](i.end):t["$<="](i.end)}():n},t.defn($,"$last",h.$end),h.$each=s=function(){var n,i,a,o=this,u=s._p,c=u||r,l=r,$=r;if(s._p=null,c===r)return o.$enum_for("each");for(l=o.begin,$=o.end;l["$<"]($);){if(t.$yield1(c,l)===e)return e.$v;l=l.$succ()}return a=o.exclude,i=a===r||a===!1,(n=i!==!1&&i!==r?l["$=="]($):i)!==!1&&n!==r&&t.$yield1(c,l)===e?e.$v:o},h["$eql?"]=function(t){var n,e,i=this;return(n=f.Range["$==="](t))===!1||n===r?!1:(e=i.exclude["$==="](t["$exclude_end?"]()),n=e!==!1&&e!==r?i.begin["$eql?"](t.$begin()):e,n!==!1&&n!==r?i.end["$eql?"](t.$end()):n)},h["$exclude_end?"]=function(){var t=this;return t.exclude},t.defn($,"$first",h.$begin),h["$include?"]=function(t){var n=this;return n["$cover?"](t)},h.$max=c=function(){var n=i.call(arguments,0),e=this,a=c._p,o=a||r;return c._p=null,o!==r?t.find_super_dispatcher(e,"max",c,a).apply(e,n):e.exclude?e.end-1:e.end},h.$min=l=function(){var n=i.call(arguments,0),e=this,a=l._p,o=a||r;return l._p=null,o!==r?t.find_super_dispatcher(e,"min",l,a).apply(e,n):e.begin},t.defn($,"$member?",h["$include?"]),h.$step=function(t){var n=this;return null==t&&(t=1),n.$raise(f.NotImplementedError)},h.$to_s=function(){var t=this;return t.begin.$inspect()+(t.exclude?"...":"..")+t.end.$inspect()},t.defn($,"$inspect",h.$to_s)}(n,null)}(Opal),function(t){var n=t.top,r=t.nil,e=(t.breaker,t.slice),i=t.klass;return t.add_stubs(["$include","$raise","$kind_of?","$to_i","$coerce_to","$between?","$new","$compact","$nil?","$===","$<=>","$to_f","$is_a?","$zero?","$warn","$yday","$rjust","$ljust","$zone","$strftime","$sec","$min","$hour","$day","$month","$year","$wday","$isdst"]),function(n,a){function o(){}var u=o=i(n,a,"Time",o),s=o._proto,c=o._scope;u.$include(c.Comparable);var l=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],$=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],h=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],f=["January","Febuary","March","April","May","June","July","August","September","October","November","December"];return t.defs(u,"$at",function(t,n){return null==n&&(n=0),new Date(1e3*t+n)}),t.defs(u,"$new",function(t,n,r,e,i,a){var o=this;switch(arguments.length){case 1:return new Date(t,0);case 2:return new Date(t,n-1);case 3:return new Date(t,n-1,r);case 4:return new Date(t,n-1,r,e);case 5:return new Date(t,n-1,r,e,i);case 6:return new Date(t,n-1,r,e,i,a);case 7:o.$raise(c.NotImplementedError);default:return new Date}}),t.defs(u,"$local",function(t,n,i,a,o,u,s){var l,$=this;if(null==n&&(n=r),null==i&&(i=r),null==a&&(a=r),null==o&&(o=r),null==u&&(u=r),null==s&&(s=r),(l=10===arguments.length)!=!1&&l!==r){var h=e.call(arguments).reverse();u=h[9],o=h[8],a=h[7],i=h[6],n=h[5],t=h[4]}return t=function(){return(l=t["$kind_of?"](c.String))!==!1&&l!==r?t.$to_i():c.Opal.$coerce_to(t,c.Integer,"to_int")}(),n=function(){return(l=n["$kind_of?"](c.String))!==!1&&l!==r?n.$to_i():c.Opal.$coerce_to((l=n)!==!1&&l!==r?l:1,c.Integer,"to_int")}(),((l=n["$between?"](1,12))===!1||l===r)&&$.$raise(c.ArgumentError,"month out of range: "+n),i=function(){return(l=i["$kind_of?"](c.String))!==!1&&l!==r?i.$to_i():c.Opal.$coerce_to((l=i)!==!1&&l!==r?l:1,c.Integer,"to_int")}(),((l=i["$between?"](1,31))===!1||l===r)&&$.$raise(c.ArgumentError,"day out of range: "+i),a=function(){return(l=a["$kind_of?"](c.String))!==!1&&l!==r?a.$to_i():c.Opal.$coerce_to((l=a)!==!1&&l!==r?l:0,c.Integer,"to_int")}(),((l=a["$between?"](0,24))===!1||l===r)&&$.$raise(c.ArgumentError,"hour out of range: "+a),o=function(){return(l=o["$kind_of?"](c.String))!==!1&&l!==r?o.$to_i():c.Opal.$coerce_to((l=o)!==!1&&l!==r?l:0,c.Integer,"to_int")}(),((l=o["$between?"](0,59))===!1||l===r)&&$.$raise(c.ArgumentError,"minute out of range: "+o),u=function(){return(l=u["$kind_of?"](c.String))!==!1&&l!==r?u.$to_i():c.Opal.$coerce_to((l=u)!==!1&&l!==r?l:0,c.Integer,"to_int")}(),((l=u["$between?"](0,59))===!1||l===r)&&$.$raise(c.ArgumentError,"second out of range: "+u),(l=$).$new.apply(l,[].concat([t,n,i,a,o,u].$compact()))}),t.defs(u,"$gm",function(t,n,e,i,a,o){var u,s=this;switch((u=t["$nil?"]())!==!1&&u!==r&&s.$raise(c.TypeError,"missing year (got nil)"),arguments.length){case 1:return new Date(Date.UTC(t,0));case 2:return new Date(Date.UTC(t,n-1));case 3:return new Date(Date.UTC(t,n-1,e));case 4:return new Date(Date.UTC(t,n-1,e,i));case 5:return new Date(Date.UTC(t,n-1,e,i,a));case 6:return new Date(Date.UTC(t,n-1,e,i,a,o));case 7:s.$raise(c.NotImplementedError)}}),function(t){return t._scope,t._proto,t._proto.$mktime=t._proto.$local,t._proto.$utc=t._proto.$gm}(u.$singleton_class()),t.defs(u,"$now",function(){return new Date}),s["$+"]=function(t){var n,e=this;return(n=c.Time["$==="](t))!==!1&&n!==r&&e.$raise(c.TypeError,"time + time?"),t=c.Opal.$coerce_to(t,c.Integer,"to_int"),new Date(e.getTime()+1e3*t)},s["$-"]=function(t){var n,e=this;return(n=c.Time["$==="](t))!==!1&&n!==r?(e.getTime()-t.getTime())/1e3:(t=c.Opal.$coerce_to(t,c.Integer,"to_int"),new Date(e.getTime()-1e3*t))},s["$<=>"]=function(t){var n=this;return n.$to_f()["$<=>"](t.$to_f())},s["$=="]=function(t){var n=this;return n.$to_f()===t.$to_f()},s.$day=function(){var t=this;return t.getDate()},s.$yday=function(){var t=this,n=new Date(t.getFullYear(),0,1);return Math.ceil((t-n)/864e5)},s.$isdst=function(){var t=this;return t.$raise(c.NotImplementedError)},s["$eql?"]=function(t){var n,e=this;return n=t["$is_a?"](c.Time),n!==!1&&n!==r?e["$<=>"](t)["$zero?"]():n},s["$friday?"]=function(){var t=this;return 5===t.getDay()},s.$hour=function(){var t=this;return t.getHours()},s.$inspect=function(){var t=this;return""+t},t.defn(u,"$mday",s.$day),s.$min=function(){var t=this;return t.getMinutes()},s.$mon=function(){var t=this;return t.getMonth()+1},s["$monday?"]=function(){var t=this;return 1===t.getDay()},t.defn(u,"$month",s.$mon),s["$saturday?"]=function(){var t=this;return 6===t.getDay()},s.$sec=function(){var t=this;return t.getSeconds()},s.$usec=function(){var t=this;return t.$warn("Microseconds are not supported"),0},s.$zone=function(){var t,n=this,r=""+n;return t=-1==r.indexOf("(")?r.match(/[A-Z]{3,4}/)[0]:r.match(/\([^)]+\)/)[0].match(/[A-Z]/g).join(""),"GMT"==t&&/(GMT\W*\d{4})/.test(r)?RegExp.$1:t},s.$gmt_offset=function(){var t=this;return 60*-t.getTimezoneOffset()},s.$strftime=function(t){var n=this;return t.replace(/%([\-_#^0]*:{0,2})(\d+)?([EO]*)(.)/g,function(t,r,e,i,a){var o="",e=parseInt(e),u=-1!==r.indexOf("0"),s=-1===r.indexOf("-"),c=-1!==r.indexOf("_"),p=-1!==r.indexOf("^"),_=-1!==r.indexOf("#"),v=(r.match(":")||[]).length;switch(u&&c&&(r.indexOf("0")<r.indexOf("_")?u=!1:c=!1),a){case"Y":o+=n.getFullYear();break;case"C":u=!c,o+=Match.round(n.getFullYear()/100);break;case"y":u=!c,o+=n.getFullYear()%100;break;case"m":u=!c,o+=n.getMonth()+1;break;case"B":o+=f[n.getMonth()];break;case"b":case"h":c=!u,o+=h[n.getMonth()];break;case"d":u=!c,o+=n.getDate();break;case"e":c=!u,o+=n.getDate();break;case"j":o+=n.$yday();break;case"H":u=!c,o+=n.getHours();break;case"k":c=!u,o+=n.getHours();break;case"I":u=!c,o+=n.getHours()%12||12;break;case"l":c=!u,o+=n.getHours()%12||12;break;case"P":o+=n.getHours()>=12?"pm":"am";break;case"p":o+=n.getHours()>=12?"PM":"AM";break;case"M":u=!c,o+=n.getMinutes();break;case"S":u=!c,o+=n.getSeconds();break;case"L":u=!c,e=isNaN(e)?3:e,o+=n.getMilliseconds();break;case"N":e=isNaN(e)?9:e,o+=(""+n.getMilliseconds()).$rjust(3,"0"),o=o.$ljust(e,"0");break;case"z":var d=n.getTimezoneOffset(),m=Math.floor(Math.abs(d)/60),g=Math.abs(d)%60;o+=0>d?"+":"-",o+=10>m?"0":"",o+=m,v>0&&(o+=":"),o+=10>g?"0":"",o+=g,v>1&&(o+=":00");break;case"Z":o+=n.$zone();break;case"A":o+=l[n.getDay()];break;case"a":o+=$[n.getDay()];break;case"u":o+=n.getDay()+1;break;case"w":o+=n.getDay();break;case"s":o+=parseInt(n.getTime()/1e3);break;case"n":o+="\n";break;case"t":o+="	";break;case"%":o+="%";break;case"c":o+=n.$strftime("%a %b %e %T %Y");break;case"D":case"x":o+=n.$strftime("%m/%d/%y");break;case"F":o+=n.$strftime("%Y-%m-%d");break;case"v":o+=n.$strftime("%e-%^b-%4Y");break;case"r":o+=n.$strftime("%I:%M:%S %p");break;case"R":o+=n.$strftime("%H:%M");break;case"T":case"X":o+=n.$strftime("%H:%M:%S");break;default:return t}return p&&(o=o.toUpperCase()),_&&(o=o.replace(/[A-Z]/,function(t){t.toLowerCase()}).replace(/[a-z]/,function(t){t.toUpperCase()})),s&&(u||c)&&(o=o.$rjust(isNaN(e)?2:e,c?" ":"0")),o})},s["$sunday?"]=function(){var t=this;return 0===t.getDay()},s["$thursday?"]=function(){var t=this;return 4===t.getDay()},s.$to_a=function(){var t=this;return[t.$sec(),t.$min(),t.$hour(),t.$day(),t.$month(),t.$year(),t.$wday(),t.$yday(),t.$isdst(),t.$zone()]},s.$to_f=function(){var t=this;return t.getTime()/1e3},s.$to_i=function(){var t=this;return parseInt(t.getTime()/1e3)},t.defn(u,"$to_s",s.$inspect),s["$tuesday?"]=function(){var t=this;return 2===t.getDay()},s.$wday=function(){var t=this;return t.getDay()},s["$wednesday?"]=function(){var t=this;return 3===t.getDay()},s.$year=function(){var t=this;return t.getFullYear()},r}(n,null),function(n,e){function a(){}var o=a=i(n,e,"Time",a),u=a._proto;return a._scope,t.defs(o,"$parse",function(t){return new Date(Date.parse(t))}),u.$iso8601=function(){var t=this;return t.$strftime("%FT%T%z")},r}(n,null)}(Opal),function(t){var n=t.top,r=t.nil,e=t.breaker,i=t.slice,a=t.klass;return t.add_stubs(["$==","$[]","$upcase","$const_set","$new","$unshift","$each","$define_struct_attribute","$instance_eval","$to_proc","$raise","$<<","$members","$define_method","$instance_variable_get","$instance_variable_set","$include","$each_with_index","$class","$===","$>=","$size","$include?","$to_sym","$enum_for","$hash","$all?","$length","$map","$+","$name","$join","$inspect","$each_pair"]),function(n,o){function u(){}var s,c,l,$=u=a(n,o,"Struct",u),h=u._proto,f=u._scope;return t.defs($,"$new",s=function(n,e){var a,o,c,l,$=i.call(arguments,0),h=this,p=s._p,_=p||r;return e=i.call(arguments,1),s._p=null,(a=h["$=="](f.Struct))===!1||a===r?t.find_super_dispatcher(h,"new",s,p,u).apply(h,$):n["$[]"](0)["$=="](n["$[]"](0).$upcase())?f.Struct.$const_set(n,(a=h).$new.apply(a,[].concat(e))):(e.$unshift(n),(o=(c=f.Class).$new,o._p=(l=function(){var t,n,i,a,o=l._s||this;return(t=(n=e).$each,t._p=(i=function(t){var n=i._s||this;return null==t&&(t=r),n.$define_struct_attribute(t)},i._s=o,i),t).call(n),_!==!1&&_!==r?(t=(a=o).$instance_eval,t._p=_.$to_proc(),t).call(a):r},l._s=h,l),o).call(c,h))}),t.defs($,"$define_struct_attribute",function(t){var n,e,i,a,o,u=this;return u["$=="](f.Struct)&&u.$raise(f.ArgumentError,"you cannot define attributes to the Struct class"),u.$members()["$<<"](t),(n=(e=u).$define_method,n._p=(i=function(){var n=i._s||this;return n.$instance_variable_get("@"+t)},i._s=u,i),n).call(e,t),(n=(a=u).$define_method,n._p=(o=function(n){var e=o._s||this;return null==n&&(n=r),e.$instance_variable_set("@"+t,n)},o._s=u,o),n).call(a,""+t+"=")}),t.defs($,"$members",function(){var t,n=this;return null==n.members&&(n.members=r),n["$=="](f.Struct)&&n.$raise(f.ArgumentError,"the Struct class has no members"),(t=n.members)!==!1&&t!==r?t:n.members=[]}),t.defs($,"$inherited",function(t){var n,e,i,a=this,o=r;return null==a.members&&(a.members=r),a["$=="](f.Struct)?r:(o=a.members,(n=(e=t).$instance_eval,n._p=(i=function(){var t=i._s||this;return t.members=o},i._s=a,i),n).call(e))}),$.$include(f.Enumerable),h.$initialize=function(t){var n,e,a,o=this;return t=i.call(arguments,0),(n=(e=o.$members()).$each_with_index,n._p=(a=function(n,e){var i=a._s||this;return null==n&&(n=r),null==e&&(e=r),i.$instance_variable_set("@"+n,t["$[]"](e))},a._s=o,a),n).call(e)},h.$members=function(){var t=this;return t.$class().$members()},h["$[]"]=function(t){var n,e=this;return(n=f.Integer["$==="](t))!==!1&&n!==r?(t["$>="](e.$members().$size())&&e.$raise(f.IndexError,"offset "+t+" too large for struct(size:"+e.$members().$size()+")"),t=e.$members()["$[]"](t)):((n=e.$members()["$include?"](t.$to_sym()))===!1||n===r)&&e.$raise(f.NameError,"no member '"+t+"' in struct"),e.$instance_variable_get("@"+t)},h["$[]="]=function(t,n){var e,i=this;return(e=f.Integer["$==="](t))!==!1&&e!==r?(t["$>="](i.$members().$size())&&i.$raise(f.IndexError,"offset "+t+" too large for struct(size:"+i.$members().$size()+")"),t=i.$members()["$[]"](t)):((e=i.$members()["$include?"](t.$to_sym()))===!1||e===r)&&i.$raise(f.NameError,"no member '"+t+"' in struct"),i.$instance_variable_set("@"+t,n)},h.$each=c=function(){var n,i,a,o=this,u=c._p,s=u||r;return c._p=null,s===r?o.$enum_for("each"):(n=(i=o.$members()).$each,n._p=(a=function(n){var i,o=a._s||this;return null==n&&(n=r),i=t.$yield1(s,o["$[]"](n)),i===e?i:i},a._s=o,a),n).call(i)},h.$each_pair=l=function(){var n,i,a,o=this,u=l._p,s=u||r;return l._p=null,s===r?o.$enum_for("each_pair"):(n=(i=o.$members()).$each,n._p=(a=function(n){var i,o=a._s||this;return null==n&&(n=r),i=t.$yieldX(s,[n,o["$[]"](n)]),i===e?i:i},a._s=o,a),n).call(i)},h["$eql?"]=function(t){var n,e,i,a,o=this;return(n=o.$hash()["$=="](t.$hash()))!==!1&&n!==r?n:(e=(i=t.$each_with_index())["$all?"],e._p=(a=function(t,n){var e=a._s||this;return null==t&&(t=r),null==n&&(n=r),e["$[]"](e.$members()["$[]"](n))["$=="](t)},a._s=o,a),e).call(i)},h.$length=function(){var t=this;return t.$members().$length()},t.defn($,"$size",h.$length),h.$to_a=function(){var t,n,e,i=this;return(t=(n=i.$members()).$map,t._p=(e=function(t){var n=e._s||this;return null==t&&(t=r),n["$[]"](t)},e._s=i,e),t).call(n)},t.defn($,"$values",h.$to_a),h.$inspect=function(){var t,n,e,i=this,a=r;return a="#<struct ",i.$class()["$=="](f.Struct)&&(a=a["$+"](""+i.$class().$name()+" ")),a=a["$+"]((t=(n=i.$each_pair()).$map,t._p=(e=function(t,n){return e._s||this,null==t&&(t=r),null==n&&(n=r),""+t+"="+n.$inspect()},e._s=i,e),t).call(n).$join(", ")),a=a["$+"](">")},r}(n,null)}(Opal),function(t){var n=t.top,r=t,e=t.nil,i=(t.breaker,t.slice),a=t.klass,o=t.module,u=t.gvars;return t.add_stubs(["$write","$join","$map","$String","$getbyte","$getc","$raise","$new","$puts","$to_s"]),function(n,r){function s(){}var c=s=a(n,r,"IO",s),l=(s._proto,s._scope);return t.cdecl(l,"SEEK_SET",0),t.cdecl(l,"SEEK_CUR",1),t.cdecl(l,"SEEK_END",2),function(n){var r=o(n,"Writable"),a=r._proto;r._scope,a["$<<"]=function(t){var n=this;return n.$write(t),n},a.$print=function(t){var n,r,a,o=this;return t=i.call(arguments,0),o.$write((n=(r=t).$map,n._p=(a=function(t){var n=a._s||this;return null==t&&(t=e),n.$String(t)},a._s=o,a),n).call(r).$join(u[","]))},a.$puts=function(t){var n,r,a,o=this;return t=i.call(arguments,0),o.$write((n=(r=t).$map,n._p=(a=function(t){var n=a._s||this;return null==t&&(t=e),n.$String(t)},a._s=o,a),n).call(r).$join(u["/"]))},t.donate(r,["$<<","$print","$puts"])}(c),function(n){var r=o(n,"Readable"),i=r._proto,a=r._scope;i.$readbyte=function(){var t=this;return t.$getbyte()},i.$readchar=function(){var t=this;return t.$getc()},i.$readline=function(t){var n=this;return null==t&&(t=u["/"]),n.$raise(a.NotImplementedError)},i.$readpartial=function(t,n){var r=this;return null==n&&(n=e),r.$raise(a.NotImplementedError)},t.donate(r,["$readbyte","$readchar","$readline","$readpartial"])}(c)}(n,null),t.cdecl(r,"STDERR",u.stderr=r.IO.$new()),t.cdecl(r,"STDIN",u.stdin=r.IO.$new()),t.cdecl(r,"STDOUT",u.stdout=r.IO.$new()),t.defs(u.stdout,"$puts",function(t){var n,r=this;t=i.call(arguments,0);for(var a=0;t.length>a;a++)t[a]instanceof Array?(n=r).$puts.apply(n,[].concat(t[a])):console.log(t[a].$to_s());return e}),t.defs(u.stderr,"$puts",function(t){var n,r=this;t=i.call(arguments,0);for(var a=0;t.length>a;a++)t[a]instanceof Array?(n=r).$puts.apply(n,[].concat(t[a])):console.warn(t[a].$to_s());return e}),e}(Opal),function(t){var n=t.top,r=t,e=t.nil;return t.breaker,t.slice,t.add_stubs(["$include"]),t.defs(n,"$to_s",function(){return"main"}),t.defs(n,"$include",function(t){return r.Object.$include(t)}),e}(Opal),function(t){var n=t.top,r=t,e=t.nil,i=t.breaker,a=t.slice,o=t.module,u=t.range,s=t.hash2,c=t.klass,l=t.gvars;return t.add_stubs(["$try_convert","$native?","$respond_to?","$to_n","$raise","$map","$===","$Native","$end_with?","$define_method","$[]","$convert","$call","$to_proc","$new","$extend","$to_a","$to_ary","$include","$method_missing","$[]=","$slice","$-","$length","$==","$enum_for","$>=","$<<","$inspect","$each","$instance_variable_set","$members","$each_with_index","$each_pair","$name"]),function(n){var r,i=o(n,"Native"),c=i._proto,l=i._scope;t.defs(i,"$is_a?",function(t,n){try{return t instanceof l.Native.$try_convert(n)}catch(r){return!1}}),t.defs(i,"$try_convert",function(t){var n=this;return n["$native?"](t)?t:t["$respond_to?"]("to_n")?t.$to_n():e}),t.defs(i,"$convert",function(t){var n=this;return n["$native?"](t)?t:t["$respond_to?"]("to_n")?t.$to_n():(n.$raise(l.ArgumentError,"the passed value isn't a native"),void 0)}),t.defs(i,"$call",r=function(t,n,i){var o,u,s,c=this,l=r._p,$=l||e;i=a.call(arguments,2),r._p=null;var h=t[n];return null==h?e:h instanceof Function?($!==e&&i.push($),i=(o=(u=i).$map,o._p=(s=function(t){var n,r=s._s||this,i=e;return null==t&&(t=e),i=r.$try_convert(t),(n=e["$==="](i))!==!1&&n!==e?t:i},s._s=c,s),o).call(u),c.$Native(h.apply(t,i))):c["$native?"](h)?c.$Native(h):h}),function(n){var r=o(n,"Helpers"),i=r._proto,c=r._scope;i.$alias_native=function(t,n,r){var i,o,l,$,h,f,p,_=this,v=e;return null==n&&(n=t),null==r&&(r=s([],{})),(i=n["$end_with?"]("="))!==!1&&i!==e?(i=(o=_).$define_method,i._p=(l=function(t){var r=l._s||this;return null==r["native"]&&(r["native"]=e),null==t&&(t=e),r["native"][n["$[]"](u(0,-2,!1))]=c.Native.$convert(t),t},l._s=_,l),i).call(o,t):(i=v=r["$[]"]("as"))!==!1&&i!==e?(i=($=_).$define_method,i._p=(h=function(t){var r,i,o,u,s=h._s||this;return null==s["native"]&&(s["native"]=e),t=a.call(arguments,0),r=h._p||e,h._p=null,(i=value=(o=(u=c.Native).$call,o._p=r.$to_proc(),o).apply(u,[s["native"],n].concat(t)))!==!1&&i!==e?v.$new(value.$to_n()):e},h._s=_,h),i).call($,t):(i=(f=_).$define_method,i._p=(p=function(t){var r,i,o,u=p._s||this;return null==u["native"]&&(u["native"]=e),t=a.call(arguments,0),r=p._p||e,p._p=null,(i=(o=c.Native).$call,i._p=r.$to_proc(),i).apply(o,[u["native"],n].concat(t))},p._s=_,p),i).call(f,t)},t.donate(r,["$alias_native"])}(i),t.defs(i,"$included",function(t){return t.$extend(l.Helpers)}),c.$initialize=function(t){var n,r=this;return((n=l.Kernel["$native?"](t))===!1||n===e)&&l.Kernel.$raise(l.ArgumentError,"the passed value isn't native"),r["native"]=t},c.$to_n=function(){var t=this;return null==t["native"]&&(t["native"]=e),t["native"]},t.donate(i,["$initialize","$to_n"])}(n),function(n){var r,i=o(n,"Kernel"),u=i._proto,s=i._scope;u["$native?"]=function(t){return null==t||!t._klass},u.$Native=function(t){var n,r=this;return(n=null==t)!=!1&&n!==e?e:(n=r["$native?"](t))!==!1&&n!==e?s.Native._scope.Object.$new(t):t},u.$Array=r=function(t,n){var i,o,u=this,c=r._p,l=c||e;return n=a.call(arguments,1),r._p=null,null==t||t===e?[]:u["$native?"](t)?(i=(o=s.Native._scope.Array).$new,i._p=l.$to_proc(),i).apply(o,[t].concat(n)).$to_a():t["$respond_to?"]("to_ary")?t.$to_ary():t["$respond_to?"]("to_a")?t.$to_a():[t]},t.donate(i,["$native?","$Native","$Array"])}(n),function(n,r){function o(){}var u,l,$,h,f=o=c(n,r,"Object",o),p=o._proto,_=o._scope;return p["native"]=e,f.$include(_.Native),t.defn(f,"$==",function(t){var n=this;return n["native"]===_.Native.$try_convert(t)}),t.defn(f,"$has_key?",function(t){var n=this;return n["native"].hasOwnProperty(t)}),t.defn(f,"$key?",p["$has_key?"]),t.defn(f,"$include?",p["$has_key?"]),t.defn(f,"$member?",p["$has_key?"]),t.defn(f,"$each",u=function(n){var r,o=this,s=u._p,c=s||e;if(n=a.call(arguments,0),u._p=null,c!==e){for(var l in o["native"])(r=t.$yieldX(c,[l,o["native"][l]]))===i?i.$v:r;return o}return(r=o).$method_missing.apply(r,["each"].concat(n))}),t.defn(f,"$[]",function(n){var r,e=this,i=e["native"][n];return i instanceof Function?i:(null==(r=t.Object._scope.Native)?t.cm("Native"):r).$call(e["native"],n)}),t.defn(f,"$[]=",function(t,n){var r,i=this,a=e;return a=_.Native.$try_convert(n),i["native"][t]=(r=a===e)!=!1&&r!==e?n:a}),t.defn(f,"$method_missing",l=function(n,r){var i,o,u,s=this,c=l._p,$=c||e;return r=a.call(arguments,1),l._p=null,"="===n.charAt(n.length-1)?s["$[]="](n.$slice(0,n.$length()["$-"](1)),r["$[]"](0)):(i=(o=null==(u=t.Object._scope.Native)?t.cm("Native"):u).$call,i._p=$.$to_proc(),i).apply(o,[s["native"],n].concat(r))}),t.defn(f,"$nil?",function(){return!1}),t.defn(f,"$is_a?",function(t){return t["$=="](_.Native)}),t.defn(f,"$kind_of?",p["$is_a?"]),t.defn(f,"$instance_of?",function(t){return t["$=="](_.Native)}),t.defn(f,"$class",function(){var t=this;return t._klass}),t.defn(f,"$to_a",$=function(t){var n,r,i=this,a=$._p,o=a||e;return null==t&&(t=s([],{})),$._p=null,(n=(r=_.Native._scope.Array).$new,n._p=o.$to_proc(),n).call(r,i["native"],t).$to_a()
}),t.defn(f,"$to_ary",h=function(t){var n,r,i=this,a=h._p,o=a||e;return null==t&&(t=s([],{})),h._p=null,(n=(r=_.Native._scope.Array).$new,n._p=o.$to_proc(),n).call(r,i["native"],t)}),t.defn(f,"$inspect",function(){var t=this;return"#<Native:"+(t["native"]+"")+">"}),e}(r.Native,r.BasicObject),function(n,r){function a(){}var o,u,l=a=c(n,r,"Array",a),$=a._proto,h=a._scope;return $.named=$["native"]=$.get=$.block=$.set=$.length=e,l.$include(h.Native),l.$include(h.Enumerable),$.$initialize=o=function(n,r){var i,a=this,u=o._p,c=u||e;return null==r&&(r=s([],{})),o._p=null,t.find_super_dispatcher(a,"initialize",o,null).apply(a,[n]),a.get=(i=r["$[]"]("get"))!==!1&&i!==e?i:r["$[]"]("access"),a.named=r["$[]"]("named"),a.set=(i=r["$[]"]("set"))!==!1&&i!==e?i:r["$[]"]("access"),a.length=(i=r["$[]"]("length"))!==!1&&i!==e?i:"length",a.block=c,(i=null==a.$length())!=!1&&i!==e?a.$raise(h.ArgumentError,"no length found on the array-like object"):e},$.$each=u=function(){var n,r=this,a=u._p,o=a||e;if(u._p=null,(n=o)===!1||n===e)return r.$enum_for("each");for(var s=0,c=r.$length();c>s;s++){var l=t.$yield1(o,r["$[]"](s));if(l===i)return i.$v}return r},$["$[]"]=function(t){var n,r=this,i=e,a=e;return i=function(){return a=t,h.String["$==="](a)||h.Symbol["$==="](a)?(n=r.named)!==!1&&n!==e?r["native"][r.named](t):r["native"][t]:h.Integer["$==="](a)?(n=r.get)!==!1&&n!==e?r["native"][r.get](t):r["native"][t]:e}(),i!==!1&&i!==e?(n=r.block)!==!1&&n!==e?r.block.$call(i):r.$Native(i):e},$["$[]="]=function(t,n){var r,i=this;return(r=i.set)!==!1&&r!==e?i["native"][i.set](t,h.Native.$convert(n)):i["native"][t]=h.Native.$convert(n)},$.$last=function(t){var n=this,r=e,i=e;if(null==t&&(t=e),t!==!1&&t!==e){for(r=n.$length()["$-"](1),i=[];r["$>="](0);)i["$<<"](n["$[]"](r)),r=r["$-"](1);return i}return n["$[]"](n.$length()["$-"](1))},$.$length=function(){var t=this;return t["native"][t.length]},$.$to_ary=function(){var t=this;return t},$.$inspect=function(){var t=this;return t.$to_a().$inspect()},e}(r.Native,null),function(t,n){function r(){}r=c(t,n,"Numeric",r);var i=r._proto;return r._scope,i.$to_n=function(){var t=this;return t.valueOf()},e}(n,null),function(t,n){function r(){}r=c(t,n,"Proc",r);var i=r._proto;return r._scope,i.$to_n=function(){var t=this;return t},e}(n,null),function(t,n){function r(){}r=c(t,n,"String",r);var i=r._proto;return r._scope,i.$to_n=function(){var t=this;return t.valueOf()},e}(n,null),function(t,n){function r(){}r=c(t,n,"Regexp",r);var i=r._proto;return r._scope,i.$to_n=function(){var t=this;return t.valueOf()},e}(n,null),function(t,n){function r(){}r=c(t,n,"MatchData",r);var i=r._proto;return r._scope,i.matches=e,i.$to_n=function(){var t=this;return t.matches},e}(n,null),function(t,n){function r(){}r=c(t,n,"Struct",r);var i=r._proto;return r._scope,i.$initialize=function(t){var n,r,i,o,u,s=this,c=e;return t=a.call(arguments,0),(n=(r=t.$length()["$=="](1))?s["$native?"](t["$[]"](0)):r)!==!1&&n!==e?(c=t["$[]"](0),(n=(r=s.$members()).$each,n._p=(i=function(t){var n=i._s||this;return null==t&&(t=e),n.$instance_variable_set("@"+t,n.$Native(c[t]))},i._s=s,i),n).call(r)):(n=(o=s.$members()).$each_with_index,n._p=(u=function(n,r){var i=u._s||this;return null==n&&(n=e),null==r&&(r=e),i.$instance_variable_set("@"+n,t["$[]"](r))},u._s=s,u),n).call(o)},i.$to_n=function(){var t,n,r,i=this,a=e;return a={},(t=(n=i).$each_pair,t._p=(r=function(t,n){return r._s||this,null==t&&(t=e),null==n&&(n=e),a[t]=n.$to_n()},r._s=i,r),t).call(n),a},e}(n,null),function(t,n){function r(){}r=c(t,n,"Array",r);var i=r._proto;return r._scope,i.$to_n=function(){for(var t=this,n=[],r=0,e=t.length;e>r;r++){var i=t[r];i["$respond_to?"]("to_n")?n.push(i.$to_n()):n.push(i)}return n},e}(n,null),function(t,n){function r(){}r=c(t,n,"Boolean",r);var i=r._proto;return r._scope,i.$to_n=function(){var t=this;return t.valueOf()},e}(n,null),function(t,n){function r(){}r=c(t,n,"Time",r);var i=r._proto;return r._scope,i.$to_n=function(){var t=this;return t},e}(n,null),function(t,n){function r(){}r=c(t,n,"NilClass",r);var i=r._proto;return r._scope,i.$to_n=function(){return null},e}(n,null),function(t,n){function r(){}r=c(t,n,"Hash",r);var i,a=r._proto,o=r._scope;return a.$initialize=i=function(t){var n=this,r=i._p,a=r||e;if(i._p=null,null!=t)if(t.constructor===Object){var u=n.map,s=n.keys;for(var c in t){var l=t[c];u[c]=l&&l.constructor===Object?o.Hash.$new(l):n.$Native(t[c]),s.push(c)}}else n.none=t;else a!==e&&(n.proc=a);return n},a.$to_n=function(){for(var t=this,n={},r=t.keys,e=t.map,i=0,a=r.length;a>i;i++){var o=r[i],u=e[o];n[o]=u["$respond_to?"]("to_n")?u.$to_n():u}return n},e}(n,null),function(t,n){function r(){}r=c(t,n,"Module",r);var i=r._proto;return r._scope,i.$native_module=function(){var t=this;return Opal.global[t.$name()]=t},e}(n,null),function(n,r){function e(){}var i=e=c(n,r,"Class",e),a=e._proto;return e._scope,a.$native_alias=function(t,n){var r=this;return r._proto[t]=r._proto["$"+n]},t.defn(i,"$native_class",a.$native_module)}(n,null),l.$=l.global=n.$Native(Opal.global)}(Opal),function(t){var n=(t.top,t),r=t.nil,e=(t.breaker,t.slice,t.gvars),i=t.hash2;return t.add_stubs(["$new"]),e["&"]=e["~"]=e["`"]=e["'"]=r,e[":"]=[],e['"']=[],e["/"]="\n",e[","]=" ",t.cdecl(n,"ARGV",[]),t.cdecl(n,"ARGF",n.Object.$new()),t.cdecl(n,"ENV",i([],{})),e.VERBOSE=!1,e.DEBUG=!1,e.SAFE=0,t.cdecl(n,"RUBY_PLATFORM","opal"),t.cdecl(n,"RUBY_ENGINE","opal"),t.cdecl(n,"RUBY_VERSION","1.9.3"),t.cdecl(n,"RUBY_ENGINE_VERSION","0.5.5"),t.cdecl(n,"RUBY_RELEASE_DATE","2013-11-25")}(Opal);

// lib/cqls/cqls.js
(function($opal){var self=$opal.top,$scope=$opal,nil=$opal.nil,$breaker=$opal.breaker,$slice=$opal.slice,$module=$opal.module,$klass=$opal.klass,$hash2=$opal.hash2,$range=$opal.range;return $opal.add_stubs(["$attr_accessor","$new","$[]","$addChild","$<<","$shape","$plot=","$graph=","$add","$>=","$each","$call","$method","$to_Y","$+","$*","$-","$empty?","$xylim","$zoom","$syncedChildren","$synced?","$select","$include?","$[]=","$min","$map","$==","$max","$/","$update","$===","$id","$each_key","$showZoom","$<","$>","$to_s","$length","$initStep","$to_X","$mean","$dim","$maxPdf","$stdDev","$sample","$pdf","$type","$map!","$step","$y","$to_f","$abs","$set","$initDistrib","$setAsTransfOf","$bounds","$initXYLim","$adjust","$drawCont","$drawDisc","$**","$init","$draw","$distrib","$floor","$updateBounds","$reset","$drawCurve","$<=","$index","$inject","$acceptLevelNext","$dup","$counts","$density","$partBounds","$each_with_index","$graph","$syncTo","$setDistrib","$style","$attachCurve","$attachSummary","$setTransf","$setCurHist","$setMLevel","$setN","$active=","$setTCL","$show","$style=","$variance","$showTCL","$setDistribAs","$setDistribAsTransf","$xy","$setNbSim","$initTransfList","$name","$setTransfDistrib","$-@","$transfMode","$applyTransfByIndex","$applyTransfByValue","$allowLevelChange","$updateHistAEP","$aep","$hideAll","$drawMean","$drawSD","$playNextAfter","$addXY","$transitionInitHist","$transitionInitPts","$transitionInitRects","$transitionDrawPts","$transitionFallPts","$transitionHistPtsAndRects","$transitionInitTransf","$transitionInitPtsTransf","$transitionPtsTransf","$playLongDensityWithTransf","$playLongDensityBasic","$join","$qbounds","$quantile","$to_a"]),function($base){var self=$module($base,"Cqls"),def=self._proto,$scope=self._scope;(function(t,n){function r(){}var e=r=$klass(t,n,"Plot",r),i=r._proto,a=r._scope;return i.dim=i.frame=i.style=i.axisShape=i.updateCalls=i.graph=i.parent=nil,e.$attr_accessor("parent","frame","style","graph","dim"),i.$initialize=function(t,n){var r,e=this;return null==t&&(t=$hash2(["x","y","w","h"],{x:0,y:0,w:cqls.i.dim.w,h:cqls.i.dim.h})),null==n&&(n=$hash2(["bg"],{bg:"#88FF88"})),r=[t,n],e.dim=r[0],e.style=r[1],e.parent=new createjs.Container,e.frame=new createjs.Shape,e.graph=a.Cqls._scope.Graph.$new(e.dim),e.updateCalls=[],e.frame.graphics.beginLinearGradientFill(["#FFF",e.style["$[]"]("bg")],[0,1],0,e.dim["$[]"]("y")+20,0,e.dim["$[]"]("y")+e.dim["$[]"]("h")+20).drawRect(e.dim["$[]"]("x"),e.dim["$[]"]("y"),e.dim["$[]"]("w"),e.dim["$[]"]("h")),e.$addChild(e.frame),e.axisShape=new createjs.Shape,e.$addChild(e.axisShape,[e,"drawAxis"])},i.$addChild=function(t,n,r){var e,i=this,a=nil;return null==n&&(n=nil),null==r&&(r=-1),a=t,n!==!1&&n!==nil&&i.updateCalls["$<<"]([t,n]),((e=null==t.shape)==!1||e===nil)&&(a=t.$shape(),t["$plot="](i),t["$graph="](i.graph),i.graph.$add(t)),r["$>="](0)?i.parent.addChildAt(a,r):i.parent.addChild(a)},i.$update=function(){var t,n,r,e=this;return(t=(n=e.updateCalls).$each,t._p=(r=function(t,n){var e,i=(r._s||this,nil);return null==t&&(t=nil),null==n&&(n=nil),i=n["$[]"](2),((e=i)===!1||e===nil)&&(i=[]),(e=n["$[]"](0).$method(n["$[]"](1))).$call.apply(e,[].concat(i))},r._s=e,r),t).call(n)},i.$drawAxis=function(){var t=this;return t.axisShape.graphics.ss(3,2).s("#000").mt(t.dim["$[]"]("x"),t.graph.$to_Y(0)).lt(t.dim["$[]"]("x")["$+"](t.dim["$[]"]("w")),t.graph.$to_Y(0)).es()},nil})(self,null),function(t,n){function r(){}var e=r=$klass(t,n,"Graph",r),i=r._proto,a=r._scope;return i.xylim0=i.list=i.synced=i.xylim=i.zoom=i.dim=i.marg=i.tr=i.syncedChildren=i.active=i.zoomShapes=nil,e.$attr_accessor("xylim","dim","active","syncedChildren","zoom","marg"),$opal.defs(a.Graph,"$adjust",function(t,n){var r=nil;return null==n&&(n=0),r=t["$[]"](1)["$-"](t["$[]"](0))["$*"](n),[t["$[]"](0)["$-"](n),t["$[]"](1)["$+"](n)]}),i.$initialize=function(t,n,r,e){var i,a=this;return null==n&&(n=[]),null==r&&(r=[]),null==e&&(e=nil),i=[t,e],a.dim=i[0],a.style=i[1],a.marg=$hash2(["l","r","t","b"],{l:10,r:10,t:10,b:20}),a.xylim0=$hash2(["x","y"],{x:n,y:r}),i=[[],[]],a.list=i[0],a.active=i[1],((i=a.xylim0["$[]"]("x")["$empty?"]())===!1||i===nil)&&a.list["$<<"](a.xylim0),a.xylim=$hash2(["x","y"],{x:[],y:[]}),a.tr=$hash2([],{}),a.zoom=$hash2(["x0","x1","y0","y1","active"],{x0:0,x1:0,y0:0,y1:0,active:!1}),a.syncedChildren=[]},i.$syncTo=function(t){var n=this;return n.xylim=t.$xylim(),n.zoom=t.$zoom(),t.$syncedChildren()["$<<"](n),n.synced=!0},i["$synced?"]=function(){var t=this;return t.synced},i.$update=function(t){var n,r,e,i,a,s,o,u,l,$,c,h,f,p=this,_=nil;return null==t&&(t=p.active),((n=p["$synced?"]())===!1||n===nil)&&(_=(n=(r=p.list).$select,n._p=(e=function(n){var r;return e._s||this,null==n&&(n=nil),(r=t["$empty?"]())!==!1&&r!==nil?r:t["$include?"](n["$[]"](1))},e._s=p,e),n).call(r),p.xylim["$[]"]("x")["$[]="](0,(n=(i=_).$map,n._p=(a=function(t){var n=(a._s||this,nil);return null==t&&(t=nil),n=function(){return t["$[]"](0)["$=="]("element")?t["$[]"](2).$xylim():t["$[]"](2)}(),n["$[]"]("x")["$[]"](0)},a._s=p,a),n).call(i).$min()),p.xylim["$[]"]("x")["$[]="](1,(n=(s=_).$map,n._p=(o=function(t){var n=(o._s||this,nil);return null==t&&(t=nil),n=function(){return t["$[]"](0)["$=="]("element")?t["$[]"](2).$xylim():t["$[]"](2)}(),n["$[]"]("x")["$[]"](1)},o._s=p,o),n).call(s).$max()),p.xylim["$[]"]("y")["$[]="](0,(n=(u=_).$map,n._p=(l=function(t){var n=(l._s||this,nil);return null==t&&(t=nil),n=function(){return t["$[]"](0)["$=="]("element")?t["$[]"](2).$xylim():t["$[]"](2)}(),n["$[]"]("y")["$[]"](0)},l._s=p,l),n).call(u).$min()),p.xylim["$[]"]("y")["$[]="](1,(n=($=_).$map,n._p=(c=function(t){var n=(c._s||this,nil);return null==t&&(t=nil),n=function(){return t["$[]"](0)["$=="]("element")?t["$[]"](2).$xylim():t["$[]"](2)}(),n["$[]"]("y")["$[]"](1)},c._s=p,c),n).call($).$max())),n=[p.xylim["$[]"]("x")["$[]"](1)["$+"](p.zoom["$[]"]("x1"))["$-"](p.xylim["$[]"]("x")["$[]"](0))["$-"](p.zoom["$[]"]("x0"))["$/"](p.dim["$[]"]("w")["$-"](p.marg["$[]"]("l"))["$-"](p.marg["$[]"]("r"))),p.xylim["$[]"]("y")["$[]"](0)["$+"](p.zoom["$[]"]("y0"))["$-"](p.xylim["$[]"]("y")["$[]"](1))["$-"](p.zoom["$[]"]("y1"))["$/"](p.dim["$[]"]("h")["$-"](p.marg["$[]"]("t"))["$-"](p.marg["$[]"]("b")))],p.tr["$[]="]("ax",n[0]),p.tr["$[]="]("ay",n[1]),n=[p.xylim["$[]"]("x")["$[]"](0)["$+"](p.zoom["$[]"]("x0"))["$-"](p.tr["$[]"]("ax")["$*"](p.dim["$[]"]("x")["$+"](p.marg["$[]"]("l")))),p.xylim["$[]"]("y")["$[]"](1)["$+"](p.zoom["$[]"]("y1"))["$-"](p.tr["$[]"]("ay")["$*"](p.dim["$[]"]("y")["$+"](p.marg["$[]"]("t"))))],p.tr["$[]="]("bx",n[0]),p.tr["$[]="]("by",n[1]),(n=p.syncedChildren["$empty?"]())!==!1&&n!==nil?nil:(n=(h=p.syncedChildren).$each,n._p=(f=function(t){return f._s||this,null==t&&(t=nil),t.$update()},f._s=p,f),n).call(h)},i.$setActive=function(t){var n=this;return n.active=t},i.$add=function(t,n,r){var e,i=this,a=nil;return null==n&&(n="element"),null==r&&(r=nil),(e=i["$synced?"]())!==!1&&e!==nil?nil:function(){return a=n,"element"["$==="](a)?(e=t.$xylim())!==!1&&e!==nil?(i.list["$<<"](["element",(e=r)!==!1&&e!==nil?e:t.$id(),t]),i.$update()):nil:"xylim"["$==="](a)?(i.list["$<<"](["xylim",r,t]),i.$update()):nil}()},i.$addXYLim=function(t,n,r,e,i){var a=this;return a.$add($hash2(["x","y"],{x:[n,r],y:[e,i]}),"xylim",t)},i.$to_x=function(t){var n=this;return n.tr["$[]"]("ax")["$*"](t)["$+"](n.tr["$[]"]("bx"))},i.$to_X=function(t){var n=this;return t["$-"](n.tr["$[]"]("bx"))["$/"](n.tr["$[]"]("ax"))},i.$to_y=function(t){var n=this;return n.tr["$[]"]("ay")["$*"](t)["$+"](n.tr["$[]"]("by"))},i.$to_Y=function(t){var n=this;return t["$-"](n.tr["$[]"]("by"))["$/"](n.tr["$[]"]("ay"))},i.$to_local=function(t,n){var r=this;return[r.tr["$[]"]("ax")["$*"](t)["$+"](r.tr["$[]"]("bx")),r.tr["$[]"]("ay")["$*"](n)["$+"](r.tr["$[]"]("by"))]},i.$to_global=function(t,n){var r=this;return[t["$-"](r.tr["$[]"]("bx"))["$/"](r.tr["$[]"]("ax")),n["$-"](r.tr["$[]"]("by"))["$/"](r.tr["$[]"]("ay"))]},i.$zoomActive=function(){var t=this;return t.zoom["$[]"]("active")},i.$toggleZoomTo=function(t,n){var r,e,i,a,s,o,u,l=this,$=nil;return null==n&&(n=["xpos","xneg","ypos","reset"]),l.zoom["$[]="]("active",(r=l.zoom["$[]"]("active"),r===nil||r===!1)),(r=l.zoom["$[]"]("active"))!==!1&&r!==nil?(((r=l.zoomShapes)===!1||r===nil)&&(l.zoomShapes=$hash2([],{}),$=[],(r=n["$include?"]("xpos"))!==!1&&r!==nil&&($=$["$+"](["xposmore","xposless"])),(r=n["$include?"]("xneg"))!==!1&&r!==nil&&($=$["$+"](["xnegmore","xnegless"])),(r=n["$include?"]("ypos"))!==!1&&r!==nil&&($=$["$+"](["yposmore","yposless"])),(r=n["$include?"]("yneg"))!==!1&&r!==nil&&($=$["$+"](["ynegmore","ynegless"])),(r=n["$include?"]("reset"))!==!1&&r!==nil&&($=$["$+"](["reset"])),(r=(e=$).$each,r._p=(i=function(t){var n=i._s||this;return null==n.zoomShapes&&(n.zoomShapes=nil),null==t&&(t=nil),n.zoomShapes["$[]="](t,new createjs.Shape)},i._s=l,i),r).call(e)),(r=(a=l.zoomShapes).$each_key,r._p=(s=function(n){var r=s._s||this;null==r.zoomShapes&&(r.zoomShapes=nil),null==n&&(n=nil),t.parent.addChild(r.zoomShapes["$[]"](n))},s._s=l,s),r).call(a),l.$showZoom()):(r=(o=l.zoomShapes).$each_key,r._p=(u=function(n){var r=u._s||this;null==r.zoomShapes&&(r.zoomShapes=nil),null==n&&(n=nil),t.parent.removeChild(r.zoomShapes["$[]"](n))},u._s=l,u),r).call(o)},i.$showZoom=function(){var t,n,r,e=this,i=nil,a=nil;return i=40,a=15,(t=(n=e.zoomShapes).$each_key,t._p=(r=function(t){var n=r._s||this,e=nil;return null==n.zoomShapes&&(n.zoomShapes=nil),null==n.dim&&(n.dim=nil),null==t&&(t=nil),n.zoomShapes["$[]"](t).alpha=.5,function(){return e=t,"xposmore"["$==="](e)?n.zoomShapes["$[]"]("xposmore").graphics.c().s("#000").f("#FFF").mt(n.dim["$[]"]("w")-1.5*i,n.dim["$[]"]("h")["$/"](2)-i["$/"](2)).lt(n.dim["$[]"]("w")-1.5*i,n.dim["$[]"]("h")["$/"](2)+i["$/"](2)).lt(n.dim["$[]"]("w")-.5*i,n.dim["$[]"]("h")["$/"](2)).cp():"xposless"["$==="](e)?n.zoomShapes["$[]"]("xposless").graphics.c().s("#000").f("#FFF").mt(n.dim["$[]"]("w")-1.5*i-a,n.dim["$[]"]("h")["$/"](2)-i["$/"](2)).lt(n.dim["$[]"]("w")-1.5*i-a,n.dim["$[]"]("h")["$/"](2)+i["$/"](2)).lt(n.dim["$[]"]("w")-2.5*i-a,n.dim["$[]"]("h")["$/"](2)).cp():"xnegmore"["$==="](e)?n.zoomShapes["$[]"]("xnegmore").graphics.c().s("#000").f("#FFF").mt(1.5*i,n.dim["$[]"]("h")["$/"](2)-i["$/"](2)).lt(1.5*i,n.dim["$[]"]("h")["$/"](2)+i["$/"](2)).lt(.5*i,n.dim["$[]"]("h")["$/"](2)).cp():"xnegless"["$==="](e)?n.zoomShapes["$[]"]("xnegless").graphics.c().s("#000").f("#FFF").mt(1.5*i+a,n.dim["$[]"]("h")["$/"](2)-i["$/"](2)).lt(1.5*i+a,n.dim["$[]"]("h")["$/"](2)+i["$/"](2)).lt(2.5*i+a,n.dim["$[]"]("h")["$/"](2)).cp():"ynegmore"["$==="](e)?n.zoomShapes["$[]"]("ynegmore").graphics.c().s("#000").f("#FFF").mt(n.dim["$[]"]("w")["$/"](2)-i["$/"](2),n.dim["$[]"]("h")-1.5*i).lt(n.dim["$[]"]("w")["$/"](2)+i["$/"](2),n.dim["$[]"]("h")-1.5*i).lt(n.dim["$[]"]("w")["$/"](2),n.dim["$[]"]("h")-.5*i).cp():"ynegless"["$==="](e)?n.zoomShapes["$[]"]("ynegless").graphics.c().s("#000").f("#FFF").mt(n.dim["$[]"]("w")["$/"](2)-i["$/"](2),n.dim["$[]"]("h")-1.5*i-a).lt(n.dim["$[]"]("w")["$/"](2)+i["$/"](2),n.dim["$[]"]("h")-1.5*i-a).lt(n.dim["$[]"]("w")["$/"](2),n.dim["$[]"]("h")-2.5*i-a).cp():"yposmore"["$==="](e)?n.zoomShapes["$[]"]("yposmore").graphics.c().s("#000").f("#FFF").mt(n.dim["$[]"]("w")["$/"](2)-i["$/"](2),1.5*i).lt(n.dim["$[]"]("w")["$/"](2)+i["$/"](2),1.5*i).lt(n.dim["$[]"]("w")["$/"](2),.5*i).cp():"yposless"["$==="](e)?n.zoomShapes["$[]"]("yposless").graphics.c().s("#000").f("#FFF").mt(n.dim["$[]"]("w")["$/"](2)-i["$/"](2),1.5*i+a).lt(n.dim["$[]"]("w")["$/"](2)+i["$/"](2),1.5*i+a).lt(n.dim["$[]"]("w")["$/"](2),2.5*i+a).cp():"reset"["$==="](e)?n.zoomShapes["$[]"]("reset").graphics.c().s("#000").f("#FFF").drawRect(n.dim["$[]"]("w")["$/"](2)-i["$/"](2),n.dim["$[]"]("h")["$/"](2)-i["$/"](2),i,i):nil}()},r._s=e,r),t).call(n)},i.$hitZoom=function(t,n){var r,e,i,a,s=this,o=nil,u=nil,l=nil;return(r=s.zoom["$[]"]("active"))===!1||r===nil?nil:(o="none",(r=(e=s.zoomShapes).$each_key,r._p=(i=function(r){var e=i._s||this;return null==e.zoomShapes&&(e.zoomShapes=nil),null==r&&(r=nil),e.zoomShapes["$[]"](r).hitTest(t,n)&&(o=r),o["$=="]("none")?nil:($breaker.$v=nil,$breaker)},i._s=s,i),r).call(e),o["$=="]("none")?o:(u=.1["$/"](2),l=o,"xposmore"["$==="](l)?(r="x1",a=s.zoom,a["$[]="](r,a["$[]"](r)["$+"](u["$*"](s.xylim["$[]"]("x")["$[]"](1)["$-"](s.xylim["$[]"]("x")["$[]"](0)))))):"xposless"["$==="](l)?((r=s.zoom["$[]"]("x1")["$<"](u["$-"](1["$/"](2))["$*"](s.xylim["$[]"]("x")["$[]"](1)["$-"](s.xylim["$[]"]("x")["$[]"](0)))))===!1||r===nil)&&s.zoom["$[]="]("x1",s.zoom["$[]"]("x1")["$-"](u["$*"](s.xylim["$[]"]("x")["$[]"](1)["$-"](s.xylim["$[]"]("x")["$[]"](0))))):"xnegmore"["$==="](l)?s.zoom["$[]="]("x0",s.zoom["$[]"]("x0")["$-"](u["$*"](s.xylim["$[]"]("x")["$[]"](1)["$-"](s.xylim["$[]"]("x")["$[]"](0))))):"xnegless"["$==="](l)?((r=s.zoom["$[]"]("x0")["$>"](1["$/"](2)["$-"](u)["$*"](s.xylim["$[]"]("x")["$[]"](1)["$-"](s.xylim["$[]"]("x")["$[]"](0)))))===!1||r===nil)&&(r="x0",a=s.zoom,a["$[]="](r,a["$[]"](r)["$+"](u["$*"](s.xylim["$[]"]("x")["$[]"](1)["$-"](s.xylim["$[]"]("x")["$[]"](0)))))):"yposmore"["$==="](l)?(r="y1",a=s.zoom,a["$[]="](r,a["$[]"](r)["$+"](u["$*"](s.xylim["$[]"]("y")["$[]"](1)["$-"](s.xylim["$[]"]("y")["$[]"](0)))))):"yposless"["$==="](l)?((r=s.zoom["$[]"]("y1")["$<"](u["$-"](1["$/"](2))["$*"](s.xylim["$[]"]("y")["$[]"](1)["$-"](s.xylim["$[]"]("y")["$[]"](0)))))===!1||r===nil)&&s.zoom["$[]="]("y1",s.zoom["$[]"]("y1")["$-"](u["$*"](s.xylim["$[]"]("y")["$[]"](1)["$-"](s.xylim["$[]"]("y")["$[]"](0))))):"ynegmore"["$==="](l)?s.zoom["$[]="]("y0",s.zoom["$[]"]("y1")["$-"](u["$*"](s.xylim["$[]"]("y")["$[]"](1)["$-"](s.xylim["$[]"]("y")["$[]"](0))))):"ynegless"["$==="](l)?((r=s.zoom["$[]"]("y0")["$>"](1["$/"](2)["$-"](u)["$*"](s.xylim["$[]"]("y")["$[]"](1)["$-"](s.xylim["$[]"]("y")["$[]"](0)))))===!1||r===nil)&&(r="y0",a=s.zoom,a["$[]="](r,a["$[]"](r)["$+"](u["$*"](s.xylim["$[]"]("y")["$[]"](1)["$-"](s.xylim["$[]"]("y")["$[]"](0)))))):"reset"["$==="](l)&&s.zoom["$[]="]("x0",s.zoom["$[]="]("x1",s.zoom["$[]="]("y0",s.zoom["$[]="]("y1",0)))),o))},nil}(self,null),function(t,n){function r(){}var e=r=$klass(t,n,"Child",r),i=r._proto;return r._scope,e.$attr_accessor("id","plot","graph","shape","style","xylim"),i.$initialize=function(){return nil},nil}(self,null),function(t,n){function r(){}var e=r=$klass(t,n,"Curve",r),i=r._proto,a=r._scope;return i.type=i.bounds=i.x=i.length=i.plot=i.summaryShapes=i.graph=i.distrib=i.step=i.y=i.shape=i.style=nil,e.$attr_accessor("distrib","bounds","kind","type","style"),i.$initialize=function(t,n,r,e,i){var a,s,o=this,u=nil;return null==t&&(t=nil),null==n&&(n="cont"),null==r&&(r=[0,1]),null==e&&(e=$hash2(["close","stroke","fill","thickness"],{close:!0,stroke:"#000",fill:"rgba(200,200,255,0.5)",thickness:3})),null==i&&(i=512),((a=null==(s=$opal.cvars["@@curveCpt"])?nil:s)===!1||a===nil)&&($opal.cvars["@@curveCpt"]=-1),o.id=(a=t)!==!1&&a!==nil?a:"curve"["$+"](($opal.cvars["@@curveCpt"]=(null==(s=$opal.cvars["@@curveCpt"])?nil:s)["$+"](1)).$to_s()),o.type=n,u=o.type,"cont"["$==="](u)?(a=[r,i],o.bounds=a[0],o.length=a[1]):"disc"["$==="](u)&&(o.bounds=r,o.length=o.bounds.$length(),o.$initStep()),o.style=e,o.shape=new createjs.Shape,o.x=jStat.seq(o.bounds["$[]"](0),o.bounds["$[]"](1),o.length),o.kind="density",o.summaryShapes=[new createjs.Shape,new createjs.Shape]},i.$attachSummary=function(){var t=this;return t.plot.$addChild(t.summaryShapes["$[]"](0),[t,"drawMean"]),t.plot.$addChild(t.summaryShapes["$[]"](1),[t,"drawSD"])},i.$drawMean=function(){var t=this;return t.summaryShapes["$[]"](0).visible=!0,t.summaryShapes["$[]"](0).graphics.c().s("#000").ss(1).mt(t.graph.$to_X(t.distrib.$mean()),t.graph.$dim()["$[]"]("y")).lt(t.graph.$to_X(t.distrib.$mean()),t.graph.$dim()["$[]"]("y")["$+"](t.graph.$dim()["$[]"]("h")))},i.$drawSD=function(){var t,n=this,r=nil,e=nil,i=nil;t=[10,10],r=t[0],e=t[1],i=n.distrib.$maxPdf()["$/"](2),n.type["$=="]("disc")&&(i=i["$/"](n.step)),i=n.graph.$to_Y(i),n.summaryShapes["$[]"](1).visible=!0,n.summaryShapes["$[]"](1).graphics.c().s("#000").ss(1).mt(n.graph.$to_X(n.distrib.$mean()["$-"](n.distrib.$stdDev()))+r,i-e).lt(n.graph.$to_X(n.distrib.$mean()["$-"](n.distrib.$stdDev())),i).lt(n.graph.$to_X(n.distrib.$mean()["$-"](n.distrib.$stdDev()))+r,i+e).mt(n.graph.$to_X(n.distrib.$mean()["$-"](n.distrib.$stdDev())),i).lt(n.graph.$to_X(n.distrib.$mean()["$+"](n.distrib.$stdDev())),i).lt(n.graph.$to_X(n.distrib.$mean()["$+"](n.distrib.$stdDev()))-r,i-e).mt(n.graph.$to_X(n.distrib.$mean()["$+"](n.distrib.$stdDev())),i).lt(n.graph.$to_X(n.distrib.$mean()["$+"](n.distrib.$stdDev()))-r,i+e)},i.$sample=function(t){var n=this;return null==t&&(t=1),n.distrib.$sample(t)},i.$y=function(t){var n,r,e,i=this,a=nil;return a=i.distrib.$pdf(t),i.distrib.$type()["$=="]("disc")&&(n=(r=a)["$map!"],n._p=(e=function(t){var n=e._s||this;return null==n.distrib&&(n.distrib=nil),null==t&&(t=nil),t["$/"](n.distrib.$step())},e._s=i,e),n).call(r),a=a.map(function(t){return Math.random()*t})},i.$xy=function(t){var n=this,r=nil,e=nil;return null==t&&(t=1),r=n.$sample(t),e=n.$y(r),$hash2(["x","y"],{x:r,y:e})},i.$initStep=function(){var t,n,r,e=this;return e.step=(t=(n=$range(1,e.bounds.$length(),!0)).$map,t._p=(r=function(t){var n=r._s||this;return null==n.bounds&&(n.bounds=nil),null==t&&(t=nil),n.bounds["$[]"](t)["$-"](n.bounds["$[]"](t["$-"](1))).$abs()},r._s=e,r),t).call(n).$min().$to_f()},i.$setDistrib=function(t,n){var r=this;return r.distrib=a.Distribution.$new(),r.distrib.$set(t,n),r.$initDistrib()},i.$setDistribAs=function(t){var n=this;return n.distrib=t,n.$initDistrib()},i.$setDistribAsTransf=function(t,n){var r=this;return r.distrib=a.Distribution.$new(),r.distrib.$setAsTransfOf(n,t),r.$initDistrib()},i.$initDistrib=function(){var t,n,r,e=this,i=nil;return e.type=e.distrib.$type(),e.bounds=e.distrib.$bounds(),i=e.type,"cont"["$==="](i)?e.x=jStat.seq(e.bounds["$[]"](0),e.bounds["$[]"](1),e.length):"disc"["$==="](i)&&(e.$initStep(),e.x=e.bounds),e.y=e.distrib.$pdf(e.x),e.type["$=="]("disc")&&(t=(n=e.y)["$map!"],t._p=(r=function(t){var n=r._s||this;return null==n.step&&(n.step=nil),null==t&&(t=nil),t["$/"](n.step)},r._s=e,r),t).call(n),e.$initXYLim()},i.$initXYLim=function(){var t=this,n=nil;return n=function(){return t.type["$=="]("cont")?t.bounds:[t.bounds["$[]"](0)["$-"](t.step["$/"](2)),t.bounds["$[]"](-1)["$+"](t.step["$/"](2))]}(),t.xylim=$hash2(["x","y"],{x:a.Graph.$adjust(n),y:a.Graph.$adjust([0,t.y.$max()])})},i.$draw=function(t,n,r){var e=this;return null==t&&(t=e.shape),null==n&&(n=e.graph),null==r&&(r=e.style),e.type["$=="]("cont")?e.$drawCont(t,n,r):e.$drawDisc(t,n,r)},i.$drawCont=function(t,n,r){var e,i,a,s=this;return null==t&&(t=s.shape),null==n&&(n=s.graph),null==r&&(r=s.style),t.graphics.clear(),r["$[]"]("close")&&t.graphics.f(r["$[]"]("fill")),t.graphics.s(r["$[]"]("stroke")).ss(r["$[]"]("thickness")),t.graphics.mt(n.$to_X(s.x["$[]"](0)),n.$to_Y(0)),(e=(i=$range(0,s.x.$length(),!0)).$each,e._p=(a=function(r){var e=a._s||this;return null==e.x&&(e.x=nil),null==e.y&&(e.y=nil),null==r&&(r=nil),t.graphics.lt(n.$to_X(e.x["$[]"](r)),n.$to_Y(e.y["$[]"](r)))},a._s=s,a),e).call(i),t.graphics.lt(n.$to_X(s.x["$[]"](-1)),n.$to_Y(0)),(e=r["$[]"]("close"))!==!1&&e!==nil?t.graphics.cp():nil},i.$drawDisc=function(t,n,r){var e,i,a,s=this,o=nil;return null==t&&(t=s.shape),null==n&&(n=s.graph),null==r&&(r=s.style),o=s.step["$/"](2),t.graphics.clear(),r["$[]"]("close")&&t.graphics.f(r["$[]"]("fill")),t.graphics.s(r["$[]"]("stroke")).ss(r["$[]"]("thickness")),(e=(i=$range(0,s.x.$length(),!0)).$each,e._p=(a=function(e){var i,s=a._s||this;return null==s.x&&(s.x=nil),null==s.y&&(s.y=nil),null==e&&(e=nil),t.graphics.mt(n.$to_X(s.x["$[]"](e)["$-"](o)),n.$to_Y(0)).lt(n.$to_X(s.x["$[]"](e)["$-"](o)),n.$to_Y(s.y["$[]"](e))).lt(n.$to_X(s.x["$[]"](e)["$+"](o)),n.$to_Y(s.y["$[]"](e))).lt(n.$to_X(s.x["$[]"](e)["$+"](o)),n.$to_Y(0)),(i=r["$[]"]("close"))!==!1&&i!==nil?t.graphics.cp():nil},a._s=s,a),e).call(i)},nil}(self,$scope.Child),function(t,n){function r(){}var e=r=$klass(t,n,"Hist",r),i=r._proto;return r._scope,i.type=i.curve=i.curveShape=i.graph=i.style=i.plot=i.summaryShapes=i.nbTot=i.mean=i.step=i.sd=i.bounds=i.nbPart=i.levelNext=i.levels=i.cpt=i.level=i.shape=i.aep=nil,e.$attr_accessor("bounds","level","levels","nbPart","nbTot","curveShape","type","aep","style"),i.$initialize=function(t,n,r,e,i){var a,s,o=this,u=nil;return null==t&&(t=nil),null==n&&(n="cont"),null==r&&(r=[0,1]),null==e&&(e=$hash2(["hist","mean","sd","curve"],{hist:$hash2(["fill","stroke"],{fill:"rgba(100,100,255,0.5)",stroke:"#000000"}),mean:$hash2(["stroke","thickness"],{stroke:"rgba(100,100,255,1)",thickness:1}),sd:$hash2(["stroke","thickness","fill"],{stroke:"rgba(100,100,255,1)",thickness:1,fill:"rgba(100,100,255,1)"}),curve:$hash2(["close","fill","stroke","thickness"],{close:!1,fill:"#000",stroke:"rgba(0,0,0,.4)",thickness:3})})),null==i&&(i=8),((a=null==(s=$opal.cvars["@@histCpt"])?nil:s)===!1||a===nil)&&($opal.cvars["@@histCpt"]=-1),o.id=(a=t)!==!1&&a!==nil?a:"hist"["$+"](($opal.cvars["@@histCpt"]=(null==(s=$opal.cvars["@@histCpt"])?nil:s)["$+"](1)).$to_s()),o.type=n,u=o.type,"cont"["$==="](u)?(a=[r,i,4],o.bounds=a[0],o.levels=a[1],o.level=a[2],o.nbPart=2["$**"](i)):"disc"["$==="](u)&&(o.bounds=r),o.$init(),o.style=e,o.shape=new createjs.Shape,o.curveShape=new createjs.Shape,o.aep=$hash2([],{}),o.summaryShapes=[new createjs.Shape,new createjs.Shape]},i.$drawCurve=function(){var t=this;return t.curve.$draw(t.curveShape,t.graph,t.style["$[]"]("curve"))},i.$attachSummary=function(){var t=this;return t.plot.$addChild(t.summaryShapes["$[]"](0),[t,"drawMean"]),t.plot.$addChild(t.summaryShapes["$[]"](1),[t,"drawSD"])},i.$drawMean=function(){var t=this;return t.summaryShapes["$[]"](0).visible=t.nbTot["$>"](0),t.summaryShapes["$[]"](0).graphics.c().s(t.style["$[]"]("mean")["$[]"]("stroke")).ss(t.style["$[]"]("mean")["$[]"]("thickness")).mt(t.graph.$to_X(t.mean["$[]"](0)),t.graph.$dim()["$[]"]("y")).lt(t.graph.$to_X(t.mean["$[]"](0)),t.graph.$dim()["$[]"]("y")["$+"](t.graph.$dim()["$[]"]("h")))},i.$drawSD=function(){var t,n=this,r=nil,e=nil,i=nil;t=[10,10],r=t[0],e=t[1],i=n.curve.$distrib().$maxPdf()["$/"](2),n.type["$=="]("disc")&&(i=i["$/"](n.step)),i=n.graph.$to_Y(i),n.summaryShapes["$[]"](1).visible=n.nbTot["$>"](0),n.summaryShapes["$[]"](1).graphics.c().s(n.style["$[]"]("mean")["$[]"]("stroke")).ss(1).mt(n.graph.$to_X(n.mean["$[]"](0)["$-"](n.sd))+r,i-e).lt(n.graph.$to_X(n.mean["$[]"](0)["$-"](n.sd)),i).lt(n.graph.$to_X(n.mean["$[]"](0)["$-"](n.sd))+r,i+e).mt(n.graph.$to_X(n.mean["$[]"](0)["$-"](n.sd)),i).lt(n.graph.$to_X(n.mean["$[]"](0)["$+"](n.sd)),i).lt(n.graph.$to_X(n.mean["$[]"](0)["$+"](n.sd))-r,i-e).mt(n.graph.$to_X(n.mean["$[]"](0)["$+"](n.sd)),i).lt(n.graph.$to_X(n.mean["$[]"](0)["$+"](n.sd))-r,i+e)},i.$updateBounds=function(){var t=this;return t.bounds=t.curve.$bounds()},i.$init=function(){var t,n,r,e=this,i=nil;return i=e.type,"cont"["$==="](i)?(e.step=e.bounds["$[]"](1)["$-"](e.bounds["$[]"](0)).$to_f()["$/"](e.nbPart),t=[[0]["$*"](e.nbPart),0],e.cpt=t[0],e.nbTot=t[1],e.outside=[0]["$*"](2)):"disc"["$==="](i)&&(e.step=(t=(n=$range(1,e.bounds.$length(),!0)).$map,t._p=(r=function(t){var n=r._s||this;return null==n.bounds&&(n.bounds=nil),null==t&&(t=nil),n.bounds["$[]"](t)["$-"](n.bounds["$[]"](t["$-"](1))).$abs()},r._s=e,r),t).call(n).$min(),t=[[0]["$*"](e.bounds.$length()),0],e.cpt=t[0],e.nbTot=t[1],e.outside=[0]["$*"](2)),t=[[0,0],0],e.mean=t[0],e.sd=t[1]},i.$index=function(t){var n=this;return t["$-"](n.bounds["$[]"](0))["$/"](n.step).$floor()},i.$reset=function(t){var n=this;return null==t&&(t=nil),n.type=function(){return t!==!1&&t!==nil?t:n.curve.$type()}(),n.$updateBounds(),n.$init()},i.$attachCurve=function(t){var n=this;return n.curve=t,n.$reset(),n.graph.$add(n.curve),n.$drawCurve(),n.plot.$addChild(n.curveShape,[n,"drawCurve"],1),n.curveShape.visible=!1},i.$add=function(t){var n,r,e,i,a,s,o,u,l,$=this,c=nil;return c=$.type,"cont"["$==="](c)?(n=(r=t).$each,n._p=(e=function(t){var n,r,i=e._s||this;return null==i.bounds&&(i.bounds=nil),null==i.cpt&&(i.cpt=nil),null==i.outside&&(i.outside=nil),null==t&&(t=nil),(n=(r=i.bounds["$[]"](0)["$<="](t))?t["$<="](i.bounds["$[]"](-1)):r)!==!1&&n!==nil?(n=i.$index(t),r=i.cpt,r["$[]="](n,r["$[]"](n)["$+"](1))):(t["$<"](i.bounds["$[]"](0))&&(n=0,r=i.outside,r["$[]="](n,r["$[]"](n)["$+"](1))),t["$>"](i.bounds["$[]"](-1))?(n=1,r=i.outside,r["$[]="](n,r["$[]"](n)["$+"](1))):nil)},e._s=$,e),n).call(r):"disc"["$==="](c)&&(n=(i=t).$each,n._p=(a=function(t){var n,r,e=a._s||this,i=nil;return null==e.bounds&&(e.bounds=nil),null==e.cpt&&(e.cpt=nil),null==e.outside&&(e.outside=nil),null==t&&(t=nil),i=e.$index(t),(n=(r=0["$<="](i))?i["$<"](e.bounds.$length()):r)!==!1&&n!==nil?(n=i,r=e.cpt,r["$[]="](n,r["$[]"](n)["$+"](1))):(i["$<"](0)&&(n=0,r=e.outside,r["$[]="](n,r["$[]"](n)["$+"](1))),i["$>="](e.bounds.$length())?(n=1,r=e.outside,r["$[]="](n,r["$[]"](n)["$+"](1))):nil)},a._s=$,a),n).call(i),$.mean["$[]="](0,(n=(s=t).$inject,n._p=(o=function(t,n){return o._s||this,null==t&&(t=nil),null==n&&(n=nil),t=t["$+"](n)},o._s=$,o),n).call(s,$.nbTot.$to_f()["$*"]($.mean["$[]"](0)))),$.mean["$[]="](1,(n=(u=t).$inject,n._p=(l=function(t,n){return l._s||this,null==t&&(t=nil),null==n&&(n=nil),t=t["$+"](n["$**"](2))},l._s=$,l),n).call(u,$.nbTot.$to_f()["$*"]($.mean["$[]"](1)))),$.nbTot=$.nbTot["$+"](t.$length()),$.mean["$[]="](0,$.mean["$[]"](0)["$/"]($.nbTot.$to_f())),$.mean["$[]="](1,$.mean["$[]"](1)["$/"]($.nbTot.$to_f())),$.sd=Math.sqrt($.mean["$[]"](1)["$-"]($.mean["$[]"](0)["$**"](2)))},i.$level=function(t,n){var r,e,i=this,a=nil;return null==t&&(t=0),null==n&&(n="inc"),i.type["$=="]("disc")?nil:(r=(e=n["$=="]("inc"))?t["$=="](0):e)!==!1&&r!==nil?i.levelNext:(a=function(){return n["$=="]("inc")?i.levelNext:0}()["$+"](t),a["$<"](0)&&(a=0),a["$>"](i.levels)&&(a=i.levels),i.levelNext=a,i.$acceptLevelNext(),i.levelNext)},i.$acceptLevelNext=function(){var t,n=this;return(t=cqls.i.allowLevelChange)!==!1&&t!==nil?n.level=n.levelNext:nil},i.$counts=function(){var t,n,r,e=this,i=nil;return e.type["$=="]("disc")?e.cpt.$dup():(i=[0]["$*"](2["$**"](e.level)),(t=(n=$range(0,e.nbPart,!0)).$each,t._p=(r=function(t){var n,e,a=r._s||this;return null==a.levels&&(a.levels=nil),null==a.level&&(a.level=nil),null==a.cpt&&(a.cpt=nil),null==t&&(t=nil),n=t["$/"](2["$**"](a.levels["$-"](a.level))),e=i,e["$[]="](n,e["$[]"](n)["$+"](a.cpt["$[]"](t)))},r._s=e,r),t).call(n),i)},i.$prob=function(){var t,n,r,e=this;return(t=(n=e.$counts()).$map,t._p=(r=function(t){var n=r._s||this;return null==n.nbTot&&(n.nbTot=nil),null==t&&(t=nil),t.$to_f()["$/"](n.nbTot.$to_f())},r._s=e,r),t).call(n)},i.$density=function(t){var n,r,e,i=this,a=nil,s=nil,o=nil;return null==t&&(t=nil),a=i.$counts(),s=function(){return i.type["$=="]("cont")?i.step["$*"](2["$**"](i.levels["$-"](i.level))):i.step}(),o=function(){return t!==!1&&t!==nil?t:i.nbTot}(),(n=(r=a).$map,n._p=(e=function(t){return e._s||this,null==t&&(t=nil),t.$to_f()["$/"](o.$to_f())["$/"](s)},e._s=i,e),n).call(r)},i.$partBounds=function(){var t,n,r,e,i,a=this,s=nil,o=nil,u=nil;return function(){return s=a.type,"cont"["$==="](s)?(o=a.step["$*"](2["$**"](a.levels["$-"](a.level))),(t=(n=$range(0,2["$**"](a.level),!0)).$map,t._p=(r=function(t){var n=r._s||this;return null==n.bounds&&(n.bounds=nil),null==t&&(t=nil),n.bounds["$[]"](0)["$+"](t["$*"](o))},r._s=a,r),t).call(n)["$+"]([a.bounds["$[]"](1)])):"disc"["$==="](s)?(u=a.step["$/"](2),(t=(e=a.bounds).$map,t._p=(i=function(t){return i._s||this,null==t&&(t=nil),t["$-"](u)},i._s=a,i),t).call(e)["$+"]([a.bounds["$[]"](-1)["$+"](u)])):nil}()},i.$draw=function(t){var n,r,e,i=this,a=nil,s=nil,o=nil;return null==t&&(t=nil),a=i.$density(t),s=i.$partBounds(),o=function(){return i.type["$=="]("cont")?2["$**"](i.level):i.bounds.$length()}(),i.shape.graphics.c().f(i.style["$[]"]("hist")["$[]"]("fill")).s(i.style["$[]"]("hist")["$[]"]("stroke")).mt(i.graph.$to_X(s["$[]"](0)),i.graph.$to_Y(0)),(n=(r=$range(0,o,!0)).$each,n._p=(e=function(t){var n=e._s||this;null==n.type&&(n.type=nil),null==n.shape&&(n.shape=nil),null==n.graph&&(n.graph=nil),null==t&&(t=nil),n.type["$=="]("disc")&&n.shape.graphics.lt(n.graph.$to_X(s["$[]"](t)),n.graph.$to_Y(0)),n.shape.graphics.lt(n.graph.$to_X(s["$[]"](t)),n.graph.$to_Y(a["$[]"](t))),n.shape.graphics.lt(n.graph.$to_X(s["$[]"](t["$+"](1))),n.graph.$to_Y(a["$[]"](t))),n.type["$=="]("disc")&&n.shape.graphics.lt(n.graph.$to_X(s["$[]"](t["$+"](1))),n.graph.$to_Y(0))},e._s=i,e),n).call(r),i.shape.graphics.lt(i.graph.$to_X(s["$[]"](-1)),i.graph.$to_Y(0)),i.shape.graphics.cp()},i.$updateHistAEP=function(t){var n,r,e,i,a,s=this,o=nil;return s.aep["$[]="]("cpt",s.$counts()),s.aep["$[]="]("step",function(){return s.type["$=="]("cont")?s.bounds["$[]"](1)["$-"](s.bounds["$[]"](0)).$to_f()["$/"](2["$**"](s.level).$to_f()):s.step}()),s.aep["$[]="]("nbTot",s.nbTot["$+"](t.$length())),n=[[],[]],s.aep["$[]="]("xRect",n[0]),s.aep["$[]="]("yRect",n[1]),function(){return o=s.type,"cont"["$==="](o)?(n=(r=t).$each_with_index,n._p=(e=function(t,n){var r,i,a=e._s||this,s=nil;return null==a.bounds&&(a.bounds=nil),null==a.aep&&(a.aep=nil),null==t&&(t=nil),null==n&&(n=nil),(r=(i=a.bounds["$[]"](0)["$<="](t))?t["$<="](a.bounds["$[]"](-1)):i)!==!1&&r!==nil?(s=t["$-"](a.bounds["$[]"](0))["$/"](a.aep["$[]"]("step")).$floor(),a.aep["$[]"]("xRect")["$[]="](n,a.bounds["$[]"](0)["$+"](a.aep["$[]"]("step")["$*"](s.$to_f()))),r=s,i=a.aep["$[]"]("cpt"),i["$[]="](r,i["$[]"](r)["$+"](1)),a.aep["$[]"]("yRect")["$[]="](n,a.aep["$[]"]("cpt")["$[]"](s).$to_f()["$/"](a.aep["$[]"]("nbTot").$to_f())["$/"](a.aep["$[]"]("step")))):(s=t["$-"](a.bounds["$[]"](0))["$/"](a.aep["$[]"]("step")).$floor(),a.aep["$[]"]("xRect")["$[]="](n,a.bounds["$[]"](0)["$+"](a.aep["$[]"]("step")["$*"](s.$to_f()))),a.aep["$[]"]("yRect")["$[]="](n,0))},e._s=s,e),n).call(r):"disc"["$==="](o)?(n=(i=t).$each_with_index,n._p=(a=function(t,n){var r,e,i=a._s||this,s=nil;return null==i.bounds&&(i.bounds=nil),null==i.aep&&(i.aep=nil),null==t&&(t=nil),null==n&&(n=nil),s=i.$index(t),(r=(e=0["$<="](s))?s["$<"](i.bounds.$length()):e)!==!1&&r!==nil?(i.aep["$[]"]("xRect")["$[]="](n,i.bounds["$[]"](s)["$-"](i.aep["$[]"]("step")["$/"](2))),r=s,e=i.aep["$[]"]("cpt"),e["$[]="](r,e["$[]"](r)["$+"](1)),i.aep["$[]"]("yRect")["$[]="](n,i.aep["$[]"]("cpt")["$[]"](s).$to_f()["$/"](i.aep["$[]"]("nbTot").$to_f())["$/"](i.aep["$[]"]("step")))):(i.aep["$[]"]("xRect")["$[]="](n,t["$-"](i.aep["$[]"]("step")["$/"](2))),i.aep["$[]"]("yRect")["$[]="](n,0))},a._s=s,a),n).call(i):nil}()},nil}(self,$scope.Child),function(t,n){function r(){}var e=r=$klass(t,n,"Play",r),a=r._proto,s=r._scope;return a.plotExp=a.plotHist=a.graphHist=a.graphExp=a.exp=a.hist=a.transf=a.checkTCL=a.expCur=a.stage=a.x=a.y=a.mLevel=a.mLevels=a.n=a.transfList=a.curIndHist=a.histCur=a.ind=a.aep=a.w=a.h=a.wX=a.hY=a.time=a.nbSim=nil,e.$attr_accessor("exp"),a.$initialize=function(t,n){var r,e=this;for(null==t&&(t=cqls.s.plot),null==n&&(n=cqls.h.plot),cqls.actors={pt:[],rect:[],line:[]},cqls.tweens={pt:[],rect:[],line:[]},cqls.m.nbsSimMax=cqls.m.nbsSim["1000"][cqls.m.nbsSim["1000"].length-1],i=0;cqls.m.nbsSimMax>i;i++){var a=new createjs.Shape;cqls.actors.rect.push(a),a.visible=!1,cqls.m.stage.addChild(a)}for(i=0;cqls.m.nbsSimMax>i;i++){var o=new createjs.Shape;cqls.actors.line.push(o),o.visible=!1,cqls.m.stage.addChild(o)}for(i=0;cqls.m.nbsSimMax>i;i++){var u=new createjs.Shape;cqls.actors.pt.push(u),u.visible=!1,u.x=0,u.y=0,cqls.m.stage.addChild(u)}return e.stage=cqls.m.stage,r=[t,n],e.plotExp=r[0],e.plotHist=r[1],r=[e.plotExp.$graph(),e.plotHist.$graph()],e.graphExp=r[0],e.graphHist=r[1],e.graphHist.$syncTo(e.graphExp),e.exp=[s.Curve.$new(),s.Curve.$new()],e.$setDistrib(),e.$setDistrib("chi2",[10],1),e.plotExp.$addChild(e.exp["$[]"](0)),e.plotExp.$addChild(e.exp["$[]"](1)),e.exp["$[]"](1).$style()["$[]="]("fill",createjs.Graphics.getRGB(200,200,200,.3)),e.exp["$[]"](1).$style()["$[]="]("thickness",1),e.hist=[s.Hist.$new(),s.Hist.$new()],e.plotHist.$addChild(e.hist["$[]"](0)),e.plotHist.$addChild(e.hist["$[]"](1)),e.hist["$[]"](0).$attachCurve(e.exp["$[]"](0)),e.hist["$[]"](1).$attachCurve(e.exp["$[]"](1)),e.exp["$[]"](0).$attachSummary(),e.exp["$[]"](1).$attachSummary(),e.hist["$[]"](0).$attachSummary(),e.hist["$[]"](1).$attachSummary(),e.$setTransf(),e.$reset(),e.$setCurHist(),r=[[],[]],e.x=r[0],e.y=r[1],e.aep=[],r=[[],[],[],[]],e.w=r[0],e.h=r[1],e.wX=r[2],e.hY=r[3],e.style=$hash2(["fp","sp","fl","sl","fr","sr"],{fp:"#FFF",sp:"#000000",fl:"#FFF",sl:"#000000",fr:"rgba(100,100,255,0.8)",sr:"#000000"}),e.$setMLevel(3,"set"),e.$setN(1)
},a.$reset=function(t){var n,r,e,i=this;return null==t&&(t=[0]),(n=i.transf)!==!1&&n!==nil&&t["$<<"](1),i.graphExp["$active="](function(){return(n=i.transf)!==!1&&n!==nil?["curve0","curve1"]:["curve0"]}()),i.graphExp.$update(),i.plotExp.$update(),(n=(r=t).$each,n._p=(e=function(t){var n=e._s||this;return null==n.hist&&(n.hist=nil),null==n.exp&&(n.exp=nil),null==t&&(t=nil),n.hist["$[]"](t).$reset(),n.exp["$[]"](t).$draw(),n.hist["$[]"](t).$drawCurve(),n.hist["$[]"](t).$draw()},e._s=i,e),n).call(r),i.plotHist.$update(),i.$setCurHist(function(){return(n=i.transf)!==!1&&n!==nil?1:0}()),i.$setTCL(),i.$show()},a.$setTCL=function(){var t,n=this;return((t=n.checkTCL)===!1||t===nil)&&(n.checkTCL=s.Curve.$new(),n.checkTCL["$style="]($hash2(["close","stroke","fill","thickness"],{close:!0,stroke:"#000",fill:"rgba(100,200,255,0.5)",thickness:5})),n.plotHist.$addChild(n.checkTCL,[n.checkTCL,"draw"])),n.checkTCL.$setDistrib("normal",[n.expCur.$distrib().$mean(),Math.sqrt(n.expCur.$distrib().$variance())]),n.$showTCL(!1)},a.$showTCL=function(t){var n=this;null==t&&(t=!0),n.checkTCL.shape.visible=t,n.stage.update},a.$setDistrib=function(t,n,r){var e,i,a=this,s=nil;return null==t&&(t="normal"),null==n&&(n=nil),null==r&&(r=0),s=t,"discreteUniform"["$==="](s)?((e=n)===!1||e===nil)&&(n=[1,6,1]):"bernoulli"["$==="](s)?((e=n)===!1||e===nil)&&(n=[.15]):"binomial"["$==="](s)?((e=n)===!1||e===nil)&&(n=[5,.15]):"uniform"["$==="](s)?((e=n)===!1||e===nil)&&(n=[0,1]):"stdNormal"["$==="](s)?(t="normal",((e=n)===!1||e===nil)&&(n=[0,1])):"normal"["$==="](s)?((e=n)===!1||e===nil)&&(n=[2,.5]):"t"["$==="](s)?((e=n)===!1||e===nil)&&(n=[10]):"chi2"["$==="](s)?((e=n)===!1||e===nil)&&(n=[10]):"cauchy"["$==="](s)&&((e=n)===!1||e===nil)&&(n=[0,1]),a.exp["$[]"](r).$setDistrib(t,n),i=a.transf,(e=i!==!1&&i!==nil?r["$=="](0):i)!==!1&&e!==nil?a.$setTransf(a.transf["$[]"]("name")):nil},a.$setDistribAs=function(t,n){var r=this;return null==n&&(n=0),r.exp["$[]"](n).$setDistribAs(t)},a.$setTransfDistrib=function(t,n,r){var e=this;return null==r&&(r=0),e.exp["$[]"](r).$setDistribAsTransf(n,t)},a.$addXY=function(t,n){var r,e=this,i=nil;return null==t&&(t=1),null==n&&(n=0),i=e.exp["$[]"](n).$xy(t),r=[i["$[]"]("x"),i["$[]"]("y")],e.x["$[]="](n,r[0]),e.y["$[]="](n,r[1])},a.$setN=function(t){var n,r=this;return r.n=t,(n=r.transf)!==!1&&n!==nil&&r.$setTransf(r.transf["$[]"]("name")),r.$setNbSim()},a.$setMLevel=function(t,n){var r,e,i=this;return null==t&&(t=3),null==n&&(n="inc"),(r=(e=n["$=="]("inc"))?t["$=="](0):e)!==!1&&r!==nil?i.mLevel:(((r=i.mLevels)===!1||r===nil)&&(i.mLevels=[1,3,5,10,30,100,1e3,3e3]),i.mLevel=function(){return n["$=="]("inc")?i.mLevel:0}()["$+"](t),i.mLevel["$<"](0)&&(i.mLevel=0),i.mLevel["$>"](i.mLevels.$length()["$-"](1))&&(i.mLevel=i.mLevels.$length()["$-"](1)),i.$setNbSim())},a.$setNbSim=function(){var t=this;return t.nbSim=[t.n["$*"](t.mLevels["$[]"](t.mLevel)),cqls.m.nbSimMax].$min()},a.$setTransf=function(t){var n,r=this,e=nil,i=nil,a=nil,o=nil;return null==t&&(t=nil),r.transf=t,r.transf["$=="]("none")&&(r.transf=nil),(n=r.transf)!==!1&&n!==nil?(r.n["$=="](1)&&(r.n=30,r.$setNbSim()),((n=r.transfList)===!1||n===nil)&&r.$initTransfList(),r.transf=r.transfList["$[]"](t),r.transf["$[]="]("name",t),e=r.exp["$[]"](0).$distrib(),function(){return i=r.transf["$[]"]("name"),"sum"["$==="](i)?(r.transf["$[]="]("args",[r.n]),r.exp["$[]"](0).$distrib().$name()["$=="]("bernoulli")?(r.transf["$[]="]("dist","exact"),r.$setDistrib("binomial",[r.n,e.$mean()],1)):r.exp["$[]"](0).$distrib().$name()["$=="]("normal")?(r.transf["$[]="]("dist","exact"),r.$setDistrib(a="normal",o=[r.n["$*"](e.$mean()),Math.sqrt(e.$variance()["$*"](r.n))],1)):e.$type()["$=="]("disc")?(r.transf["$[]="]("dist","exact"),r.$setTransfDistrib(e,r.transf,1)):r.n["$>="](30)?(r.transf["$[]="]("dist","approx"),r.$setDistrib(a="normal",o=[r.n["$*"](e.$mean()),Math.sqrt(e.$variance()["$*"](r.n))],1)):(r.transf["$[]="]("dist","xylim"),r.$setTransfDistrib(e,r.transf,1))):"mean"["$==="](i)?(r.transf["$[]="]("args",[r.n]),r.exp["$[]"](0).$distrib().$name()["$=="]("bernoulli")?(r.transf["$[]="]("dist","exact"),r.$setDistribAs(s.Distribution.$new("binomial",[r.n,e.$mean()],$hash2(["name","args"],{name:"locationScale",args:[0,1["$/"](r.n)]})),1)):r.exp["$[]"](0).$distrib().$name()["$=="]("normal")?(r.transf["$[]="]("dist","exact"),r.$setDistrib(a="normal",o=[e.$mean(),Math.sqrt(e.$variance()["$/"](r.n))],1)):r.exp["$[]"](0).$distrib().$name()["$=="]("cauchy")?(r.transf["$[]="]("dist","exact2"),r.$setDistrib(a="cauchy",o=[0,1],1)):e.$type()["$=="]("disc")?(r.transf["$[]="]("dist","exact"),r.$setTransfDistrib(e,r.transf,1)):r.n["$>="](30)?(r.transf["$[]="]("dist","approx"),r.$setDistrib(a="normal",o=[e.$mean(),Math.sqrt(e.$variance()["$/"](r.n))],1)):(r.transf["$[]="]("dist","xylim"),r.$setTransfDistrib(e,r.transf,1))):"stdMean"["$==="](i)?(r.transf["$[]="]("args",[e.$mean()]),r.exp["$[]"](0).$distrib().$name()["$=="]("normal")?(r.transf["$[]="]("dist","exact"),r.$setDistrib(a="t",o=[r.n["$-"](1)],1)):r.n["$>="](30)?(r.transf["$[]="]("dist","approx"),r.$setDistrib(a="normal",o=[0,1],1)):(r.transf["$[]="]("dist","xylim"),r.$setDistrib(a="normal",o=[0,1],1))):"sumOfSq"["$==="](i)?(r.transf["$[]="]("args",[r.n]),r.exp["$[]"](0).$distrib().$name()["$=="]("normal")?r.$setDistrib("chi2",[r.n],1):nil):"locationScale"["$==="](i)?(r.n=1,r.transf["$[]="]("dist","exact"),r.transf["$[]="]("args",[e.$mean()["$-@"](),1["$/"](Math.sqrt(e.$variance()))]),r.$setTransfDistrib(e,r.transf,1)):"center"["$==="](i)?(r.n=1,r.transf["$[]="]("dist","exact"),r.transf["$[]="]("transf","locationScale"),r.transf["$[]="]("args",[e.$mean()["$-@"](),1]),r.$setTransfDistrib(e,$hash2(["name","args"],{name:r.transf["$[]"]("transf"),args:r.transf["$[]"]("args")}),1)):nil}()):r.n=1},a.$transfMode=function(){var t,n=this;return(t=n.transf)!==!1&&t!==nil?n.transf["$[]"]("mode"):"none"},a.$initTransfList=function(){var t=this;return t.transfList=$hash2(["sum","mean","stdMean","sumOfSq","locationScale","addition","center"],{sum:$hash2(["args","mode"],{args:[],mode:"sample"}),mean:$hash2(["args","mode"],{args:[],mode:"sample"}),stdMean:$hash2(["args","mode"],{args:[],mode:"sample"}),sumOfSq:$hash2(["args","mode"],{args:[],mode:"sample"}),locationScale:$hash2(["args","mode"],{args:[],mode:"all"}),addition:$hash2(["args","mode"],{args:[],mode:"all"}),center:$hash2(["args","mode"],{args:[],mode:"all"})})},a.$applyTransfByValue=function(t){var n,r,e=this;return(n=e.$method(((r=e.transf["$[]"]("transf"))!==!1&&r!==nil?r:e.transf["$[]"]("name"))["$+"]("_transf"))).$call.apply(n,[t].concat(e.transf["$[]"]("args")))},a.$applyTransfByIndex=function(t,n){var r,e,i=this;return(r=i.$method(((e=i.transf["$[]"]("transf"))!==!1&&e!==nil?e:i.transf["$[]"]("name"))["$+"]("_transf_by_index"))).$call.apply(r,[t,n].concat(i.transf["$[]"]("args")))},a.$sum_transf=function(t){var n,r,e,i=this;return(n=(r=t).$inject,n._p=(e=function(t,n){return e._s||this,null==t&&(t=nil),null==n&&(n=nil),t=t["$+"](n)},e._s=i,e),n).call(r,0)},a.$sum_transf_by_index=function(t,n){var r,e,i,a=this;return(r=(e=t).$inject,r._p=(i=function(t,r){return i._s||this,null==t&&(t=nil),null==r&&(r=nil),t=t["$+"](n["$[]"](r))},i._s=a,i),r).call(e,0)},a.$mean_transf=function(t){var n,r,e,i=this;return(n=(r=t).$inject,n._p=(e=function(t,n){return e._s||this,null==t&&(t=nil),null==n&&(n=nil),t=t["$+"](n)},e._s=i,e),n).call(r,0)["$/"](i.n)},a.$mean_transf_by_index=function(t,n){var r,e,i,a=this;return(r=(e=t).$inject,r._p=(i=function(t,r){return i._s||this,null==t&&(t=nil),null==r&&(r=nil),t=t["$+"](n["$[]"](r))},i._s=a,i),r).call(e,0)["$/"](a.n)},a.$stdMean_transf=function(t,n){var r,e,i,a,s,o=this,u=nil,l=nil;return u=(r=(e=t).$inject,r._p=(i=function(t,n){return i._s||this,null==t&&(t=nil),null==n&&(n=nil),t=t["$+"](n)},i._s=o,i),r).call(e,0)["$/"](o.n),l=(r=(a=t).$inject,r._p=(s=function(t,n){return s._s||this,null==t&&(t=nil),null==n&&(n=nil),t=t["$+"](n["$**"](2))},s._s=o,s),r).call(a,0)["$/"](o.n),u["$-"](n)["$/"](Math.sqrt(l["$-"](u["$**"](2))/o.n["$-"](1)))},a.$stdMean_transf_by_index=function(t,n,r){var e,i,a,s,o,u=this,l=nil,$=nil;return l=(e=(i=t).$inject,e._p=(a=function(t,r){return a._s||this,null==t&&(t=nil),null==r&&(r=nil),t=t["$+"](n["$[]"](r))},a._s=u,a),e).call(i,0)["$/"](u.n),$=(e=(s=t).$inject,e._p=(o=function(t,r){return o._s||this,null==t&&(t=nil),null==r&&(r=nil),t=t["$+"](n["$[]"](r)["$**"](2))},o._s=u,o),e).call(s,0)["$/"](u.n),l["$-"](r)["$/"](Math.sqrt($["$-"](l["$**"](2))/u.n["$-"](1)))},a.$sumOfSq_transf=function(t){var n,r,e,i=this;return(n=(r=t).$inject,n._p=(e=function(t,n){return e._s||this,null==t&&(t=nil),null==n&&(n=nil),t=t["$+"](n["$**"](2))},e._s=i,e),n).call(r,0)},a.$sumOfSq_transf_by_index=function(t,n){var r,e,i,a=this;return(r=(e=t).$inject,r._p=(i=function(t,r){return i._s||this,null==t&&(t=nil),null==r&&(r=nil),t=t["$+"](n["$[]"](r)["$**"](2))},i._s=a,i),r).call(e,0)},a.$locationScale_transf=function(t){var n,r,e,i=this;return(n=(r=t).$map,n._p=(e=function(t){var n=e._s||this;return null==n.transf&&(n.transf=nil),null==t&&(t=nil),n.transf["$[]"]("args")["$[]"](0)["$+"](t["$*"](n.transf["$[]"]("args")["$[]"](1)))},e._s=i,e),n).call(r)},a.$locationScale_transf_by_index=function(t,n){var r,e,i,a=this;return(r=(e=t).$map,r._p=(i=function(t){var r=i._s||this;return null==r.transf&&(r.transf=nil),null==t&&(t=nil),r.transf["$[]"]("args")["$[]"](0)["$+"](n["$[]"](t)["$*"](r.transf["$[]"]("args")["$[]"](1)))},i._s=a,i),r).call(e)},a.$setCurHist=function(t){var n=this;return null==t&&(t=0),n.curIndHist=t,n.histCur=n.hist["$[]"](n.curIndHist),n.expCur=n.exp["$[]"](n.curIndHist)},a.$drawHist=function(){return nil},a.$allowLevelChange=function(t){var n=this;return cqls.i.allowLevelChange=t,t!==!1&&t!==nil?n.histCur.$acceptLevelNext():nil},a.$transitionInitTransf=function(t,n){var r,e,i,a,s,o,u,l,$,c,h,f,p,_,d,v=this,m=nil,g=nil;return null==t&&(t=0),null==n&&(n=1),v.$transfMode()["$=="]("sample")?(v.ind=[],(r=(e=$range(0,v.x["$[]"](t).$length()["$/"](v.n),!0)).$each,r._p=(i=function(t){var n=i._s||this;return null==n.ind&&(n.ind=nil),null==t&&(t=nil),n.ind["$<<"]([])},i._s=v,i),r).call(e),(r=(a=$range(0,v.x["$[]"](t).$length(),!0)).$each,r._p=(s=function(t){var n=s._s||this;return null==n.ind&&(n.ind=nil),null==n.n&&(n.n=nil),null==t&&(t=nil),n.ind["$[]"](t["$/"](n.n).$floor())["$<<"](t)},s._s=v,s),r).call(a),v.x["$[]="](n,[0]["$*"](v.x["$[]"](t).$length()["$/"](v.n))),v.col=[],(r=(o=v.ind).$each_with_index,r._p=(u=function(r,e){var i=u._s||this;return null==i.x&&(i.x=nil),null==i.col&&(i.col=nil),null==r&&(r=nil),null==e&&(e=nil),i.x["$[]"](n)["$[]="](e,i.$applyTransfByIndex(r,i.x["$[]"](t))),i.col["$[]="](e,[(256*Math.random()).$floor(),(256*Math.random()).$floor(),(256*Math.random()).$floor(),.8])},u._s=v,u),r).call(o),v.y["$[]="](n,v.exp["$[]"](n).$y(v.x["$[]"](n)))):v.$transfMode()["$=="]("all")?(v.ind=(r=(l=$range(0,v.x["$[]"](t).$length(),!0)).$map,r._p=($=function(t){return $._s||this,null==t&&(t=nil),[t]},$._s=v,$),r).call(l),v.x["$[]="](n,v.$applyTransfByValue(v.x["$[]"](t))),v.col=[[0,0,0,1]]["$*"](v.x["$[]"](n).$length()),v.y["$[]="](n,v.exp["$[]"](n).$y(v.x["$[]"](n))),m=(r=(c=v.exp["$[]"](t).$distrib().$pdf(v.x["$[]"](t))).$map,r._p=(h=function(n){var r=h._s||this;return null==r.exp&&(r.exp=nil),null==n&&(n=nil),n["$/"](r.exp["$[]"](t).$distrib().$step())},h._s=v,h),r).call(c),g=(r=(f=v.exp["$[]"](n).$distrib().$pdf(v.x["$[]"](n))).$map,r._p=(p=function(t){var r=p._s||this;return null==r.exp&&(r.exp=nil),null==t&&(t=nil),t["$/"](r.exp["$[]"](n).$distrib().$step())},p._s=v,p),r).call(f),v.y["$[]="](n,(r=(_=$range(0,v.x["$[]"](t).$length(),!0)).$map,r._p=(d=function(n){var r=d._s||this;return null==r.y&&(r.y=nil),null==n&&(n=nil),r.y["$[]"](t)["$[]"](n)["$/"](m["$[]"](n))["$*"](g["$[]"](n))},d._s=v,d),r).call(_))):nil},a.$transitionInitHist=function(t){var n,r=this;return r.$allowLevelChange(!1),r.hist["$[]"](t).$updateHistAEP(r.x["$[]"](t)),r.aep["$[]="](t,r.hist["$[]"](t).$aep()),n=[r.aep["$[]"](t)["$[]"]("step"),1["$/"](r.aep["$[]"](t)["$[]"]("nbTot").$to_f())["$/"](r.aep["$[]"](t)["$[]"]("step"))],r.w["$[]="](t,n[0]),r.h["$[]="](t,n[1]),n=[r.graphHist.$to_X(r.w["$[]"](t))["$-"](r.graphHist.$to_X(0)),r.graphHist.$to_Y(0)["$-"](r.graphHist.$to_Y(r.h["$[]"](t)))],r.wX["$[]="](t,n[0]),r.hY["$[]="](t,n[1])},a.$transitionInitPts=function(t){var n,r,e,i=this;return(n=(r=$range(0,i.x["$[]"](t).$length(),!0)).$each,n._p=(e=function(n){var r=e._s||this;return null==r.style&&(r.style=nil),null==r.hist&&(r.hist=nil),null==r.wX&&(r.wX=nil),null==n&&(n=nil),cqls.actors.pt[n].graphics.c().s(r.style["$[]"]("sp")).f(r.style["$[]"]("fp")).drawCircle(0,0,cqls.i.ptSize),cqls.tweens.pt[n]=createjs.Tween.get(cqls.actors.pt[n],{override:!0}),r.hist["$[]"](t).$type()["$=="]("disc")?(cqls.actors.line[n].graphics.c().s(r.style["$[]"]("sl")).f(r.style["$[]"]("fl")).drawRect(0,0,r.wX["$[]"](t),0),cqls.actors.line[n].regX=r.wX["$[]"](t)/2,cqls.tweens.line[n]=createjs.Tween.get(cqls.actors.line[n],{override:!0}),void 0):nil},e._s=i,e),n).call(r)},a.$transitionInitPtsTransf=function(t){var n,r,e,i,a,s=this;return(n=s.transf["$[]"]("mode")["$=="]("sample"))===!1||n===nil?nil:t["$=="](0)?(n=(r=s.ind).$each_with_index,n._p=(e=function(n,r){var i,a,s,o=e._s||this,u=nil;return null==o.col&&(o.col=nil),null==n&&(n=nil),null==r&&(r=nil),u="rgba("+o.col["$[]"](r)["$[]"](0)+","+o.col["$[]"](r)["$[]"](1)+","+o.col["$[]"](r)["$[]"](2)+","+o.col["$[]"](r)["$[]"](3)+")",(i=(a=n).$each,i._p=(s=function(n){var r=s._s||this;null==r.style&&(r.style=nil),null==r.wX&&(r.wX=nil),null==n&&(n=nil),cqls.actors.pt[n].graphics.c().s(r.style["$[]"]("sp")).f(u).drawCircle(0,0,cqls.i.ptSize),cqls.actors.line[n].graphics.c().s(u).f(r.style["$[]"]("fl")).drawRect(0,0,r.wX["$[]"](t),2)},s._s=o,s),i).call(a)},e._s=s,e),n).call(r):(n=(i=$range(0,s.x["$[]"](t).$length(),!0)).$each_with_index,n._p=(a=function(n){var r=a._s||this,e=nil;return null==r.col&&(r.col=nil),null==r.style&&(r.style=nil),null==r.hist&&(r.hist=nil),null==r.wX&&(r.wX=nil),null==n&&(n=nil),e="rgba("+r.col["$[]"](n)["$[]"](0)+","+r.col["$[]"](n)["$[]"](1)+","+r.col["$[]"](n)["$[]"](2)+","+r.col["$[]"](n)["$[]"](3)+")",cqls.actors.pt[n].graphics.c().s(r.style["$[]"]("sp")).f(e).drawCircle(0,0,cqls.i.ptSize),r.hist["$[]"](t).$type()["$=="]("disc")?(cqls.tweens.line[n].call(function(n){n._target.graphics.c().s(e).f(r.style["$[]"]("fl")).drawRect(0,0,r.wX["$[]"](t),2)}),void 0):nil},a._s=s,a),n).call(i)},a.$transitionInitRects=function(t){var n,r,e,i=this;return(n=(r=$range(0,i.x["$[]"](t).$length(),!0)).$each,n._p=(e=function(n){var r=e._s||this;null==r.graphHist&&(r.graphHist=nil),null==r.aep&&(r.aep=nil),null==r.plotHist&&(r.plotHist=nil),null==r.hY&&(r.hY=nil),null==r.style&&(r.style=nil),null==r.wX&&(r.wX=nil),null==n&&(n=nil),cqls.actors.rect[n].x=r.graphHist.$to_X(r.aep["$[]"](t)["$[]"]("xRect")["$[]"](n)),cqls.actors.rect[n].y=r.plotHist.$dim()["$[]"]("y"),cqls.actors.rect[n].regY=r.hY["$[]"](t)["$/"](2),cqls.actors.rect[n].graphics.c().f(r.style["$[]"]("fr")).s(r.style["$[]"]("sr")).drawRect(0,0,r.wX["$[]"](t),r.hY["$[]"](t)),cqls.tweens.rect[n]=createjs.Tween.get(cqls.actors.rect[n],{override:!0})},e._s=i,e),n).call(r),i.time=0},a.$transitionDrawPts=function(t,n){var r,e,i,a=this;return null==n&&(n=1e3),(r=(e=$range(0,a.x["$[]"](t).$length(),!0)).$each,r._p=(i=function(r){var e=i._s||this;return null==e.graphExp&&(e.graphExp=nil),null==e.x&&(e.x=nil),null==e.y&&(e.y=nil),null==e.hist&&(e.hist=nil),null==r&&(r=nil),cqls.tweens.pt[r].to({x:e.graphExp.$to_X(e.x["$[]"](t)["$[]"](r)),y:e.graphExp.$to_Y(e.y["$[]"](t)["$[]"](r))}).set({visible:!0}).wait(n),e.hist["$[]"](t).$type()["$=="]("disc")?(cqls.tweens.line[r].to({x:e.graphExp.$to_X(e.x["$[]"](t)["$[]"](r)),y:e.graphExp.$to_Y(e.y["$[]"](t)["$[]"](r))}).set({visible:!0}).wait(n),void 0):nil},i._s=a,i),r).call(e),a.time=a.time["$+"](n)},a.$transitionPtsTransf=function(t,n,r){var e,i,a,s=this;return null==t&&(t=1),null==n&&(n=1500),null==r&&(r=500),(e=(i=s.ind).$each_with_index,e._p=(a=function(e,i){var s,o,u,l=a._s||this,$=nil;return null==l.col&&(l.col=nil),null==e&&(e=nil),null==i&&(i=nil),$="rgba("+l.col["$[]"](i)["$[]"](0)+","+l.col["$[]"](i)["$[]"](1)+","+l.col["$[]"](i)["$[]"](2)+","+l.col["$[]"](i)["$[]"](3)+")",(s=(o=e).$each,s._p=(u=function(e){var a,s,o=u._s||this;null==o.graphExp&&(o.graphExp=nil),null==o.x&&(o.x=nil),null==o.y&&(o.y=nil),null==o.transf&&(o.transf=nil),null==o.hist&&(o.hist=nil),null==o.wX&&(o.wX=nil),null==o.style&&(o.style=nil),null==e&&(e=nil),cqls.tweens.pt[e].to({x:o.graphExp.$to_X(o.x["$[]"](t)["$[]"](i)),y:o.graphExp.$to_Y(o.y["$[]"](t)["$[]"](i))},n).wait(r).set({visible:!1}),s=o.transf,a=s!==!1&&s!==nil?o.hist["$[]"](0).$type()["$=="]("disc"):s,(a!==!1&&a!==nil?o.hist["$[]"](1).$type()["$=="]("disc"):a)&&cqls.tweens.line[e].call(function(n){n._target.regX=o.wX["$[]"](t)/2,n._target.graphics.c().s($).f(o.style["$[]"]("fl")).drawRect(0,0,o.wX["$[]"](t),2)}).to({x:o.graphExp.$to_X(o.x["$[]"](t)["$[]"](i)),y:o.graphExp.$to_Y(o.y["$[]"](t)["$[]"](i))},n).wait(r).set({visible:!1})},u._s=l,u),s).call(o)},a._s=s,a),e).call(i),s.time=s.time["$+"](n["$+"](r))},a.$transitionFallPts=function(t,n,r){var e,i,a,s=this;return null==n&&(n=2e3),null==r&&(r=1e3),(e=(i=$range(0,s.x["$[]"](t).$length(),!0)).$each,e._p=(a=function(e){var i=a._s||this;return null==i.plotHist&&(i.plotHist=nil),null==i.hist&&(i.hist=nil),null==e&&(e=nil),cqls.tweens.pt[e].to({y:i.plotHist.$dim()["$[]"]("y")},n,createjs.Ease.bounceOut).wait(r),i.hist["$[]"](t).$type()["$=="]("disc")?(cqls.tweens.line[e].to({y:i.plotHist.$dim()["$[]"]("y")},n,createjs.Ease.bounceOut).wait(r).set({visible:!1}),void 0):nil},a._s=s,a),e).call(i),s.time=s.time["$+"](n["$+"](r))},a.$transitionHistPtsAndRects=function(t,n,r,e,i){var a,s,o,u=this;return null==n&&(n=u.time),null==r&&(r=2e3),null==e&&(e=1e3),null==i&&(i=1e3),e=e["$+"](u.x["$[]"](t).$length()),(a=(s=$range(0,u.x["$[]"](t).$length(),!0)).$each,a._p=(o=function(a){var s=o._s||this;null==s.graphHist&&(s.graphHist=nil),null==s.aep&&(s.aep=nil),null==s.hY&&(s.hY=nil),null==s.hist&&(s.hist=nil),null==a&&(a=nil),cqls.tweens.pt[a].wait(r+a).to({y:s.graphHist.$to_Y(s.aep["$[]"](t)["$[]"]("yRect")["$[]"](a))+s.hY["$[]"](t)/2},e-a).wait(1e3),cqls.tweens.rect[a].set({visible:!1}).wait(n).set({visible:!0}),0==a&&cqls.tweens.rect[a].call(function(){s.hist["$[]"](t).$draw(s.aep["$[]"](t)["$[]"]("nbTot")),s.$allowLevelChange(!0)}),cqls.tweens.rect[a].wait(r+a).to({y:s.graphHist.$to_Y(s.aep["$[]"](t)["$[]"]("yRect")["$[]"](a))+s.hY["$[]"](t)/2},e-a).wait(i)},o._s=u,o),a).call(s),cqls.tweens.pt[0].call(function(){u.$hideAll(t),u.hist["$[]"](t).$add(u.x["$[]"](t)),u.hist["$[]"](t).$draw(),u.hist["$[]"](t).$drawMean(),u.hist["$[]"](t).$drawSD()}),u.time=u.time["$+"](r["$+"](e)["$+"](i))},a.$hideAll=function(t){var n,r=this;if((n=r.x["$[]"](t))===!1||n===nil)return nil;for(i=0;cqls.m.nbsSimMax>i;i++)cqls.actors.pt[i].visible=!1,cqls.actors.line[i].visible=!1,cqls.actors.rect[i].visible=!1},a.$show=function(){var t,n=this,r=nil,e=nil;r=function(){return(t=n.transf)!==!1&&t!==nil?!0:!1}(),e=(t=r!==!1&&r!==nil)?n.$transfMode()["$=="]("sample"):t,n.exp["$[]"](0).shape.visible=!0,n.exp["$[]"](1).shape.visible=r,n.hist["$[]"](0).shape.visible=(t=r,t===nil||t===!1),n.hist["$[]"](1).shape.visible=r,n.hist["$[]"](0).curveShape.visible=(t=r,(t===nil||t===!1)&cqls.enyo.app.$.checkHistCurve.getValue()),n.hist["$[]"](1).curveShape.visible=r&cqls.enyo.app.$.checkHistCurve.getValue(),n.hist["$[]"](0).summaryShapes[0].visible=!1,n.hist["$[]"](1).summaryShapes[0].visible=!1,n.checkTCL.shape.visible=e&cqls.enyo.app.$.checkTCL.getValue()},a.$playShort=function(t,n){var r,e,i,a,s=this,o=nil;return null==t&&(t=s.curIndHist),null==n&&(n=500),s.$hideAll(t),s.time=0,e=s.transf,(r=e!==!1&&e!==nil?(i=s.transf["$[]"]("dist")["$=="]("exact"),i===nil||i===!1):e)!==!1&&r!==nil?(o=[],(r=(e=$range(0,10["$**"](cqls.i.count),!0)).$each,r._p=(a=function(t){var n=a._s||this;return null==n.exp&&(n.exp=nil),null==n.n&&(n.n=nil),null==t&&(t=nil),o["$[]="](t,n.$applyTransfByValue(n.exp["$[]"](0).$sample(n.n)))},a._s=s,a),r).call(e),s.hist["$[]"](t).$add(o)):s.hist["$[]"](t).$add(s.exp["$[]"](t).$sample(10["$**"](cqls.i.count))),s.hist["$[]"](t).$draw(),s.hist["$[]"](t).$drawMean(),s.hist["$[]"](t).$drawSD(),cqls.m.stage.update(),s.$playNextAfter(n)},a.$playLongDensityBasic=function(t){var n=this;return null==t&&(t=1e3),n.$addXY(n.nbSim),n.$transitionInitHist(0),n.$transitionInitPts(0),n.$transitionInitRects(0),n.$transitionDrawPts(0),n.$transitionFallPts(0),n.$transitionHistPtsAndRects(0),n.$playNextAfter(n.time["$+"](t))},a.$playLongDensityWithTransf=function(t){var n=this;return null==t&&(t=1e3),n.$addXY(n.nbSim),n.$transitionInitTransf(0,1),n.$transitionInitHist(0),n.$transitionInitHist(1),n.$transitionInitPts(0),n.$transitionInitPtsTransf(0),n.$transitionInitRects(1),n.$transitionDrawPts(0),n.$transitionPtsTransf(1),n.$transitionInitPtsTransf(1),n.$transitionDrawPts(1),n.$transitionFallPts(1),n.$transitionHistPtsAndRects(1),n.$playNextAfter(n.time["$+"](t))},a.$playLongDensity=function(t){var n,r=this;return null==t&&(t=1e3),(n=r.transf)!==!1&&n!==nil?r.$playLongDensityWithTransf(t):r.$playLongDensityBasic(t)},a.$playNextAfter=function(t){createjs.Tween.get(cqls.m.stage,{override:!0}).wait(t).call(function(){cqls.i.loop&&cqls.f.updateDemo()})},nil}(self,null),function($base,$super){function $Distribution(){}var self=$Distribution=$klass($base,$super,"Distribution",$Distribution),def=$Distribution._proto,$scope=$Distribution._scope;return def.list=def.name=def.params=def.originalDistrib=def.type=def.distrib=nil,self.$attr_accessor("list","name","params","distrib"),def.$initialize=function(t,n,r){var e,i,a=this;return null==t&&(t=nil),null==n&&(n=[]),null==r&&(r=nil),((e=null==(i=$opal.cvars["@@list"])?nil:i)===!1||e===nil)&&($opal.cvars["@@list"]=$hash2(["uniform","normal","t","chi2","cauchy","discreteUniform","bernoulli","binomial","mean","sum","locationScale"],{uniform:$hash2(["type","dist","qbounds"],{type:"cont",dist:["UniformDistribution"],qbounds:[0,1]}),normal:$hash2(["type","dist","qbounds"],{type:"cont",dist:["NormalDistribution"],qbounds:[cqls.m.qmin,cqls.m.qmax]}),t:$hash2(["type","dist","qbounds"],{type:"cont",dist:["StudentDistribution"],qbounds:[cqls.m.qmin,cqls.m.qmax]}),chi2:$hash2(["type","dist","qbounds"],{type:"cont",dist:["ChiSquareDistribution"],qbounds:[0,cqls.m.qmax]}),cauchy:$hash2(["type","dist","qbounds"],{type:"cont",dist:["CauchyDistribution"],qbounds:[.01,.99]}),discreteUniform:$hash2(["type","dist","qbounds"],{type:"disc",dist:["DiscreteUniformDistribution"],qbounds:[0,1]}),bernoulli:$hash2(["type","dist","qbounds"],{type:"disc",dist:["BernoulliDistribution"],qbounds:[0,1]}),binomial:$hash2(["type","dist","qbounds"],{type:"disc",dist:["BinomialDistribution"],qbounds:[0,1]}),mean:$hash2(["dist","qbounds"],{dist:"none",qbounds:[0,1]}),sum:$hash2(["dist","qbounds"],{dist:"none",qbounds:[0,1]}),locationScale:$hash2(["dist","qbounds"],{dist:"none",qbounds:[0,1]})})),a.list=null==(e=$opal.cvars["@@list"])?nil:e,t!==!1&&t!==nil?r!==!1&&r!==nil?a.$setAsTransfOf($scope.Distribution.$new(t,n),r):a.$set(t,n):nil},def.$set=function(dist,params){var $a,self=this,instr=nil;return $a=[dist,params],self.name=$a[0],self.params=$a[1],self.type=self.list["$[]"](self.name)["$[]"]("type"),self.mode="d",instr="new "["$+"](self.list["$[]"](self.name)["$[]"]("dist").$join("."))["$+"]("(")["$+"](self.params.$join(","))["$+"](");"),self.distrib=eval(instr)},def.$setAsTransfOf=function(t,n){var r,e=this,i=nil,a=nil;return e.mode="d",r=[n["$[]"]("name"),n["$[]"]("args")],e.name=r[0],e.params=r[1],e.originalDistrib=t,function(){return i=e.name,"mean"["$==="](i)?(a=new Convolution(e.originalDistrib.distrib,e.params["$[]"](0)),e.distrib=new LocationScaleDistribution(a,0,1/e.params["$[]"](0))):"sum"["$==="](i)?e.distrib=new Convolution(e.originalDistrib.distrib,e.params["$[]"](0)):"locationScale"["$==="](i)?e.distrib=new LocationScaleDistribution(e.originalDistrib.distrib,e.params["$[]"](0),e.params["$[]"](1)):nil}()},def.$type=function(){var t,n=this;return(t=n.type)!==!1&&t!==nil?t:n.originalDistrib.$type()},def.$qbounds=function(){var t=this;return t.list["$[]"](t.name)["$[]"]("qbounds")},def.$bounds=function(){var t,n,r,e,i,a,s,o=this,u=nil,l=nil,$=nil,c=nil,h=nil;return u=function(){return(t=o.originalDistrib)!==!1&&t!==nil?o.originalDistrib.$qbounds():o.$qbounds()}(),function(){return l=o.$type(),"cont"["$==="](l)?(t=(n=u).$map,t._p=(r=function(t){var n=r._s||this;return null==t&&(t=nil),n.$quantile(t)},r._s=o,r),t).call(n):"disc"["$==="](l)?(t=$opal.to_ary((e=(i=u).$map,e._p=(a=function(t){var n=a._s||this;return null==t&&(t=nil),n.$quantile(t)},a._s=o,a),e).call(i)),$=null==t[0]?nil:t[0],c=null==t[1]?nil:t[1],h=o.$step(),(t=(e=$scope.Range.$new(0,c["$-"]($)["$/"](h)).$to_a()).$map,t._p=(s=function(t){return s._s||this,null==t&&(t=nil),$["$+"](t["$*"](h))},s._s=o,s),t).call(e)):nil}()},def.$minValue=function(){var t=this;return t.distrib.minValue()},def.$maxValue=function(){var t=this;return t.distrib.maxValue()},def.$step=function(){var t=this;return t.distrib.step()},def.$mean=function(){var t=this;return t.distrib.mean()},def.$mode=function(){var t=this;return t.distrib.mode()},def.$maxPdf=function(){var t=this;return t.distrib.maxDensity()},def.$variance=function(){var t=this;return t.distrib.variance()},def.$stdDev=function(){var t=this;return t.distrib.stdDev()},def.$sample=function(t){var n=this;for(null==t&&(t=1),z=[],i=0;t>i;i++)z[i]=n.distrib.simulate();return z},def.$pdf=function(t){var n=this;return t.map(function(t){return n.distrib.density(t)})},def.$quantile=function(t){var n=this;return n.distrib.quantile(t)},nil}(self,null)}(self)})(Opal);

// lib/cqls/main.js
function aep(){cqls.m.exp=Opal.Cqls.Distribution.$new(),cqls.m.exp.$set("uniform",[0,1]),cqls.m.exp2=Opal.Cqls.Distribution.$new(),cqls.m.exp2.$setAsTransfOf(cqls.m.exp,Opal.hash2(["name","args"],{name:"mean",args:[2]})),cqls.m.dist=new LocationScaleDistribution(new Convolution(new UniformDistribution(0,1),2),0,.5),console.log(cqls.m.dist.minValue()),console.log(cqls.m.dist.maxValue()),console.log(cqls.m.dist.type()==CONT),console.log(cqls.m.dist.step()),console.log(cqls.m.dist.density(0)*cqls.m.dist.step()),console.log(cqls.m.dist.density(.5)*cqls.m.dist.step()),console.log(cqls.m.dist.density(1)*cqls.m.dist.step()),console.log(cqls.m.exp2.$quantile(0)),console.log(cqls.m.exp2.$quantile(1)),console.log(cqls.m.exp2.$minValue()),console.log(cqls.m.exp2.$maxValue()),console.log(cqls.m.exp2.$pdf([0,.5,1])),console.log(cqls.m.exp2.distrib.step()),cqls.m.canvas=document.getElementById("createjsCanvas"),cqls.m.ow=cqls.m.canvas.width,cqls.m.oh=cqls.m.canvas.height,window.onresize=function(){cqls.f.resizeCanvas()},cqls.m.stage=new createjs.Stage(cqls.m.canvas),createjs.Touch.enable(cqls.m.stage),cqls.s.plot=Opal.Cqls.Plot.$new(),cqls.m.stage.addChild(cqls.s.plot.parent),cqls.h.plot=Opal.Cqls.Plot.$new(Opal.hash2(["x","y","w","h"],{x:0,y:300,w:cqls.i.dim.w,h:cqls.i.dim.h}),Opal.hash2(["bg"],{bg:"#FF8888"})),cqls.m.stage.addChild(cqls.h.plot.parent),cqls.m.play=Opal.Cqls.Play.$new(),cqls.m.play.hist[0].$level(4,"set"),cqls.m.play.hist[1].$level(4,"set"),createjs.Ticker.addEventListener("tick",cqls.f.tick),cqls.m.outputExp=cqls.m.stage.addChild(new createjs.Text("","20px monospace","#000")),cqls.m.outputExp.lineHeight=15,cqls.m.outputExp.textBaseline="top",cqls.m.outputExp.x=20,cqls.m.outputExp.scaleX=2,cqls.m.outputExp.scaleY=2,cqls.m.outputExp.y=cqls.m.outputExp.lineHeight,cqls.m.outputExp.alpha=.4,cqls.m.outputHist=cqls.m.stage.addChild(new createjs.Text("","20px monospace","#000")),cqls.m.outputHist.lineHeight=15,cqls.m.outputHist.textBaseline="top",cqls.m.outputHist.x=20,cqls.m.outputHist.scaleX=2,cqls.m.outputHist.scaleY=2,cqls.m.outputHist.y=cqls.h.plot.dim["$[]"]("y")+cqls.m.outputHist.lineHeight,cqls.m.outputHist.alpha=.4,cqls.f.resizeCanvas(),cqls.enyo.app.$.nMenu.hide(),cqls.enyo.app.$.pauseButton.hide()}var cqls={m:{xylimMore:.01,xmin:-5,xmax:5,ymax:.5,qmin:1e-4,qmax:.9999,nbsSim:{1:[1,5,10,30,100,200,300,500,1e3,1500,3e3],10:[10,50,100,200,300,500,1e3,1500,3e3],30:[30,150,300,600,900,1500,3e3],100:[100,500,1e3,1500,3e3],1000:[1e3,3e3]},nbSimMax:3e3},s:{},h:{},i:{dim:{w:1200,h:300},count:3,keepAspectRatio:0,ptSize:3,loop:!1,pause:!1,anim:!0,allowLevelChange:!0,zoom:{}},enyo:{top:60,bottom:60},f:{}};cqls.f.resizeCanvas=function(){var t=window.innerWidth,n=window.innerHeight-cqls.enyo.top-cqls.enyo.bottom;if(cqls.i.keepAspectRatio){var r=Math.min(t/cqls.m.ow,n/cqls.m.oh);cqls.m.stage.scaleX=r,cqls.m.stage.scaleY=r,cqls.m.stage.canvas.width=cqls.m.ow*r,cqls.m.stage.canvas.height=cqls.m.oh*r}else cqls.m.stage.scaleX=t/cqls.m.ow,cqls.m.stage.scaleY=n/cqls.m.oh,cqls.m.stage.canvas.width=cqls.m.ow*cqls.m.stage.scaleX,cqls.m.stage.canvas.height=cqls.m.oh*cqls.m.stage.scaleY;cqls.m.stage.update()},cqls.f.updateDemo=function(){cqls.i.anim?cqls.m.play.$playLongDensity():cqls.m.play.$playShort()},cqls.f.onTap=function(t,n){return cqls.m.play.graphExp.$zoomActive()?("none"!=cqls.m.play.graphExp.$hitZoom(t,n)&&(cqls.m.play.$reset(),cqls.m.stage.update()),void 0):(cqls.h.plot.dim["$[]"]("y")>n?cqls.i.anim?cqls.m.play.$setMLevel(t>cqls.s.plot.dim["$[]"]("w")/2?1:-1):(t>cqls.s.plot.dim["$[]"]("w")/2?cqls.i.count+=1:cqls.i.count-=1,0>cqls.i.count&&(cqls.i.count=0),cqls.i.count>4&&(cqls.i.count=4)):(t>cqls.s.plot.dim["$[]"]("w")/2?cqls.m.play.histCur.$level(1):cqls.m.play.histCur.$level(-1),cqls.i.anim?cqls.i.paused&&cqls.m.play.$drawHist():cqls.m.play.histCur.$draw(),cqls.m.stage.update()),void 0)},cqls.f.tick=function(t){cqls.m.outputExp.text="size="+(cqls.i.anim?Math.round(cqls.m.play.nbSim/cqls.m.play.n):Math.pow(10,cqls.i.count)),"sample"==cqls.m.play.$transfMode()&&(cqls.m.outputExp.text+="\nn="+cqls.m.play.n),cqls.m.outputHist.text="m="+cqls.m.play.histCur.nbTot,"cont"==cqls.m.play.histCur.type&&(cqls.m.outputHist.text+="\nk="+Math.pow(2,cqls.m.play.histCur.levelNext)),cqls.m.stage.update(t)};

// lib/layout/version.js
enyo&&enyo.version&&(enyo.version.layout="2.3.0-rc.2");

// lib/layout/contextual/source/ContextualLayout.js
enyo.kind({name:"enyo.ContextualLayout",kind:"Layout",adjustPosition:function(){if(this.container.showing&&this.container.hasNode()){this.resetPositioning();var t=this.getViewWidth(),n=this.getViewHeight(),r=this.container.vertFlushMargin,e=n-this.container.vertFlushMargin,i=this.container.horizFlushMargin,a=t-this.container.horizFlushMargin;if(r>this.offset.top+this.offset.height||this.offset.top>e){if(this.applyVerticalFlushPositioning(i,a))return;if(this.applyHorizontalFlushPositioning(i,a))return;if(this.applyVerticalPositioning())return}else if((i>this.offset.left+this.offset.width||this.offset.left>a)&&this.applyHorizontalPositioning())return;var s=this.getBoundingRect(this.container.node);if(s.width>this.container.widePopup){if(this.applyVerticalPositioning())return}else if(s.height>this.container.longPopup&&this.applyHorizontalPositioning())return;if(this.applyVerticalPositioning())return;if(this.applyHorizontalPositioning())return}},initVerticalPositioning:function(){this.resetPositioning(),this.container.addClass("vertical");var t=this.getBoundingRect(this.container.node),n=this.getViewHeight();return this.container.floating?n/2>this.offset.top?(this.applyPosition({top:this.offset.top+this.offset.height,bottom:"auto"}),this.container.addClass("below")):(this.applyPosition({top:this.offset.top-t.height,bottom:"auto"}),this.container.addClass("above")):t.top+t.height>n&&n-t.bottom<t.top-t.height?this.container.addClass("above"):this.container.addClass("below"),t=this.getBoundingRect(this.container.node),t.top+t.height>n||0>t.top?!1:!0},applyVerticalPositioning:function(){if(!this.initVerticalPositioning())return!1;var t=this.getBoundingRect(this.container.node),n=this.getViewWidth();if(this.container.floating){var r=this.offset.left+this.offset.width/2-t.width/2;r+t.width>n?(this.applyPosition({left:this.offset.left+this.offset.width-t.width}),this.container.addClass("left")):0>r?(this.applyPosition({left:this.offset.left}),this.container.addClass("right")):this.applyPosition({left:r})}else{var e=this.offset.left+this.offset.width/2-t.left-t.width/2;t.right+e>n?(this.applyPosition({left:this.offset.left+this.offset.width-t.right}),this.container.addRemoveClass("left",!0)):0>t.left+e?this.container.addRemoveClass("right",!0):this.applyPosition({left:e})}return!0},applyVerticalFlushPositioning:function(t,n){if(!this.initVerticalPositioning())return!1;var r=this.getBoundingRect(this.container.node),e=this.getViewWidth();return t>this.offset.left+this.offset.width/2?(this.offset.left+this.offset.width/2<this.container.horizBuffer?this.applyPosition({left:this.container.horizBuffer+(this.container.floating?0:-r.left)}):this.applyPosition({left:this.offset.width/2+(this.container.floating?this.offset.left:0)}),this.container.addClass("right"),this.container.addClass("corner"),!0):this.offset.left+this.offset.width/2>n?(this.offset.left+this.offset.width/2>e-this.container.horizBuffer?this.applyPosition({left:e-this.container.horizBuffer-r.right}):this.applyPosition({left:this.offset.left+this.offset.width/2-r.right}),this.container.addClass("left"),this.container.addClass("corner"),!0):!1},initHorizontalPositioning:function(){this.resetPositioning();var t=this.getBoundingRect(this.container.node),n=this.getViewWidth();return this.container.floating?n/2>this.offset.left+this.offset.width?(this.applyPosition({left:this.offset.left+this.offset.width}),this.container.addRemoveClass("left",!0)):(this.applyPosition({left:this.offset.left-t.width}),this.container.addRemoveClass("right",!0)):this.offset.left-t.width>0?(this.applyPosition({left:this.offset.left-t.left-t.width}),this.container.addRemoveClass("right",!0)):(this.applyPosition({left:this.offset.width}),this.container.addRemoveClass("left",!0)),this.container.addRemoveClass("horizontal",!0),t=this.getBoundingRect(this.container.node),0>t.left||t.left+t.width>n?!1:!0},applyHorizontalPositioning:function(){if(!this.initHorizontalPositioning())return!1;var t=this.getBoundingRect(this.container.node),n=this.getViewHeight(),r=this.offset.top+this.offset.height/2;return this.container.floating?r>=n/2-.05*n&&n/2+.05*n>=r?this.applyPosition({top:this.offset.top+this.offset.height/2-t.height/2,bottom:"auto"}):n/2>this.offset.top+this.offset.height?(this.applyPosition({top:this.offset.top,bottom:"auto"}),this.container.addRemoveClass("high",!0)):(this.applyPosition({top:this.offset.top-t.height+2*this.offset.height,bottom:"auto"}),this.container.addRemoveClass("low",!0)):r>=n/2-.05*n&&n/2+.05*n>=r?this.applyPosition({top:(this.offset.height-t.height)/2}):n/2>this.offset.top+this.offset.height?(this.applyPosition({top:-this.offset.height}),this.container.addRemoveClass("high",!0)):(this.applyPosition({top:t.top-t.height-this.offset.top+this.offset.height}),this.container.addRemoveClass("low",!0)),!0},applyHorizontalFlushPositioning:function(t,n){if(!this.initHorizontalPositioning())return!1;var r=this.getBoundingRect(this.container.node),e=this.getViewHeight();return this.container.floating?e/2>this.offset.top?(this.applyPosition({top:this.offset.top+this.offset.height/2}),this.container.addRemoveClass("high",!0)):(this.applyPosition({top:this.offset.top+this.offset.height/2-r.height}),this.container.addRemoveClass("low",!0)):r.top+r.height>e&&e-r.bottom<r.top-r.height?(this.applyPosition({top:r.top-r.height-this.offset.top-this.offset.height/2}),this.container.addRemoveClass("low",!0)):(this.applyPosition({top:this.offset.height/2}),this.container.addRemoveClass("high",!0)),t>this.offset.left+this.offset.width?(this.container.addClass("left"),this.container.addClass("corner"),!0):this.offset.left>n?(this.container.addClass("right"),this.container.addClass("corner"),!0):!1},getBoundingRect:function(t){var n=t.getBoundingClientRect();return n.width&&n.height?n:{left:n.left,right:n.right,top:n.top,bottom:n.bottom,width:n.right-n.left,height:n.bottom-n.top}},getViewHeight:function(){return void 0===window.innerHeight?document.documentElement.clientHeight:window.innerHeight},getViewWidth:function(){return void 0===window.innerWidth?document.documentElement.clientWidth:window.innerWidth},applyPosition:function(t){var n="";for(var r in t)n+=r+":"+t[r]+(isNaN(t[r])?"; ":"px; ");this.container.addStyles(n)},resetPositioning:function(){this.container.removeClass("right"),this.container.removeClass("left"),this.container.removeClass("high"),this.container.removeClass("low"),this.container.removeClass("corner"),this.container.removeClass("below"),this.container.removeClass("above"),this.container.removeClass("vertical"),this.container.removeClass("horizontal"),this.applyPosition({left:"auto"}),this.applyPosition({top:"auto"})},reflow:function(){this.offset=this.container.activatorOffset,this.adjustPosition()}});

// lib/layout/fittable/source/FittableLayout.js
enyo.kind({name:"enyo.FittableLayout",kind:"Layout",calcFitIndex:function(){var t,n,r=this.container.children;for(n=0;r.length>n;n++)if(t=r[n],t.fit&&t.showing)return n},getFitControl:function(){var t=this.container.children,n=t[this.fitIndex];return n&&n.fit&&n.showing||(this.fitIndex=this.calcFitIndex(),n=t[this.fitIndex]),n},shouldReverse:function(){return this.container.rtl&&"h"===this.orient},getFirstChild:function(){var t=this.getShowingChildren();return this.shouldReverse()?t[t.length-1]:t[0]},getLastChild:function(){var t=this.getShowingChildren();return this.shouldReverse()?t[0]:t[t.length-1]},getShowingChildren:function(){for(var t=[],n=0,r=this.container.children,e=r.length;e>n;n++)r[n].showing&&t.push(r[n]);return t},_reflow:function(t,n,r,e){this.container.addRemoveClass("enyo-stretch",!this.container.noStretch);var i,a,s,o,u,l=this.getFitControl(),c=this.container.hasNode(),$=0,h=0,f=0;if(l&&c){if(i=enyo.dom.calcPaddingExtents(c),a=l.getBounds(),$=c[n]-(i[r]+i[e]),this.shouldReverse()){o=this.getFirstChild(),f=$-(a[r]+a[t]);var p=enyo.dom.getComputedBoxValue(o.hasNode(),"margin",r)||0;if(o==l)h=p;else{var d=o.getBounds(),_=d[r];h=a[r]+p-_}}else{s=this.getLastChild(),h=a[r]-(i[r]||0);var m=enyo.dom.getComputedBoxValue(s.hasNode(),"margin",e)||0;if(s==l)f=m;else{var v=s.getBounds(),g=a[r]+a[t],y=v[r]+v[t]+m;f=y-g}}u=$-(h+f),l.applyStyle(t,u+"px")}},reflow:function(){"h"==this.orient?this._reflow("width","clientWidth","left","right"):this._reflow("height","clientHeight","top","bottom")}}),enyo.kind({name:"enyo.FittableColumnsLayout",kind:"FittableLayout",orient:"h",layoutClass:"enyo-fittable-columns-layout"}),enyo.kind({name:"enyo.FittableRowsLayout",kind:"FittableLayout",layoutClass:"enyo-fittable-rows-layout",orient:"v"});

// lib/layout/fittable/source/FittableRows.js
enyo.kind({name:"enyo.FittableRows",layoutKind:"FittableRowsLayout",noStretch:!1});

// lib/layout/fittable/source/FittableColumns.js
enyo.kind({name:"enyo.FittableColumns",layoutKind:"FittableColumnsLayout",noStretch:!1});

// lib/layout/fittable/source/FittableHeaderLayout.js
enyo.kind({name:"enyo.FittableHeaderLayout",kind:"FittableColumnsLayout",applyFitSize:enyo.inherit(function(t){return function(n,r,e,i){var a=e-i,s=this.getFitControl();0>a?(s.applyStyle("padding-left",Math.abs(a)+"px"),s.applyStyle("padding-right",null)):a>0?(s.applyStyle("padding-left",null),s.applyStyle("padding-right",Math.abs(a)+"px")):(s.applyStyle("padding-left",null),s.applyStyle("padding-right",null)),t.apply(this,arguments)}})});

// lib/layout/list/source/FlyweightRepeater.js
enyo.kind({name:"enyo.FlyweightRepeater",published:{count:0,noSelect:!1,multiSelect:!1,toggleSelected:!1,clientClasses:"",clientStyle:"",rowOffset:0,orient:"v"},events:{onSetupItem:"",onRenderRow:""},bottomUp:!1,components:[{kind:"Selection",onSelect:"selectDeselect",onDeselect:"selectDeselect"},{name:"client"}],create:enyo.inherit(function(t){return function(){t.apply(this,arguments),this.noSelectChanged(),this.multiSelectChanged(),this.clientClassesChanged(),this.clientStyleChanged()}}),noSelectChanged:function(){this.noSelect&&this.$.selection.clear()},multiSelectChanged:function(){this.$.selection.setMulti(this.multiSelect)},clientClassesChanged:function(){this.$.client.setClasses(this.clientClasses)},clientStyleChanged:function(){this.$.client.setStyle(this.clientStyle)},setupItem:function(t){this.doSetupItem({index:t,selected:this.isSelected(t)})},generateChildHtml:enyo.inherit(function(t){return function(){var n="";this.index=null;for(var e=0,r=0;this.count>e;e++)r=this.rowOffset+(this.bottomUp?this.count-e-1:e),this.setupItem(r),this.$.client.setAttribute("data-enyo-index",r),"h"==this.orient&&this.$.client.setStyle("display:inline-block;"),n+=t.apply(this,arguments),this.$.client.teardownRender();return n}}),previewDomEvent:function(t){var n=this.index=this.rowForEvent(t);t.rowIndex=t.index=n,t.flyweight=this},decorateEvent:enyo.inherit(function(t){return function(n,e){var r=e&&null!=e.index?e.index:this.index;e&&null!=r&&(e.index=r,e.flyweight=this),t.apply(this,arguments)}}),tap:function(t,n){this.noSelect||-1===n.index||(this.toggleSelected?this.$.selection.toggle(n.index):this.$.selection.select(n.index))},selectDeselect:function(t,n){this.renderRow(n.key)},getSelection:function(){return this.$.selection},isSelected:function(t){return this.getSelection().isSelected(t)},renderRow:function(t){if(!(this.rowOffset>t||t>=this.count+this.rowOffset)){this.setupItem(t);var n=this.fetchRowNode(t);n&&(enyo.dom.setInnerHtml(n,this.$.client.generateChildHtml()),this.$.client.teardownChildren(),this.doRenderRow({rowIndex:t}))}},fetchRowNode:function(t){return this.hasNode()?this.node.querySelector('[data-enyo-index="'+t+'"]'):void 0},rowForEvent:function(t){if(!this.hasNode())return-1;for(var n=t.target;n&&n!==this.node;){var e=n.getAttribute&&n.getAttribute("data-enyo-index");if(null!==e)return Number(e);n=n.parentNode}return-1},prepareRow:function(t){if(!(this.rowOffset>t||t>=this.count+this.rowOffset)){this.setupItem(t);var n=this.fetchRowNode(t);enyo.FlyweightRepeater.claimNode(this.$.client,n)}},lockRow:function(){this.$.client.teardownChildren()},performOnRow:function(t,n,e){this.rowOffset>t||t>=this.count+this.rowOffset||n&&(this.prepareRow(t),enyo.call(e||null,n),this.lockRow())},statics:{claimNode:function(t,n){var e;n&&(e=n.id!==t.id?n.querySelector("#"+t.id):n),t.generated=Boolean(e||!t.tag),t.node=e,t.node&&t.rendered();for(var r,i=0,a=t.children;r=a[i];i++)this.claimNode(r,n)}}});

// lib/layout/list/source/List.js
enyo.kind({name:"enyo.List",kind:"Scroller",classes:"enyo-list",published:{count:0,rowsPerPage:50,orient:"v",bottomUp:!1,noSelect:!1,multiSelect:!1,toggleSelected:!1,fixedSize:!1,reorderable:!1,centerReorderContainer:!0,reorderComponents:[],pinnedReorderComponents:[],swipeableComponents:[],enableSwipe:!1,persistSwipeableItem:!1},events:{onSetupItem:"",onSetupReorderComponents:"",onSetupPinnedReorderComponents:"",onReorder:"",onSetupSwipeItem:"",onSwipeDrag:"",onSwipe:"",onSwipeComplete:""},handlers:{onAnimateFinish:"animateFinish",onRenderRow:"rowRendered",ondragstart:"dragstart",ondrag:"drag",ondragfinish:"dragfinish",onup:"up",onholdpulse:"holdpulse",onflick:"flick"},rowSize:0,listTools:[{name:"port",classes:"enyo-list-port enyo-border-box",components:[{name:"generator",kind:"FlyweightRepeater",canGenerate:!1,components:[{tag:null,name:"client"}]},{name:"holdingarea",allowHtml:!0,classes:"enyo-list-holdingarea"},{name:"page0",allowHtml:!0,classes:"enyo-list-page"},{name:"page1",allowHtml:!0,classes:"enyo-list-page"},{name:"placeholder",classes:"enyo-list-placeholder"},{name:"swipeableComponents",style:"position:absolute; display:block; top:-1000px; left:0;"}]}],reorderHoldTimeMS:600,draggingRowIndex:-1,initHoldCounter:3,holdCounter:3,holding:!1,draggingRowNode:null,placeholderRowIndex:-1,dragToScrollThreshold:.1,prevScrollTop:0,autoScrollTimeoutMS:20,autoScrollTimeout:null,autoscrollPageY:0,pinnedReorderMode:!1,initialPinPosition:-1,itemMoved:!1,currentPageNumber:-1,completeReorderTimeout:null,swipeIndex:null,swipeDirection:null,persistentItemVisible:!1,persistentItemOrigin:null,swipeComplete:!1,completeSwipeTimeout:null,completeSwipeDelayMS:500,normalSwipeSpeedMS:200,fastSwipeSpeedMS:100,percentageDraggedThreshold:.2,importProps:enyo.inherit(function(t){return function(n){n&&n.reorderable&&(this.touch=!0),t.apply(this,arguments)}}),create:enyo.inherit(function(t){return function(){this.pageSizes=[],this.orientV="v"==this.orient,this.vertical=this.orientV?"default":"hidden",t.apply(this,arguments),this.$.generator.orient=this.orient,this.getStrategy().translateOptimized=!0,this.$.port.addRemoveClass("horizontal",!this.orientV),this.$.port.addRemoveClass("vertical",this.orientV),this.$.page0.addRemoveClass("vertical",this.orientV),this.$.page1.addRemoveClass("vertical",this.orientV),this.bottomUpChanged(),this.noSelectChanged(),this.multiSelectChanged(),this.toggleSelectedChanged(),this.$.generator.setRowOffset(0),this.$.generator.setCount(this.count)}}),initComponents:enyo.inherit(function(t){return function(){this.createReorderTools(),t.apply(this,arguments),this.createSwipeableComponents()}}),createReorderTools:function(){this.createComponent({name:"reorderContainer",classes:"enyo-list-reorder-container",ondown:"sendToStrategy",ondrag:"sendToStrategy",ondragstart:"sendToStrategy",ondragfinish:"sendToStrategy",onflick:"sendToStrategy"})},createStrategy:enyo.inherit(function(t){return function(){this.controlParentName="strategy",t.apply(this,arguments),this.createChrome(this.listTools),this.controlParentName="client",this.discoverControlParent()}}),createSwipeableComponents:function(){for(var t=0;this.swipeableComponents.length>t;t++)this.$.swipeableComponents.createComponent(this.swipeableComponents[t],{owner:this.owner})},rendered:enyo.inherit(function(t){return function(){t.apply(this,arguments),this.$.generator.node=this.$.port.hasNode(),this.$.generator.generated=!0,this.reset()}}),resizeHandler:enyo.inherit(function(t){return function(){t.apply(this,arguments),this.refresh()}}),bottomUpChanged:function(){this.$.generator.bottomUp=this.bottomUp,this.$.page0.applyStyle(this.pageBound,null),this.$.page1.applyStyle(this.pageBound,null),this.pageBound=this.orientV?this.bottomUp?"bottom":"top":this.rtl?this.bottomUp?"left":"right":this.bottomUp?"right":"left",!this.orientV&&this.bottomUp&&(this.$.page0.applyStyle("left","auto"),this.$.page1.applyStyle("left","auto")),this.hasNode()&&this.reset()},noSelectChanged:function(){this.$.generator.setNoSelect(this.noSelect)},multiSelectChanged:function(){this.$.generator.setMultiSelect(this.multiSelect)},toggleSelectedChanged:function(){this.$.generator.setToggleSelected(this.toggleSelected)},countChanged:function(){this.hasNode()&&this.updateMetrics()},sendToStrategy:function(t,n){this.$.strategy.dispatchEvent("on"+n.type,n,t)},updateMetrics:function(){this.defaultPageSize=this.rowsPerPage*(this.rowSize||100),this.pageCount=Math.ceil(this.count/this.rowsPerPage),this.portSize=0;for(var t=0;this.pageCount>t;t++)this.portSize+=this.getPageSize(t);this.adjustPortSize()},holdpulse:function(t,n){return this.getReorderable()&&!this.isReordering()?n.holdTime>=this.reorderHoldTimeMS&&this.shouldStartReordering(t,n)?(this.startReordering(n),!1):void 0:void 0},dragstart:function(t,n){return this.isReordering()?!0:this.isSwipeable()?this.swipeDragStart(t,n):void 0},drag:function(t,n){return this.shouldDoReorderDrag(n)?(n.preventDefault(),this.reorderDrag(n),!0):this.isSwipeable()?(n.preventDefault(),this.swipeDrag(t,n),!0):void 0},dragfinish:function(t,n){this.isReordering()?this.finishReordering(t,n):this.isSwipeable()&&this.swipeDragFinish(t,n)},up:function(t,n){this.isReordering()&&this.finishReordering(t,n)},generatePage:function(t,n){this.page=t;var e=this.rowsPerPage*this.page;this.$.generator.setRowOffset(e);var r=Math.min(this.count-e,this.rowsPerPage);this.$.generator.setCount(r);var i=this.$.generator.generateChildHtml();n.setContent(i),this.getReorderable()&&this.draggingRowIndex>-1&&this.hideReorderingRow();var o=n.getBounds(),s=this.orientV?o.height:o.width;if(!this.rowSize&&s>0&&(this.rowSize=Math.floor(s/r),this.updateMetrics()),!this.fixedSize){var a=this.getPageSize(t);a!=s&&s>0&&(this.pageSizes[t]=s,this.portSize+=s-a)}},pageForRow:function(t){return Math.floor(t/this.rowsPerPage)},preserveDraggingRowNode:function(t){this.draggingRowNode&&this.pageForRow(this.draggingRowIndex)===t&&(this.$.holdingarea.hasNode().appendChild(this.draggingRowNode),this.draggingRowNode=null,this.removedInitialPage=!0)},update:function(t){var n=!1,e=this.positionToPageInfo(t),r=e.pos+this.scrollerSize/2,i=Math.floor(r/Math.max(e.size,this.scrollerSize)+.5)+e.no,o=0===i%2?i:i-1;this.p0!=o&&this.isPageInRange(o)&&(this.preserveDraggingRowNode(this.p0),this.generatePage(o,this.$.page0),this.positionPage(o,this.$.page0),this.p0=o,n=!0,this.p0RowBounds=this.getPageRowSizes(this.$.page0)),o=0===i%2?Math.max(1,i-1):i,this.p1!=o&&this.isPageInRange(o)&&(this.preserveDraggingRowNode(this.p1),this.generatePage(o,this.$.page1),this.positionPage(o,this.$.page1),this.p1=o,n=!0,this.p1RowBounds=this.getPageRowSizes(this.$.page1)),n&&(this.$.generator.setRowOffset(0),this.$.generator.setCount(this.count),this.fixedSize||(this.adjustBottomPage(),this.adjustPortSize()))},getPageRowSizes:function(t){for(var n,e,r={},i=t.hasNode().querySelectorAll("div[data-enyo-index]"),o=0;i.length>o;o++)n=i[o].getAttribute("data-enyo-index"),null!==n&&(e=enyo.dom.getBounds(i[o]),r[parseInt(n,10)]={height:e.height,width:e.width});return r},updateRowBounds:function(t){this.p0RowBounds[t]?this.updateRowBoundsAtIndex(t,this.p0RowBounds,this.$.page0):this.p1RowBounds[t]&&this.updateRowBoundsAtIndex(t,this.p1RowBounds,this.$.page1)},updateRowBoundsAtIndex:function(t,n,e){var r=e.hasNode().querySelector('div[data-enyo-index="'+t+'"]'),i=enyo.dom.getBounds(r);n[t].height=i.height,n[t].width=i.width},updateForPosition:function(t){this.update(this.calcPos(t))},calcPos:function(t){return this.bottomUp?this.portSize-this.scrollerSize-t:t},adjustBottomPage:function(){var t=this.p0>=this.p1?this.$.page0:this.$.page1;this.positionPage(t.pageNo,t)},adjustPortSize:function(){this.scrollerSize=this.orientV?this.getBounds().height:this.getBounds().width;var t=Math.max(this.scrollerSize,this.portSize);this.$.port.applyStyle(this.orientV?"height":"width",t+"px"),this.orientV||this.$.port.applyStyle("height",this.getBounds().height+"px")},positionPage:function(t,n){n.pageNo=t;var e=this.pageToPosition(t);n.applyStyle(this.pageBound,e+"px")},pageToPosition:function(t){for(var n=0,e=t;e>0;)e--,n+=this.getPageSize(e);return n},positionToPageInfo:function(t){for(var n=-1,e=this.calcPos(t),r=this.defaultPageSize;e>=0;)n++,r=this.getPageSize(n),e-=r;return n=Math.max(n,0),{no:n,size:r,pos:e+r,startRow:n*this.rowsPerPage,endRow:Math.min((n+1)*this.rowsPerPage-1,this.count-1)}},isPageInRange:function(t){return t==Math.max(0,Math.min(this.pageCount-1,t))},getPageSize:function(t){var n=this.pageSizes[t];if(!n){var e=this.rowsPerPage*t,r=Math.min(this.count-e,this.rowsPerPage);n=this.defaultPageSize*(r/this.rowsPerPage)}return Math.max(1,n)},invalidatePages:function(){this.p0=this.p1=null,this.p0RowBounds={},this.p1RowBounds={},this.$.page0.setContent(""),this.$.page1.setContent("")},invalidateMetrics:function(){this.pageSizes=[],this.rowSize=0,this.updateMetrics()},scroll:enyo.inherit(function(t){return function(n,e){var r=t.apply(this,arguments),i=this.orientV?this.getScrollTop():this.getScrollLeft();return this.lastPos===i?r:(this.lastPos=i,this.update(i),this.pinnedReorderMode&&this.reorderScroll(n,e),r)}}),setScrollTop:enyo.inherit(function(t){return function(n){this.update(n),t.apply(this,arguments),this.twiddle()}}),getScrollPosition:function(){return this.calcPos(this[this.orientV?"getScrollTop":"getScrollLeft"]())},setScrollPosition:function(t){this[this.orientV?"setScrollTop":"setScrollLeft"](this.calcPos(t))},scrollToBottom:enyo.inherit(function(t){return function(){this.update(this.getScrollBounds().maxTop),t.apply(this,arguments)}}),scrollToRow:function(t){var n=this.pageForRow(t),e=this.pageToPosition(n);if(this.updateForPosition(e),e=this.pageToPosition(n),this.setScrollPosition(e),n==this.p0||n==this.p1){var r=this.$.generator.fetchRowNode(t);if(r){var i=this.orientV?r.offsetTop:r.offsetLeft;this.bottomUp&&(i=this.getPageSize(n)-(this.orientV?r.offsetHeight:r.offsetWidth)-i);var o=this.getScrollPosition()+i;this.setScrollPosition(o)}}},scrollToStart:function(){this[this.bottomUp?this.orientV?"scrollToBottom":"scrollToRight":"scrollToTop"]()},scrollToEnd:function(){this[this.bottomUp?this.orientV?"scrollToTop":"scrollToLeft":this.orientV?"scrollToBottom":"scrollToRight"]()},refresh:function(){this.invalidatePages(),this.update(this[this.orientV?"getScrollTop":"getScrollLeft"]()),this.stabilize(),4===enyo.platform.android&&this.twiddle()},reset:function(){this.getSelection().clear(),this.invalidateMetrics(),this.invalidatePages(),this.stabilize(),this.scrollToStart()},getSelection:function(){return this.$.generator.getSelection()},select:function(t,n){return this.getSelection().select(t,n)},deselect:function(t){return this.getSelection().deselect(t)},isSelected:function(t){return this.$.generator.isSelected(t)},renderRow:function(t){this.$.generator.renderRow(t)},rowRendered:function(t,n){this.updateRowBounds(n.rowIndex)},prepareRow:function(t){this.$.generator.prepareRow(t)},lockRow:function(){this.$.generator.lockRow()},performOnRow:function(t,n,e){this.$.generator.performOnRow(t,n,e)},animateFinish:function(){return this.twiddle(),!0},twiddle:function(){var t=this.getStrategy();enyo.call(t,"twiddle")},pageForPageNumber:function(t,n){return 0===t%2?n&&t!==this.p0?null:this.$.page0:n&&t!==this.p1?null:this.$.page1},shouldStartReordering:function(t,n){return!this.getReorderable()||null==n.rowIndex||0>n.rowIndex||this.pinnedReorderMode||t!==this.$.strategy||null==n.index||0>n.index?!1:!0},startReordering:function(t){this.$.strategy.listReordering=!0,this.buildReorderContainer(),this.doSetupReorderComponents(t),this.styleReorderContainer(t),this.draggingRowIndex=this.placeholderRowIndex=t.rowIndex,this.draggingRowNode=t.target,this.removedInitialPage=!1,this.itemMoved=!1,this.initialPageNumber=this.currentPageNumber=this.pageForRow(t.rowIndex),this.prevScrollTop=this.getScrollTop(),this.replaceNodeWithPlaceholder(t.rowIndex)},buildReorderContainer:function(){this.$.reorderContainer.destroyClientControls();for(var t=0;this.reorderComponents.length>t;t++)this.$.reorderContainer.createComponent(this.reorderComponents[t],{owner:this.owner});this.$.reorderContainer.render()},styleReorderContainer:function(t){this.setItemPosition(this.$.reorderContainer,t.rowIndex),this.setItemBounds(this.$.reorderContainer,t.rowIndex),this.$.reorderContainer.setShowing(!0),this.centerReorderContainer&&this.centerReorderContainerOnPointer(t)},appendNodeToReorderContainer:function(t){this.$.reorderContainer.createComponent({allowHtml:!0,content:t.innerHTML}).render()},centerReorderContainerOnPointer:function(t){var n=enyo.dom.calcNodePosition(this.hasNode()),e=t.pageX-n.left-parseInt(this.$.reorderContainer.domStyles.width,10)/2,r=t.pageY-n.top+this.getScrollTop()-parseInt(this.$.reorderContainer.domStyles.height,10)/2;"ScrollStrategy"!=this.getStrategyKind()&&(e-=this.getScrollLeft(),r-=this.getScrollTop()),this.positionReorderContainer(e,r)},positionReorderContainer:function(t,n){this.$.reorderContainer.addClass("enyo-animatedTopAndLeft"),this.$.reorderContainer.addStyles("left:"+t+"px;top:"+n+"px;"),this.setPositionReorderContainerTimeout()},setPositionReorderContainerTimeout:function(){this.clearPositionReorderContainerTimeout(),this.positionReorderContainerTimeout=setTimeout(this.bindSafely(function(){this.$.reorderContainer.removeClass("enyo-animatedTopAndLeft"),this.clearPositionReorderContainerTimeout()}),100)},clearPositionReorderContainerTimeout:function(){this.positionReorderContainerTimeout&&(clearTimeout(this.positionReorderContainerTimeout),this.positionReorderContainerTimeout=null)},shouldDoReorderDrag:function(){return!this.getReorderable()||0>this.draggingRowIndex||this.pinnedReorderMode?!1:!0},reorderDrag:function(t){this.positionReorderNode(t),this.checkForAutoScroll(t),this.updatePlaceholderPosition(t.pageY)},updatePlaceholderPosition:function(t){var n=this.getRowIndexFromCoordinate(t);-1!==n&&(n>=this.placeholderRowIndex?this.movePlaceholderToIndex(Math.min(this.count,n+1)):this.movePlaceholderToIndex(n))},positionReorderNode:function(t){var n=this.$.reorderContainer.getBounds(),e=n.left+t.ddx,r=n.top+t.ddy;r="ScrollStrategy"==this.getStrategyKind()?r+(this.getScrollTop()-this.prevScrollTop):r,this.$.reorderContainer.addStyles("top: "+r+"px ; left: "+e+"px"),this.prevScrollTop=this.getScrollTop()},checkForAutoScroll:function(t){var n,e=enyo.dom.calcNodePosition(this.hasNode()),r=this.getBounds();this.autoscrollPageY=t.pageY,t.pageY-e.top<r.height*this.dragToScrollThreshold?(n=100*(1-(t.pageY-e.top)/(r.height*this.dragToScrollThreshold)),this.scrollDistance=-1*n):t.pageY-e.top>r.height*(1-this.dragToScrollThreshold)?(n=100*((t.pageY-e.top-r.height*(1-this.dragToScrollThreshold))/(r.height-r.height*(1-this.dragToScrollThreshold))),this.scrollDistance=1*n):this.scrollDistance=0,0===this.scrollDistance?this.stopAutoScrolling():this.autoScrollTimeout||this.startAutoScrolling()},stopAutoScrolling:function(){this.autoScrollTimeout&&(clearTimeout(this.autoScrollTimeout),this.autoScrollTimeout=null)},startAutoScrolling:function(){this.autoScrollTimeout=setInterval(this.bindSafely(this.autoScroll),this.autoScrollTimeoutMS)},autoScroll:function(){0===this.scrollDistance?this.stopAutoScrolling():this.autoScrollTimeout||this.startAutoScrolling(),this.setScrollPosition(this.getScrollPosition()+this.scrollDistance),this.positionReorderNode({ddx:0,ddy:0}),this.updatePlaceholderPosition(this.autoscrollPageY)},movePlaceholderToIndex:function(t){var n,e;if(!(0>t)){t>=this.count?(n=null,e=this.pageForPageNumber(this.pageForRow(this.count-1)).hasNode()):(n=this.$.generator.fetchRowNode(t),e=n.parentNode);var r=this.pageForRow(t);r>=this.pageCount&&(r=this.currentPageNumber),e.insertBefore(this.placeholderNode,n),this.currentPageNumber!==r&&(this.updatePageSize(this.currentPageNumber),this.updatePageSize(r),this.updatePagePositions(r)),this.placeholderRowIndex=t,this.currentPageNumber=r,this.itemMoved=!0}},finishReordering:function(t,n){return!this.isReordering()||this.pinnedReorderMode||this.completeReorderTimeout?void 0:(this.stopAutoScrolling(),this.$.strategy.listReordering=!1,this.moveReorderedContainerToDroppedPosition(n),this.completeReorderTimeout=setTimeout(this.bindSafely(this.completeFinishReordering,n),100),n.preventDefault(),!0)},moveReorderedContainerToDroppedPosition:function(){var t=this.getRelativeOffset(this.placeholderNode,this.hasNode()),n="ScrollStrategy"==this.getStrategyKind()?t.top:t.top-this.getScrollTop(),e=t.left-this.getScrollLeft();this.positionReorderContainer(e,n)},completeFinishReordering:function(t){return this.completeReorderTimeout=null,this.placeholderRowIndex>this.draggingRowIndex&&(this.placeholderRowIndex=Math.max(0,this.placeholderRowIndex-1)),this.draggingRowIndex!=this.placeholderRowIndex||!this.pinnedReorderComponents.length||this.pinnedReorderMode||this.itemMoved?(this.removeDraggingRowNode(),this.removePlaceholderNode(),this.emptyAndHideReorderContainer(),this.pinnedReorderMode=!1,this.reorderRows(t),this.draggingRowIndex=this.placeholderRowIndex=-1,this.refresh(),void 0):(this.beginPinnedReorder(t),void 0)},beginPinnedReorder:function(t){this.buildPinnedReorderContainer(),this.doSetupPinnedReorderComponents(enyo.mixin(t,{index:this.draggingRowIndex})),this.pinnedReorderMode=!0,this.initialPinPosition=t.pageY},emptyAndHideReorderContainer:function(){this.$.reorderContainer.destroyComponents(),this.$.reorderContainer.setShowing(!1)},buildPinnedReorderContainer:function(){this.$.reorderContainer.destroyClientControls();for(var t=0;this.pinnedReorderComponents.length>t;t++)this.$.reorderContainer.createComponent(this.pinnedReorderComponents[t],{owner:this.owner});this.$.reorderContainer.render()},reorderRows:function(t){this.doReorder(this.makeReorderEvent(t)),this.positionReorderedNode(),this.updateListIndices()},makeReorderEvent:function(t){return t.reorderFrom=this.draggingRowIndex,t.reorderTo=this.placeholderRowIndex,t},positionReorderedNode:function(){if(!this.removedInitialPage){var t=this.$.generator.fetchRowNode(this.placeholderRowIndex);if(t&&(t.parentNode.insertBefore(this.hiddenNode,t),this.showNode(this.hiddenNode)),this.hiddenNode=null,this.currentPageNumber!=this.initialPageNumber){var n,e,r=this.pageForPageNumber(this.currentPageNumber),i=this.pageForPageNumber(this.currentPageNumber+1);this.initialPageNumber<this.currentPageNumber?(n=r.hasNode().firstChild,i.hasNode().appendChild(n)):(n=r.hasNode().lastChild,e=i.hasNode().firstChild,i.hasNode().insertBefore(n,e)),this.correctPageSizes(),this.updatePagePositions(this.initialPageNumber)}}},updateListIndices:function(){if(this.shouldDoRefresh())return this.refresh(),this.correctPageSizes(),void 0;var t,n,e,r,i=Math.min(this.draggingRowIndex,this.placeholderRowIndex),o=Math.max(this.draggingRowIndex,this.placeholderRowIndex),s=this.draggingRowIndex-this.placeholderRowIndex>0?1:-1;if(1===s){for(t=this.$.generator.fetchRowNode(this.draggingRowIndex),t&&t.setAttribute("data-enyo-index","reordered"),n=o-1,e=o;n>=i;n--)t=this.$.generator.fetchRowNode(n),t&&(r=parseInt(t.getAttribute("data-enyo-index"),10),e=r+1,t.setAttribute("data-enyo-index",e));t=this.hasNode().querySelector('[data-enyo-index="reordered"]'),t.setAttribute("data-enyo-index",this.placeholderRowIndex)}else for(t=this.$.generator.fetchRowNode(this.draggingRowIndex),t&&t.setAttribute("data-enyo-index",this.placeholderRowIndex),n=i+1,e=i;o>=n;n++)t=this.$.generator.fetchRowNode(n),t&&(r=parseInt(t.getAttribute("data-enyo-index"),10),e=r-1,t.setAttribute("data-enyo-index",e))},shouldDoRefresh:function(){return Math.abs(this.initialPageNumber-this.currentPageNumber)>1},getNodeStyle:function(t){var n=this.$.generator.fetchRowNode(t);if(n){var e=this.getRelativeOffset(n,this.hasNode()),r=enyo.dom.getBounds(n);return{h:r.height,w:r.width,left:e.left,top:e.top}}},getRelativeOffset:function(t,n){var e={top:0,left:0};if(t!==n&&t.parentNode)do e.top+=t.offsetTop||0,e.left+=t.offsetLeft||0,t=t.offsetParent;while(t&&t!==n);return e},replaceNodeWithPlaceholder:function(t){var n=this.$.generator.fetchRowNode(t);if(!n)return enyo.log("No node - "+t),void 0;this.placeholderNode=this.createPlaceholderNode(n),this.hiddenNode=this.hideNode(n);var e=this.pageForPageNumber(this.currentPageNumber);e.hasNode().insertBefore(this.placeholderNode,this.hiddenNode)},createPlaceholderNode:function(t){var n=this.$.placeholder.hasNode().cloneNode(!0),e=enyo.dom.getBounds(t);return n.style.height=e.height+"px",n.style.width=e.width+"px",n},removePlaceholderNode:function(){this.removeNode(this.placeholderNode),this.placeholderNode=null},removeDraggingRowNode:function(){this.draggingRowNode=null;var t=this.$.holdingarea.hasNode();t.innerHTML=""},removeNode:function(t){t&&t.parentNode&&t.parentNode.removeChild(t)},updatePageSize:function(t){if(!(0>t)){var n=this.pageForPageNumber(t,!0);if(n){var e=this.pageSizes[t],r=Math.max(1,n.getBounds().height);this.pageSizes[t]=r,this.portSize+=r-e}}},updatePagePositions:function(t){this.positionPage(this.currentPageNumber,this.pageForPageNumber(this.currentPageNumber)),this.positionPage(t,this.pageForPageNumber(t))},correctPageSizes:function(){var t=this.initialPageNumber%2;this.updatePageSize(this.currentPageNumber,this.$["page"+this.currentPage]),t!=this.currentPageNumber&&this.updatePageSize(this.initialPageNumber,this.$["page"+t])},hideNode:function(t){return t.style.display="none",t},showNode:function(t){return t.style.display="block",t},dropPinnedRow:function(t){this.moveReorderedContainerToDroppedPosition(t),this.completeReorderTimeout=setTimeout(this.bindSafely(this.completeFinishReordering,t),100)},cancelPinnedMode:function(t){this.placeholderRowIndex=this.draggingRowIndex,this.dropPinnedRow(t)},getRowIndexFromCoordinate:function(t){var n=this.getScrollTop()+t-enyo.dom.calcNodePosition(this.hasNode()).top;if(0>n)return-1;var e=this.positionToPageInfo(n),r=e.no==this.p0?this.p0RowBounds:this.p1RowBounds;if(!r)return this.count;for(var i=e.pos,o=this.placeholderNode?enyo.dom.getBounds(this.placeholderNode).height:0,s=0,a=e.startRow;e.endRow>=a;++a){if(a===this.placeholderRowIndex&&(s+=o,s>=i))return-1;if(a!==this.draggingRowIndex&&(s+=r[a].height,s>=i))return a}return a},getIndexPosition:function(t){return enyo.dom.calcNodePosition(this.$.generator.fetchRowNode(t))},setItemPosition:function(t,n){var e=this.getNodeStyle(n),r="ScrollStrategy"==this.getStrategyKind()?e.top:e.top-this.getScrollTop(),i="top:"+r+"px; left:"+e.left+"px;";t.addStyles(i)},setItemBounds:function(t,n){var e=this.getNodeStyle(n),r="width:"+e.w+"px; height:"+e.h+"px;";t.addStyles(r)},reorderScroll:function(){"ScrollStrategy"==this.getStrategyKind()&&this.$.reorderContainer.addStyles("top:"+(this.initialPinPosition+this.getScrollTop()-this.rowSize)+"px;"),this.updatePlaceholderPosition(this.initialPinPosition)},hideReorderingRow:function(){var t=this.hasNode().querySelector('[data-enyo-index="'+this.draggingRowIndex+'"]');t&&(this.hiddenNode=this.hideNode(t))},isReordering:function(){return this.draggingRowIndex>-1},isSwiping:function(){return null!=this.swipeIndex&&!this.swipeComplete&&null!=this.swipeDirection},swipeDragStart:function(t,n){return null==n.index||n.vertical?!0:(this.completeSwipeTimeout&&this.completeSwipe(n),this.swipeComplete=!1,this.swipeIndex!=n.index&&(this.clearSwipeables(),this.swipeIndex=n.index),this.swipeDirection=n.xDirection,this.persistentItemVisible||this.startSwipe(n),this.draggedXDistance=0,this.draggedYDistance=0,!0)},swipeDrag:function(t,n){return this.persistentItemVisible?(this.dragPersistentItem(n),this.preventDragPropagation):this.isSwiping()?(this.dragSwipeableComponents(this.calcNewDragPosition(n.ddx)),this.draggedXDistance=n.dx,this.draggedYDistance=n.dy,!0):!1},swipeDragFinish:function(t,n){if(this.persistentItemVisible)this.dragFinishPersistentItem(n);else{if(!this.isSwiping())return!1;var e=this.calcPercentageDragged(this.draggedXDistance);e>this.percentageDraggedThreshold&&n.xDirection===this.swipeDirection?this.swipe(this.fastSwipeSpeedMS):this.backOutSwipe(n)}return this.preventDragPropagation},isSwipeable:function(){return this.enableSwipe&&0!==this.$.swipeableComponents.controls.length&&!this.isReordering()&&!this.pinnedReorderMode},positionSwipeableContainer:function(t,n){var e=this.$.generator.fetchRowNode(t);if(e){var r=this.getRelativeOffset(e,this.hasNode()),i=enyo.dom.getBounds(e),o=1==n?-1*i.width:i.width;this.$.swipeableComponents.addStyles("top: "+r.top+"px; left: "+o+"px; height: "+i.height+"px; width: "+i.width+"px;")}},calcNewDragPosition:function(t){var n=this.$.swipeableComponents.getBounds(),e=n.left,r=this.$.swipeableComponents.getBounds(),i=1==this.swipeDirection?0:-1*r.width,o=1==this.swipeDirection?e+t>i?i:e+t:i>e+t?i:e+t;return o},dragSwipeableComponents:function(t){this.$.swipeableComponents.applyStyle("left",t+"px")},startSwipe:function(t){t.index=this.swipeIndex,this.positionSwipeableContainer(this.swipeIndex,t.xDirection),this.$.swipeableComponents.setShowing(!0),this.setPersistentItemOrigin(t.xDirection),this.doSetupSwipeItem(t)},dragPersistentItem:function(t){var n=0,e="right"==this.persistentItemOrigin?Math.max(n,n+t.dx):Math.min(n,n+t.dx);this.$.swipeableComponents.applyStyle("left",e+"px")},dragFinishPersistentItem:function(t){var n=this.calcPercentageDragged(t.dx)>.2,e=t.dx>0?"right":0>t.dx?"left":null;this.persistentItemOrigin==e?n?this.slideAwayItem():this.bounceItem(t):this.bounceItem(t)},setPersistentItemOrigin:function(t){this.persistentItemOrigin=1==t?"left":"right"},calcPercentageDragged:function(t){return Math.abs(t/this.$.swipeableComponents.getBounds().width)},swipe:function(t){this.swipeComplete=!0,this.animateSwipe(0,t)},backOutSwipe:function(){var t=this.$.swipeableComponents.getBounds(),n=1==this.swipeDirection?-1*t.width:t.width;this.animateSwipe(n,this.fastSwipeSpeedMS),this.swipeDirection=null},bounceItem:function(){var t=this.$.swipeableComponents.getBounds();t.left!=t.width&&this.animateSwipe(0,this.normalSwipeSpeedMS)},slideAwayItem:function(){var t=this.$.swipeableComponents,n=t.getBounds().width,e="left"==this.persistentItemOrigin?-1*n:n;this.animateSwipe(e,this.normalSwipeSpeedMS),this.persistentItemVisible=!1,this.setPersistSwipeableItem(!1)},clearSwipeables:function(){this.$.swipeableComponents.setShowing(!1),this.persistentItemVisible=!1,this.setPersistSwipeableItem(!1)},completeSwipe:function(){this.completeSwipeTimeout&&(clearTimeout(this.completeSwipeTimeout),this.completeSwipeTimeout=null),this.getPersistSwipeableItem()?this.persistentItemVisible=!0:(this.$.swipeableComponents.setShowing(!1),this.swipeComplete&&this.doSwipeComplete({index:this.swipeIndex,xDirection:this.swipeDirection})),this.swipeIndex=null,this.swipeDirection=null},animateSwipe:function(t,n){var e=enyo.now(),r=this.$.swipeableComponents,i=parseInt(r.domStyles.left,10),o=t-i;this.stopAnimateSwipe();var s=this.bindSafely(function(){var t=enyo.now()-e,a=t/n,u=i+o*Math.min(a,1);r.applyStyle("left",u+"px"),this.job=enyo.requestAnimationFrame(s),t/n>=1&&(this.stopAnimateSwipe(),this.completeSwipeTimeout=setTimeout(this.bindSafely(function(){this.completeSwipe()}),this.completeSwipeDelayMS))});this.job=enyo.requestAnimationFrame(s)},stopAnimateSwipe:function(){this.job&&(this.job=enyo.cancelRequestAnimationFrame(this.job))}});

// lib/layout/list/source/PulldownList.js
enyo.kind({name:"enyo.PulldownList",kind:"List",touch:!0,pully:null,pulldownTools:[{name:"pulldown",classes:"enyo-list-pulldown",components:[{name:"puller",kind:"Puller"}]}],events:{onPullStart:"",onPullCancel:"",onPull:"",onPullRelease:"",onPullComplete:""},handlers:{onScrollStart:"scrollStartHandler",onScrollStop:"scrollStopHandler",ondragfinish:"dragfinish"},pullingMessage:"Pull down to refresh...",pulledMessage:"Release to refresh...",loadingMessage:"Loading...",pullingIconClass:"enyo-puller-arrow enyo-puller-arrow-down",pulledIconClass:"enyo-puller-arrow enyo-puller-arrow-up",loadingIconClass:"",create:enyo.inherit(function(t){return function(){var n={kind:"Puller",showing:!1,text:this.loadingMessage,iconClass:this.loadingIconClass,onCreate:"setPully"};this.listTools.splice(0,0,n),t.apply(this,arguments),this.setPulling()}}),initComponents:enyo.inherit(function(t){return function(){this.createChrome(this.pulldownTools),this.accel=enyo.dom.canAccelerate(),this.translation=this.accel?"translate3d":"translate",this.strategyKind=this.resetStrategyKind(),t.apply(this,arguments)}}),resetStrategyKind:function(){return enyo.platform.android>=3?"TranslateScrollStrategy":"TouchScrollStrategy"},setPully:function(t,n){this.pully=n.originator},scrollStartHandler:function(){this.firedPullStart=!1,this.firedPull=!1,this.firedPullCancel=!1},scroll:enyo.inherit(function(t){return function(){var n=t.apply(this,arguments);this.completingPull&&this.pully.setShowing(!1);var e=this.getStrategy().$.scrollMath||this.getStrategy(),r=-1*this.getScrollTop();return e.isInOverScroll()&&r>0&&(enyo.dom.transformValue(this.$.pulldown,this.translation,"0,"+r+"px"+(this.accel?",0":"")),this.firedPullStart||(this.firedPullStart=!0,this.pullStart(),this.pullHeight=this.$.pulldown.getBounds().height),r>this.pullHeight&&!this.firedPull&&(this.firedPull=!0,this.firedPullCancel=!1,this.pull()),this.firedPull&&!this.firedPullCancel&&this.pullHeight>r&&(this.firedPullCancel=!0,this.firedPull=!1,this.pullCancel())),n}}),scrollStopHandler:function(){this.completingPull&&(this.completingPull=!1,this.doPullComplete())},dragfinish:function(){if(this.firedPull){var t=this.getStrategy().$.scrollMath||this.getStrategy();t.setScrollY(-1*this.getScrollTop()-this.pullHeight),this.pullRelease()}},completePull:function(){this.completingPull=!0;var t=this.getStrategy().$.scrollMath||this.getStrategy();t.setScrollY(this.pullHeight),t.start()},pullStart:function(){this.setPulling(),this.pully.setShowing(!1),this.$.puller.setShowing(!0),this.doPullStart()},pull:function(){this.setPulled(),this.doPull()},pullCancel:function(){this.setPulling(),this.doPullCancel()},pullRelease:function(){this.$.puller.setShowing(!1),this.pully.setShowing(!0),this.doPullRelease()},setPulling:function(){this.$.puller.setText(this.pullingMessage),this.$.puller.setIconClass(this.pullingIconClass)},setPulled:function(){this.$.puller.setText(this.pulledMessage),this.$.puller.setIconClass(this.pulledIconClass)}}),enyo.kind({name:"enyo.Puller",classes:"enyo-puller",published:{text:"",iconClass:""},events:{onCreate:""},components:[{name:"icon"},{name:"text",tag:"span",classes:"enyo-puller-text"}],create:enyo.inherit(function(t){return function(){t.apply(this,arguments),this.doCreate(),this.textChanged(),this.iconClassChanged()}}),textChanged:function(){this.$.text.setContent(this.text)},iconClassChanged:function(){this.$.icon.setClasses(this.iconClass)}});

// lib/layout/list/source/AroundList.js
enyo.kind({name:"enyo.AroundList",kind:"enyo.List",listTools:[{name:"port",classes:"enyo-list-port enyo-border-box",components:[{name:"aboveClient"},{name:"generator",kind:"FlyweightRepeater",canGenerate:!1,components:[{tag:null,name:"client"}]},{name:"holdingarea",allowHtml:!0,classes:"enyo-list-holdingarea"},{name:"page0",allowHtml:!0,classes:"enyo-list-page"},{name:"page1",allowHtml:!0,classes:"enyo-list-page"},{name:"belowClient"},{name:"placeholder"},{name:"swipeableComponents",style:"position:absolute; display:block; top:-1000px; left:0px;"}]}],aboveComponents:null,initComponents:enyo.inherit(function(t){return function(){t.apply(this,arguments),this.aboveComponents&&this.$.aboveClient.createComponents(this.aboveComponents,{owner:this.owner}),this.belowComponents&&this.$.belowClient.createComponents(this.belowComponents,{owner:this.owner})}}),updateMetrics:function(){this.defaultPageSize=this.rowsPerPage*(this.rowSize||100),this.pageCount=Math.ceil(this.count/this.rowsPerPage),this.aboveHeight=this.$.aboveClient.getBounds().height,this.belowHeight=this.$.belowClient.getBounds().height,this.portSize=this.aboveHeight+this.belowHeight;for(var t=0;this.pageCount>t;t++)this.portSize+=this.getPageSize(t);this.adjustPortSize()},positionPage:function(t,n){n.pageNo=t;var e=this.pageToPosition(t),r=this.bottomUp?this.belowHeight:this.aboveHeight;e+=r,n.applyStyle(this.pageBound,e+"px")},scrollToContentStart:function(){var t=this.bottomUp?this.belowHeight:this.aboveHeight;this.setScrollPosition(t)}});

// lib/layout/list/source/GridFlyweightRepeater.js
enyo.kind({name:"enyo.GridFlyWeightRepeater",kind:"enyo.FlyweightRepeater",events:{onSizeupItem:""},itemsPerRow:0,_itemsFromPreviousPage:0,generateChildHtml:function(){return this.itemFluidWidth||this.itemFixedSize?this._generateChildHtmlEqualSizedItems():this._generateChildHtmlVariableSizedItems()},_generateChildHtmlEqualSizedItems:function(){var t=this.owner.hasNode().clientWidth,n=this.$.client,e="",i=0,r=this.itemWidth,o=this.itemHeight;if(this.itemFluidWidth){i=100/this.itemsPerRow;var s=0;this.itemSpacing>=0&&(s=(this.itemsPerRow+1)*this.itemSpacing,i=100/this.itemsPerRow-100*s/(this.itemsPerRow*t)),r=i/100*t,o=r*(this.itemHeight/this.itemWidth)}for(var a=this.rowOffset;this.rowOffset+this.count>a;a++)n.setAttribute("data-enyo-index",a),this.doSetupItem({index:a,selected:this.isSelected(a)}),this.itemFluidWidth?n.addStyles("width:"+i+"%;height:"+o+"px;"):n.addStyles("width:"+this.itemWidth+"px;height:"+this.itemHeight+"px;"),this.itemSpacing>=0&&(n.addStyles("margin-top:"+this.itemSpacing+"px; margin-left:"+this.itemSpacing+"px;"),a%this.itemsPerRow==this.itemsPerRow-1?n.addStyles("margin-right:"+this.itemSpacing+"px;"):n.addStyles("margin-right: 0px;"),a>=this.count-this.itemsPerRow&&n.addStyles("margin-bottom:"+this.itemSpacing+"px;")),e+=n.generateHtml(),n.teardownRender();return e},_generateChildHtmlVariableSizedItems:function(){this.index=null;var t,n,e=null,i=this.$.client,r=this.owner.hasNode().clientWidth,o=0,s=0,a=0,l=0,u=0,c=0,h=0,$=0,p=0,f=this.itemMinWidth/this.itemMinHeight,d=[{index:0,items:[]}],m=this.owner.$._dummy_.hasNode();0===this.owner.page&&(this._itemsFromPreviousPage=0);var _=this.count+this._itemsFromPreviousPage;for(t=0,n=t+this.rowOffset-this._itemsFromPreviousPage;_>t;t++,n++){$=0,p=0,this.doSizeupItem({index:n,selected:this.isSelected(n)}),$=this.itemWidth,p=this.itemHeight,(!$||0>=$)&&(this.doSetupItem({index:n,selected:this.isSelected(n)}),m.innerHTML=i.generateChildHtml(),$=m.clientWidth,p=m.clientHeight),(!$||0>=$)&&($=this.itemMinWidth,p=this.itemMinHeight),(!p||0>=p)&&(p=this.itemMinHeight),f=$/p,o=Math.min($,r),this.itemMinWidth&&this.itemMinWidth>0&&(o=Math.max($,this.itemMinWidth));var g=t==_-1;if(a=o/f,s+=o,l+=a,e={index:n,pageIndex:t,width:o,height:a},d[h].items.push(e),this.normalizeRows&&(u=s/d[h].items.length,c=l/d[h].items.length,s>=r||g)){d[h].avgHeight=c,d[h].index=h;var v=d[h].items.length,y=(r-s)/v;if(this._itemsFromPreviousPage=0,g&&y+u>1.5*u){this._itemsFromPreviousPage=v,d[h]={avgHeight:0,index:h,items:[]};break}this._normalizeRow(d[h]),g||(h++,d[h]={avgHeight:0,index:0,items:[]}),s=l=c=u=o=a=$=p=0}}m.innerHTML="";var b,w="",x="";for(t=0;d.length>t;t++)if(b=d[t],b.items&&0!==b.items.length)for(var S=0;b.items.length>S;S++)e=b.items[S],this.doSetupItem({index:e.index,selected:this.isSelected(e.index)}),i.setAttribute("data-enyo-index",e.index),i.addStyles("width:"+e.width+"px;height:"+e.height+"px;"),this.itemSpacing>=0&&i.addStyles("margin-top:"+this.itemSpacing+"px;margin-left:"+this.itemSpacing+"px;"),x=i.generateHtml(),i.teardownRender(),w+=x;return w},_normalizeRow:function(t){if(this.normalizeRows&&t.items&&0!==t.items.length){var n,e,i=this.owner.hasNode().clientWidth,r=0,o=0,s="",a=0,l=0,u=0,c=0;for(e=0;t.items.length>e;e++)n=t.items[e],a=n.width,l=n.height,o=Math.floor(t.avgHeight/l*a),s+=" "+o,n.width=o,n.height=t.avgHeight,r+=o,this.itemSpacing>=0&&(r+=this.itemSpacing,e==t.items.length-1&&(r+=this.itemSpacing));for(c=i-r,u=i/(i-c),r=0,o=0,s="",e=0;t.items.length>e;e++){n=t.items[e],a=n.width,l=n.height,o=Math.floor(a*u),s+=" "+o;var h=Math.floor(l*u);n.width=o,n.height=h,r+=o,this.itemSpacing>=0&&(r+=this.itemSpacing,e==t.items.length-1&&(r+=this.itemSpacing))}c=i-r,n=t.items[t.items.length-1],a=n.width,l=n.height,n.width=a+c,n.height=l}}});

// lib/layout/list/source/GridList.js
enyo.kind({name:"enyo.GridList",kind:"enyo.List",classes:"enyo-gridlist",published:{itemFluidWidth:!1,itemFixedSize:!1,itemMinWidth:160,itemMinHeight:160,itemWidth:160,itemHeight:160,itemSpacing:0,normalizeRows:!1},horizontal:"hidden",events:{onSizeupItem:""},show:function(t){this._calculateItemsPerRow(),this.setCount(t),this.reset()},create:enyo.inherit(function(t){return function(){this._setComponents(),t.apply(this,arguments),this.itemFluidWidthChanged(),this.itemFixedSizeChanged(),this.itemMinWidthChanged(),this.itemMinHeightChanged(),this.itemWidthChanged(),this.itemHeightChanged(),this.itemSpacingChanged(),this.normalizeRowsChanged(),this.$.generator.setClientClasses("enyo-gridlist-row")}}),itemFluidWidthChanged:function(){this.$.generator.itemFluidWidth=this.itemFluidWidth,this.setNormalizeRows(!this.itemFluidWidth&&!this.itemFixedSize)},itemFixedSizeChanged:function(){this.$.generator.itemFixedSize=this.itemFixedSize,this.setNormalizeRows(!this.itemFluidWidth&&!this.itemFixedSize)},itemWidthChanged:function(){this.$.generator.itemWidth=this.itemWidth},itemHeightChanged:function(){this.$.generator.itemHeight=this.itemHeight},itemMinWidthChanged:function(){var t=this.hasNode();t&&(this.itemMinWidth||(this.itemMinWidth=160),this.itemMinWidth=Math.min(this.itemMinWidth,t.clientWidth)),this.$.generator.itemMinWidth=this.itemMinWidth},itemMinHeightChanged:function(){var t=this.hasNode();t&&(this.itemMinHeight||(this.itemMinHeight=160),this.itemMinHeight=Math.min(this.itemMinHeight,t.clientHeight)),this.$.generator.itemMinHeight=this.itemMinHeight},itemSpacingChanged:function(){0>this.itemSpacing&&(this.itemSpacing=0),this.itemSpacing=this.itemSpacing,this.$.generator.itemSpacing=this.itemSpacing},normalizeRowsChanged:function(){this.$.generator.normalizeRows=this.normalizeRows},bottomUpChanged:function(){this.bottomUp=!1,this.pageBound="top"},reflow:enyo.inherit(function(t){return function(){this._calculateItemsPerRow(),t.apply(this,arguments)}}),_calculateItemsPerRow:function(){var t=this.hasNode();if(t){this.itemsPerRow=Math.floor((t.clientWidth-this.itemSpacing)/(this.itemMinWidth+this.itemSpacing));var e=Math.round((t.clientHeight-this.itemSpacing)/(this.itemMinHeight+this.itemSpacing));if(this.itemFixedSize||this.itemFluidWidth){var n=Math.floor((t.clientWidth-this.itemSpacing)/(this.itemWidth+this.itemSpacing)),i=Math.floor(n),r=Math.ceil(n),o=t.clientWidth-this.itemSpacing-r*(this.itemWidth+this.itemSpacing);this.itemsPerRow=o>0?r:i,e=Math.round((t.clientHeight-this.itemSpacing)/(this.itemHeight+this.itemSpacing))}this.itemsPerRow=Math.max(1,this.itemsPerRow),this.rowsPerPage=3*this.itemsPerRow*e,this.$.generator.itemsPerRow=this.itemsPerRow}},_setComponents:function(){this.listTools=enyo.clone(this.listTools),this.listTools[0]=enyo.clone(this.listTools[0]),this.listTools[0].components=enyo.clone(this.listTools[0].components);var t=this.listTools[0].components;this.createComponent(new enyo.Component({name:"_dummy_",allowHtml:!0,classes:"enyo-gridlist-dummy",showing:!1},{owner:this}));for(var e=0;t.length>e;e++)if("generator"==t[e].name)return t[e]=enyo.clone(t[e]),t[e].kind="enyo.GridFlyWeightRepeater",void 0}});

// lib/layout/list/source/GridListImageItem.js
enyo.kind({name:"enyo.GridListImageItem",classes:"enyo-gridlist-imageitem",components:[{name:"image",kind:"enyo.Image"},{name:"caption",classes:"caption"},{name:"subCaption",classes:"sub-caption"}],published:{source:"",caption:"",subCaption:"",selected:!1},bindings:[{from:".source",to:".$.image.src"},{from:".caption",to:".$.caption.content"},{from:".caption",to:".$.caption.showing",kind:"enyo.EmptyBinding"},{from:".subCaption",to:".$.subCaption.content"},{from:".subCaption",to:".$.subCaption.showing",kind:"enyo.EmptyBinding"}],create:enyo.inherit(function(t){return function(){t.apply(this,arguments),this.selectedChanged()}}),selectedChanged:function(){this.addRemoveClass("selected",this.selected)},disabledChanged:function(){this.addRemoveClass("disabled",this.disabled)}});

// lib/layout/slideable/source/Slideable.js
enyo.kind({name:"enyo.Slideable",kind:"Control",published:{axis:"h",value:0,unit:"px",min:0,max:0,accelerated:"auto",overMoving:!0,draggable:!0},events:{onAnimateFinish:"",onChange:""},preventDragPropagation:!1,tools:[{kind:"Animator",onStep:"animatorStep",onEnd:"animatorComplete"}],handlers:{ondragstart:"dragstart",ondrag:"drag",ondragfinish:"dragfinish"},kDragScalar:1,dragEventProp:"dx",unitModifier:!1,canTransform:!1,create:enyo.inherit(function(t){return function(){t.apply(this,arguments),this.acceleratedChanged(),this.transformChanged(),this.axisChanged(),this.valueChanged(),this.addClass("enyo-slideable")}}),initComponents:enyo.inherit(function(t){return function(){this.createComponents(this.tools),t.apply(this,arguments)}}),rendered:enyo.inherit(function(t){return function(){t.apply(this,arguments),this.canModifyUnit(),this.updateDragScalar()}}),resizeHandler:enyo.inherit(function(t){return function(){t.apply(this,arguments),this.updateDragScalar()}}),canModifyUnit:function(){if(!this.canTransform){var t=this.getInitialStyleValue(this.hasNode(),this.boundary);t.match(/px/i)&&"%"===this.unit&&(this.unitModifier=this.getBounds()[this.dimension])}},getInitialStyleValue:function(t,n){var e=enyo.dom.getComputedStyle(t);return e?e.getPropertyValue(n):t&&t.currentStyle?t.currentStyle[n]:"0"},updateBounds:function(t,n){var e={};e[this.boundary]=t,this.setBounds(e,this.unit),this.setInlineStyles(t,n)},updateDragScalar:function(){if("%"==this.unit){var t=this.getBounds()[this.dimension];this.kDragScalar=t?100/t:1,this.canTransform||this.updateBounds(this.value,100)}},transformChanged:function(){this.canTransform=enyo.dom.canTransform()},acceleratedChanged:function(){(!enyo.platform.android||2>=enyo.platform.android)&&enyo.dom.accelerate(this,this.accelerated)},axisChanged:function(){var t="h"==this.axis;this.dragMoveProp=t?"dx":"dy",this.shouldDragProp=t?"horizontal":"vertical",this.transform=t?"translateX":"translateY",this.dimension=t?"width":"height",this.boundary=t?"left":"top"},setInlineStyles:function(t,n){var e={};this.unitModifier?(e[this.boundary]=this.percentToPixels(t,this.unitModifier),e[this.dimension]=this.unitModifier,this.setBounds(e)):(n?e[this.dimension]=n:e[this.boundary]=t,this.setBounds(e,this.unit))},valueChanged:function(t){var n=this.value;this.isOob(n)&&!this.isAnimating()&&(this.value=this.overMoving?this.dampValue(n):this.clampValue(n)),enyo.platform.android>2&&(this.value?(0===t||void 0===t)&&enyo.dom.accelerate(this,this.accelerated):enyo.dom.accelerate(this,!1)),this.canTransform?enyo.dom.transformValue(this,this.transform,this.value+this.unit):this.setInlineStyles(this.value,!1),this.doChange()},getAnimator:function(){return this.$.animator},isAtMin:function(){return this.value<=this.calcMin()},isAtMax:function(){return this.value>=this.calcMax()},calcMin:function(){return this.min},calcMax:function(){return this.max},clampValue:function(t){var n=this.calcMin(),e=this.calcMax();return Math.max(n,Math.min(t,e))},dampValue:function(t){return this.dampBound(this.dampBound(t,this.min,1),this.max,-1)},dampBound:function(t,n,e){var i=t;return n*e>i*e&&(i=n+(i-n)/4),i},percentToPixels:function(t,n){return Math.floor(n/100*t)},pixelsToPercent:function(t){var n=this.unitModifier?this.getBounds()[this.dimension]:this.container.getBounds()[this.dimension];return 100*(t/n)},shouldDrag:function(t){return this.draggable&&t[this.shouldDragProp]},isOob:function(t){return t>this.calcMax()||this.calcMin()>t},dragstart:function(t,n){return this.shouldDrag(n)?(n.preventDefault(),this.$.animator.stop(),n.dragInfo={},this.dragging=!0,this.drag0=this.value,this.dragd0=0,this.preventDragPropagation):void 0},drag:function(t,n){if(this.dragging){n.preventDefault();var e=this.canTransform?n[this.dragMoveProp]*this.kDragScalar:this.pixelsToPercent(n[this.dragMoveProp]),i=this.drag0+e,r=e-this.dragd0;return this.dragd0=e,r&&(n.dragInfo.minimizing=0>r),this.setValue(i),this.preventDragPropagation}},dragfinish:function(t,n){return this.dragging?(this.dragging=!1,this.completeDrag(n),n.preventTap(),this.preventDragPropagation):void 0},completeDrag:function(t){this.value!==this.calcMax()&&this.value!=this.calcMin()&&this.animateToMinMax(t.dragInfo.minimizing)},isAnimating:function(){return this.$.animator.isAnimating()},play:function(t,n){this.$.animator.play({startValue:t,endValue:n,node:this.hasNode()})},animateTo:function(t){this.play(this.value,t)},animateToMin:function(){this.animateTo(this.calcMin())},animateToMax:function(){this.animateTo(this.calcMax())},animateToMinMax:function(t){t?this.animateToMin():this.animateToMax()},animatorStep:function(t){return this.setValue(t.value),!0},animatorComplete:function(t){return this.doAnimateFinish(t),!0},toggleMinMax:function(){this.animateToMinMax(!this.isAtMin())}});

// lib/layout/panels/source/arrangers/Arranger.js
enyo.kind({name:"enyo.Arranger",kind:"Layout",layoutClass:"enyo-arranger",accelerated:"auto",dragProp:"ddx",dragDirectionProp:"xDirection",canDragProp:"horizontal",incrementalPoints:!1,destroy:enyo.inherit(function(t){return function(){for(var n,e=this.container.getPanels(),i=0;n=e[i];i++)n._arranger=null;t.apply(this,arguments)}}),arrange:function(){},size:function(){},start:function(){var t=this.container.fromIndex,n=this.container.toIndex,e=this.container.transitionPoints=[t];if(this.incrementalPoints)for(var i=Math.abs(n-t)-2,r=t;i>=0;)r+=t>n?-1:1,e.push(r),i--;e.push(this.container.toIndex)},finish:function(){},calcArrangementDifference:function(){},canDragEvent:function(t){return t[this.canDragProp]},calcDragDirection:function(t){return t[this.dragDirectionProp]},calcDrag:function(t){return t[this.dragProp]},drag:function(t,n,e,i,r){var o=this.measureArrangementDelta(-t,n,e,i,r);return o},measureArrangementDelta:function(t,n,e,i,r){var o=this.calcArrangementDifference(n,e,i,r),s=o?t/Math.abs(o):0;return s*=this.container.fromIndex>this.container.toIndex?-1:1},_arrange:function(t){this.containerBounds||this.reflow();var n=this.getOrderedControls(t);this.arrange(n,t)},arrangeControl:function(t,n){t._arranger=enyo.mixin(t._arranger||{},n)},flow:function(){this.c$=[].concat(this.container.getPanels()),this.controlsIndex=0;for(var t,n=0,e=this.container.getPanels();t=e[n];n++)if(enyo.dom.accelerate(t,!t.preventAccelerate&&this.accelerated),enyo.platform.safari)for(var i,r=t.children,o=0;i=r[o];o++)enyo.dom.accelerate(i,this.accelerated)},reflow:function(){var t=this.container.hasNode();this.containerBounds=t?{width:t.clientWidth,height:t.clientHeight}:{},this.size()},flowArrangement:function(){var t=this.container.arrangement;if(t)for(var n,e=0,i=this.container.getPanels();(n=i[e])&&t[e];e++)this.flowControl(n,t[e])},flowControl:function(t,n){enyo.Arranger.positionControl(t,n);var e=n.opacity;null!=e&&enyo.Arranger.opacifyControl(t,e)},getOrderedControls:function(t){for(var n=Math.floor(t),e=n-this.controlsIndex,i=e>0,r=this.c$||[],o=0;Math.abs(e)>o;o++)i?r.push(r.shift()):r.unshift(r.pop());return this.controlsIndex=n,r},statics:{positionControl:function(t,n,e){var i=e||"px";if(!this.updating)if(!enyo.dom.canTransform()||t.preventTransform||enyo.platform.android||10===enyo.platform.ie)enyo.dom.canTransform()&&t.preventTransform&&enyo.dom.transform(t,{translateX:null,translateY:null}),t.setBounds(n,e);else{var r=n.left,o=n.top;r=enyo.isString(r)?r:r&&r+i,o=enyo.isString(o)?o:o&&o+i,enyo.dom.transform(t,{translateX:r||null,translateY:o||null})}},opacifyControl:function(t,n){var e=n;e=e>.99?1:.01>e?0:e,9>enyo.platform.ie?t.applyStyle("filter","progid:DXImageTransform.Microsoft.Alpha(Opacity="+100*e+")"):t.applyStyle("opacity",e)}}});

// lib/layout/panels/source/arrangers/CardArranger.js
enyo.kind({name:"enyo.CardArranger",kind:"Arranger",layoutClass:"enyo-arranger enyo-arranger-fit",calcArrangementDifference:function(){return this.containerBounds.width},arrange:function(t){for(var n,e,i=0;n=t[i];i++)e=0===i?1:0,this.arrangeControl(n,{opacity:e})},start:enyo.inherit(function(t){return function(){t.apply(this,arguments);for(var n,e=this.container.getPanels(),i=0;n=e[i];i++){var r=n.showing;n.setShowing(i==this.container.fromIndex||i==this.container.toIndex),n.showing&&!r&&n.resized()}}}),finish:enyo.inherit(function(t){return function(){t.apply(this,arguments);for(var n,e=this.container.getPanels(),i=0;n=e[i];i++)n.setShowing(i==this.container.toIndex)}}),destroy:enyo.inherit(function(t){return function(){for(var n,e=this.container.getPanels(),i=0;n=e[i];i++)enyo.Arranger.opacifyControl(n,1),n.showing||n.setShowing(!0);t.apply(this,arguments)}})});

// lib/layout/panels/source/arrangers/CardSlideInArranger.js
enyo.kind({name:"enyo.CardSlideInArranger",kind:"CardArranger",start:function(){for(var t,n=this.container.getPanels(),e=0;t=n[e];e++){var i=t.showing;t.setShowing(e==this.container.fromIndex||e==this.container.toIndex),t.showing&&!i&&t.resized()}var r=this.container.fromIndex;e=this.container.toIndex,this.container.transitionPoints=[e+"."+r+".s",e+"."+r+".f"]},finish:enyo.inherit(function(t){return function(){t.apply(this,arguments);for(var n,e=this.container.getPanels(),i=0;n=e[i];i++)n.setShowing(i==this.container.toIndex)}}),arrange:function(t,n){for(var e,i,r=n.split("."),o=r[0],s=r[1],a="s"==r[2],l=this.containerBounds.width,u=0,c=this.container.getPanels();e=c[u];u++)i=l,s==u&&(i=a?0:-l),o==u&&(i=a?l:0),s==u&&s==o&&(i=0),this.arrangeControl(e,{left:i})},destroy:enyo.inherit(function(t){return function(){for(var n,e=this.container.getPanels(),i=0;n=e[i];i++)enyo.Arranger.positionControl(n,{left:null});t.apply(this,arguments)}})});

// lib/layout/panels/source/arrangers/CarouselArranger.js
enyo.kind({name:"enyo.CarouselArranger",kind:"Arranger",size:function(){var t,n,e,i,r,o=this.container.getPanels(),s=this.containerPadding=this.container.hasNode()?enyo.dom.calcPaddingExtents(this.container.node):{},a=this.containerBounds;a.height-=s.top+s.bottom,a.width-=s.left+s.right;var l;for(t=0,e=0;r=o[t];t++)i=enyo.dom.calcMarginExtents(r.hasNode()),r.width=r.getBounds().width,r.marginWidth=i.right+i.left,e+=(r.fit?0:r.width)+r.marginWidth,r.fit&&(l=r);if(l){var u=a.width-e;l.width=u>=0?u:l.width}for(t=0,n=s.left;r=o[t];t++)r.setBounds({top:s.top,bottom:s.bottom,width:r.fit?r.width:null})},arrange:function(t,n){this.container.wrap?this.arrangeWrap(t,n):this.arrangeNoWrap(t,n)},arrangeNoWrap:function(t,n){var e,i,r,o,s=this.container.getPanels(),a=this.container.clamp(n),l=this.containerBounds.width;for(e=a,r=0;(o=s[e])&&(r+=o.width+o.marginWidth,!(r>l));e++);var u=l-r,c=0;if(u>0)for(e=a-1,i=0;o=s[e];e--)if(i+=o.width+o.marginWidth,0>=u-i){c=u-i,a=e;break}var h,$;for(e=0,$=this.containerPadding.left+c;o=s[e];e++)h=o.width+o.marginWidth,a>e?this.arrangeControl(o,{left:-h}):(this.arrangeControl(o,{left:Math.floor($)}),$+=h)},arrangeWrap:function(t){for(var n,e=0,i=this.containerPadding.left;n=t[e];e++)this.arrangeControl(n,{left:i}),i+=n.width+n.marginWidth},calcArrangementDifference:function(t,n,e,i){var r=Math.abs(t%this.c$.length);return n[r].left-i[r].left},destroy:enyo.inherit(function(t){return function(){for(var n,e=this.container.getPanels(),i=0;n=e[i];i++)enyo.Arranger.positionControl(n,{left:null,top:null}),n.applyStyle("top",null),n.applyStyle("bottom",null),n.applyStyle("left",null),n.applyStyle("width",null);t.apply(this,arguments)}})});

// lib/layout/panels/source/arrangers/CollapsingArranger.js
enyo.kind({name:"enyo.CollapsingArranger",kind:"CarouselArranger",peekWidth:0,size:enyo.inherit(function(t){return function(){this.clearLastSize(),t.apply(this,arguments)}}),clearLastSize:function(){for(var t,n=0,e=this.container.getPanels();t=e[n];n++)t._fit&&n!=e.length-1&&(t.applyStyle("width",null),t._fit=null)},constructor:enyo.inherit(function(t){return function(){t.apply(this,arguments),this.peekWidth=null!=this.container.peekWidth?this.container.peekWidth:this.peekWidth}}),arrange:function(t,n){for(var e,i=this.container.getPanels(),r=0,o=this.containerPadding.left,s=0;e=i[r];r++)e.getShowing()?(this.arrangeControl(e,{left:o+s*this.peekWidth}),r>=n&&(o+=e.width+e.marginWidth-this.peekWidth),s++):(this.arrangeControl(e,{left:o}),r>=n&&(o+=e.width+e.marginWidth)),r==i.length-1&&0>n&&this.arrangeControl(e,{left:o-n})},calcArrangementDifference:function(t,n,e,i){var r=this.container.getPanels().length-1;return Math.abs(i[r].left-n[r].left)},flowControl:enyo.inherit(function(t){return function(n,e){if(t.apply(this,arguments),this.container.realtimeFit){var i=this.container.getPanels(),r=i.length-1,o=i[r];n==o&&this.fitControl(n,e.left)}}}),finish:enyo.inherit(function(t){return function(){if(t.apply(this,arguments),!this.container.realtimeFit&&this.containerBounds){var n=this.container.getPanels(),e=this.container.arrangement,i=n.length-1,r=n[i];this.fitControl(r,e[i].left)}}}),fitControl:function(t,n){t._fit=!0,t.applyStyle("width",this.containerBounds.width-n+"px"),t.resized()}});

// lib/layout/panels/source/arrangers/DockRightArranger.js
enyo.kind({name:"enyo.DockRightArranger",kind:"Arranger",basePanel:!1,overlap:0,layoutWidth:0,constructor:enyo.inherit(function(t){return function(){t.apply(this,arguments),this.overlap=null!=this.container.overlap?this.container.overlap:this.overlap,this.layoutWidth=null!=this.container.layoutWidth?this.container.layoutWidth:this.layoutWidth}}),size:function(){var t,n,e,i=this.container.getPanels(),r=this.containerPadding=this.container.hasNode()?enyo.dom.calcPaddingExtents(this.container.node):{},o=this.containerBounds;o.width-=r.left+r.right;var s,a=o.width,l=i.length;for(this.container.transitionPositions={},t=0;e=i[t];t++)e.width=0===t&&this.container.basePanel?a:e.getBounds().width;for(t=0;e=i[t];t++){0===t&&this.container.basePanel&&e.setBounds({width:a}),e.setBounds({top:r.top,bottom:r.bottom});for(var u=0;e=i[u];u++){var c;if(0===t&&this.container.basePanel)c=0;else if(t>u)c=a;else{if(t!==u)break;s=a>this.layoutWidth?this.overlap:0,c=a-i[t].width+s}this.container.transitionPositions[t+"."+u]=c}if(l>u)for(var h=!1,$=t+1;l>$;$++){if(s=0,h)s=0;else if(i[t].width+i[$].width-this.overlap>a)s=0,h=!0;else{for(s=i[t].width-this.overlap,n=t;$>n;n++){var p=s+i[n+1].width-this.overlap;if(!(a>p)){s=a;break}s=p}s=a-s}this.container.transitionPositions[t+"."+$]=s}}},arrange:function(t,n){var e,i,r=this.container.getPanels(),o=this.container.clamp(n);for(e=0;i=r[e];e++){var s=this.container.transitionPositions[e+"."+o];this.arrangeControl(i,{left:s})}},calcArrangementDifference:function(t,n,e){var i=this.container.getPanels(),r=e>t?i[e].width:i[t].width;return r},destroy:enyo.inherit(function(t){return function(){for(var n,e=this.container.getPanels(),i=0;n=e[i];i++)enyo.Arranger.positionControl(n,{left:null,top:null}),n.applyStyle("top",null),n.applyStyle("bottom",null),n.applyStyle("left",null),n.applyStyle("width",null);t.apply(this,arguments)}})});

// lib/layout/panels/source/arrangers/OtherArrangers.js
enyo.kind({name:"enyo.LeftRightArranger",kind:"Arranger",margin:40,axisSize:"width",offAxisSize:"height",axisPosition:"left",constructor:enyo.inherit(function(t){return function(){t.apply(this,arguments),this.margin=null!=this.container.margin?this.container.margin:this.margin}}),size:function(){for(var t,n,e=this.container.getPanels(),i=this.containerBounds[this.axisSize],r=i-this.margin-this.margin,o=0;n=e[o];o++)t={},t[this.axisSize]=r,t[this.offAxisSize]="100%",n.setBounds(t)},start:enyo.inherit(function(t){return function(){t.apply(this,arguments);for(var n,e=this.container.fromIndex,i=this.container.toIndex,r=this.getOrderedControls(i),o=Math.floor(r.length/2),s=0;n=r[s];s++)e>i?s==r.length-o?n.applyStyle("z-index",0):n.applyStyle("z-index",1):s==r.length-1-o?n.applyStyle("z-index",0):n.applyStyle("z-index",1)}}),arrange:function(t,n){var e,i,r;if(1==this.container.getPanels().length)return r={},r[this.axisPosition]=this.margin,this.arrangeControl(this.container.getPanels()[0],r),void 0;var o=Math.floor(this.container.getPanels().length/2),s=this.getOrderedControls(Math.floor(n)-o),a=this.containerBounds[this.axisSize]-this.margin-this.margin,l=this.margin-a*o;for(e=0;i=s[e];e++)r={},r[this.axisPosition]=l,this.arrangeControl(i,r),l+=a},calcArrangementDifference:function(t,n,e,i){if(1==this.container.getPanels().length)return 0;var r=Math.abs(t%this.c$.length);return n[r][this.axisPosition]-i[r][this.axisPosition]},destroy:enyo.inherit(function(t){return function(){for(var n,e=this.container.getPanels(),i=0;n=e[i];i++)enyo.Arranger.positionControl(n,{left:null,top:null}),enyo.Arranger.opacifyControl(n,1),n.applyStyle("left",null),n.applyStyle("top",null),n.applyStyle("height",null),n.applyStyle("width",null);t.apply(this,arguments)}})}),enyo.kind({name:"enyo.TopBottomArranger",kind:"LeftRightArranger",dragProp:"ddy",dragDirectionProp:"yDirection",canDragProp:"vertical",axisSize:"height",offAxisSize:"width",axisPosition:"top"}),enyo.kind({name:"enyo.SpiralArranger",kind:"Arranger",incrementalPoints:!0,inc:20,size:function(){for(var t,n=this.container.getPanels(),e=this.containerBounds,i=this.controlWidth=e.width/3,r=this.controlHeight=e.height/3,o=0;t=n[o];o++)t.setBounds({width:i,height:r})},arrange:function(t){for(var n,e=this.inc,i=0,r=t.length;n=t[i];i++){var o=Math.cos(2*(i/r)*Math.PI)*i*e+this.controlWidth,s=Math.sin(2*(i/r)*Math.PI)*i*e+this.controlHeight;this.arrangeControl(n,{left:o,top:s})}},start:enyo.inherit(function(t){return function(){t.apply(this,arguments);for(var n,e=this.getOrderedControls(this.container.toIndex),i=0;n=e[i];i++)n.applyStyle("z-index",e.length-i)}}),calcArrangementDifference:function(){return this.controlWidth},destroy:enyo.inherit(function(t){return function(){for(var n,e=this.container.getPanels(),i=0;n=e[i];i++)n.applyStyle("z-index",null),enyo.Arranger.positionControl(n,{left:null,top:null}),n.applyStyle("left",null),n.applyStyle("top",null),n.applyStyle("height",null),n.applyStyle("width",null);t.apply(this,arguments)}})}),enyo.kind({name:"enyo.GridArranger",kind:"Arranger",incrementalPoints:!0,colWidth:100,colHeight:100,size:function(){for(var t,n=this.container.getPanels(),e=this.colWidth,i=this.colHeight,r=0;t=n[r];r++)t.setBounds({width:e,height:i})},arrange:function(t){for(var n,e=this.colWidth,i=this.colHeight,r=Math.max(1,Math.floor(this.containerBounds.width/e)),o=0,s=0;t.length>s;o++)for(var a=0;r>a&&(n=t[s]);a++,s++)this.arrangeControl(n,{left:e*a,top:i*o})},flowControl:enyo.inherit(function(t){return function(n,e){t.apply(this,arguments),enyo.Arranger.opacifyControl(n,0!==e.top%this.colHeight?.25:1)}}),calcArrangementDifference:function(){return this.colWidth},destroy:enyo.inherit(function(t){return function(){for(var n,e=this.container.getPanels(),i=0;n=e[i];i++)enyo.Arranger.positionControl(n,{left:null,top:null}),n.applyStyle("left",null),n.applyStyle("top",null),n.applyStyle("height",null),n.applyStyle("width",null);t.apply(this,arguments)}})});

// lib/layout/panels/source/Panels.js
enyo.kind({name:"enyo.Panels",classes:"enyo-panels",published:{index:0,draggable:!0,animate:!0,wrap:!1,arrangerKind:"CardArranger",narrowFit:!0},events:{onTransitionStart:"",onTransitionFinish:""},handlers:{ondragstart:"dragstart",ondrag:"drag",ondragfinish:"dragfinish",onscroll:"domScroll"},tools:[{kind:"Animator",onStep:"step",onEnd:"completed"}],fraction:0,create:enyo.inherit(function(t){return function(){this.transitionPoints=[],t.apply(this,arguments),this.arrangerKindChanged(),this.narrowFitChanged(),this.indexChanged()}}),rendered:enyo.inherit(function(t){return function(){t.apply(this,arguments),enyo.makeBubble(this,"scroll")}}),domScroll:function(){this.hasNode()&&this.node.scrollLeft>0&&(this.node.scrollLeft=0)},initComponents:enyo.inherit(function(t){return function(){this.createChrome(this.tools),t.apply(this,arguments)}}),arrangerKindChanged:function(){this.setLayoutKind(this.arrangerKind)},narrowFitChanged:function(){this.addRemoveClass("enyo-panels-fit-narrow",this.narrowFit)},destroy:enyo.inherit(function(t){return function(){this.destroying=!0,t.apply(this,arguments)}}),removeControl:enyo.inherit(function(t){return function(n){if(this.destroying)return t.apply(this,arguments);var e=-1,i=enyo.indexOf(n,this.controls);i===this.index&&(e=Math.max(i-1,0)),t.apply(this,arguments),-1!==e&&this.controls.length>0&&(this.setIndex(e),this.flow(),this.reflow())}}),isPanel:function(){return!0},flow:enyo.inherit(function(t){return function(){this.arrangements=[],t.apply(this,arguments)}}),reflow:enyo.inherit(function(t){return function(){this.arrangements=[],t.apply(this,arguments),this.refresh()}}),getPanels:function(){var t=this.controlParent||this;return t.children},getActive:function(){var t=this.getPanels(),n=this.index%t.length;return 0>n&&(n+=t.length),t[n]},getAnimator:function(){return this.$.animator},setIndex:function(t){var n=this.get("index");this.index=this.clamp(t),this.notifyObservers("index",n,t)},setIndexDirect:function(t){this.setIndex(t),this.completed()},selectPanelByName:function(t){if(t)for(var n=0,e=this.getPanels(),i=e.length;i>n;++n)if(t===e[n].name)return this.setIndex(n),n},previous:function(){var t=this.index-1;this.wrap&&0>t&&(t=this.getPanels().length-1),this.setIndex(t)},next:function(){var t=this.index+1;this.wrap&&t>=this.getPanels().length&&(t=0),this.setIndex(t)},clamp:function(t){var n=this.getPanels().length-1;return this.wrap?t:Math.max(0,Math.min(t,n))},indexChanged:function(t){this.lastIndex=t,!this.dragging&&this.$.animator&&(this.$.animator.isAnimating()&&(this.finishTransitionInfo&&(this.finishTransitionInfo.animating=!0),this.completed()),this.$.animator.stop(),this.hasNode()&&(this.animate?(this.startTransition(!0),this.$.animator.play({startValue:this.fraction})):this.refresh()))},step:function(t){return this.fraction=t.value,this.stepTransition(),!0},completed:function(){return this.$.animator.isAnimating()&&this.$.animator.stop(),this.fraction=1,this.stepTransition(),this.finishTransition(!0),!0},dragstart:function(t,n){return this.draggable&&this.layout&&this.layout.canDragEvent(n)?(n.preventDefault(),this.dragstartTransition(n),this.dragging=!0,this.$.animator.stop(),!0):void 0},drag:function(t,n){this.dragging&&(n.preventDefault(),this.dragTransition(n))},dragfinish:function(t,n){this.dragging&&(this.dragging=!1,n.preventTap(),this.dragfinishTransition(n))},dragstartTransition:function(t){if(this.$.animator.isAnimating())this.verifyDragTransition(t);else{var n=this.fromIndex=this.index;this.toIndex=n-(this.layout?this.layout.calcDragDirection(t):0)}this.fromIndex=this.clamp(this.fromIndex),this.toIndex=this.clamp(this.toIndex),this.fireTransitionStart(),this.layout&&this.layout.start()},dragTransition:function(t){var n=this.layout?this.layout.calcDrag(t):0,e=this.transitionPoints,i=e[0],r=e[e.length-1],o=this.fetchArrangement(i),s=this.fetchArrangement(r),a=this.layout?this.layout.drag(n,i,o,r,s):0,l=n&&!a;this.fraction+=a;var u=this.fraction;(u>1||0>u||l)&&((u>0||l)&&this.dragfinishTransition(t),this.dragstartTransition(t),this.fraction=0),this.stepTransition()},dragfinishTransition:function(t){this.verifyDragTransition(t),this.setIndex(this.toIndex),this.dragging&&this.fireTransitionFinish()},verifyDragTransition:function(t){var n=this.layout?this.layout.calcDragDirection(t):0,e=Math.min(this.fromIndex,this.toIndex),i=Math.max(this.fromIndex,this.toIndex);if(n>0){var r=e;e=i,i=r}e!=this.fromIndex&&(this.fraction=1-this.fraction),this.fromIndex=e,this.toIndex=i},refresh:function(){this.$.animator&&this.$.animator.isAnimating()&&this.$.animator.stop(),this.startTransition(!1),this.fraction=1,this.stepTransition(),this.finishTransition(!1)},startTransition:function(t){this.fromIndex=null!=this.fromIndex?this.fromIndex:this.lastIndex||0,this.toIndex=null!=this.toIndex?this.toIndex:this.index,this.layout&&this.layout.start(),t&&this.fireTransitionStart()},finishTransition:function(t){this.layout&&this.layout.finish(),this.transitionPoints=[],this.fraction=0,this.fromIndex=this.toIndex=null,t&&this.fireTransitionFinish()},fireTransitionStart:function(){var t=this.startTransitionInfo;!this.hasNode()||t&&t.fromIndex==this.fromIndex&&t.toIndex==this.toIndex||(this.startTransitionInfo={fromIndex:this.fromIndex,toIndex:this.toIndex},this.doTransitionStart(enyo.clone(this.startTransitionInfo)))},fireTransitionFinish:function(){var t=this.finishTransitionInfo;!this.hasNode()||t&&t.fromIndex==this.lastIndex&&t.toIndex==this.index||(this.finishTransitionInfo=t&&t.animating?{fromIndex:t.toIndex,toIndex:this.lastIndex}:{fromIndex:this.lastIndex,toIndex:this.index},this.doTransitionFinish(enyo.clone(this.finishTransitionInfo)))},stepTransition:function(){if(this.hasNode()){var t=this.transitionPoints,n=(this.fraction||0)*(t.length-1),e=Math.floor(n);n-=e;var i=t[e],r=t[e+1],o=this.fetchArrangement(i),s=this.fetchArrangement(r);this.arrangement=o&&s?enyo.Panels.lerp(o,s,n):o||s,this.arrangement&&this.layout&&this.layout.flowArrangement()}},fetchArrangement:function(t){return null!=t&&!this.arrangements[t]&&this.layout&&(this.layout._arrange(t),this.arrangements[t]=this.readArrangement(this.getPanels())),this.arrangements[t]},readArrangement:function(t){for(var n,e=[],i=0,r=t;n=r[i];i++)e.push(enyo.clone(n._arranger));return e},statics:{isScreenNarrow:function(){return 800>=enyo.dom.getWindowWidth()},lerp:function(t,n,e){for(var i,r=[],o=0,s=enyo.keys(t);i=s[o];o++)r.push(this.lerpObject(t[i],n[i],e));return r},lerpObject:function(t,n,e){var i,r,o=enyo.clone(t);if(n)for(var s in t)i=t[s],r=n[s],i!=r&&(o[s]=i-(i-r)*e);return o}}});

// lib/layout/tree/source/Node.js
enyo.kind({name:"enyo.Node",published:{expandable:!1,expanded:!1,icon:"",onlyIconExpands:!1,selected:!1},style:"padding: 0 0 0 16px;",content:"Node",defaultKind:"Node",classes:"enyo-node",components:[{name:"icon",kind:"Image",showing:!1},{kind:"Control",name:"caption",Xtag:"span",style:"display: inline-block; padding: 4px;",allowHtml:!0},{kind:"Control",name:"extra",tag:"span",allowHtml:!0}],childClient:[{kind:"Control",name:"box",classes:"enyo-node-box",Xstyle:"border: 1px solid orange;",components:[{kind:"Control",name:"client",classes:"enyo-node-client",Xstyle:"border: 1px solid lightblue;"}]}],handlers:{ondblclick:"dblclick"},events:{onNodeTap:"nodeTap",onNodeDblClick:"nodeDblClick",onExpand:"nodeExpand",onDestroyed:"nodeDestroyed"},create:enyo.inherit(function(t){return function(){t.apply(this,arguments),this.selectedChanged(),this.iconChanged()}}),destroy:enyo.inherit(function(t){return function(){this.doDestroyed(),t.apply(this,arguments)}}),initComponents:enyo.inherit(function(t){return function(){this.expandable&&(this.kindComponents=this.kindComponents.concat(this.childClient)),t.apply(this,arguments)}}),contentChanged:function(){this.$.caption.setContent(this.content)},iconChanged:function(){this.$.icon.setSrc(this.icon),this.$.icon.setShowing(Boolean(this.icon))},selectedChanged:function(){this.addRemoveClass("enyo-selected",this.selected)},rendered:enyo.inherit(function(t){return function(){t.apply(this,arguments),this.expandable&&!this.expanded&&this.quickCollapse()}}),addNodes:function(t){this.destroyClientControls();for(var n,e=0;n=t[e];e++)this.createComponent(n);this.$.client.render()},addTextNodes:function(t){this.destroyClientControls();for(var n,e=0;n=t[e];e++)this.createComponent({content:n});this.$.client.render()},tap:function(t,n){return this.onlyIconExpands?n.target==this.$.icon.hasNode()?this.toggleExpanded():this.doNodeTap():(this.toggleExpanded(),this.doNodeTap()),!0},dblclick:function(){return this.doNodeDblClick(),!0},toggleExpanded:function(){this.setExpanded(!this.expanded)},quickCollapse:function(){this.removeClass("enyo-animate"),this.$.box.applyStyle("height","0");var t=this.$.client.getBounds().height;this.$.client.setBounds({top:-t})},_expand:function(){this.addClass("enyo-animate");var t=this.$.client.getBounds().height;this.$.box.setBounds({height:t}),this.$.client.setBounds({top:0}),setTimeout(this.bindSafely(function(){this.expanded&&(this.removeClass("enyo-animate"),this.$.box.applyStyle("height","auto"))}),225)},_collapse:function(){this.removeClass("enyo-animate");var t=this.$.client.getBounds().height;this.$.box.setBounds({height:t}),setTimeout(this.bindSafely(function(){this.addClass("enyo-animate"),this.$.box.applyStyle("height","0"),this.$.client.setBounds({top:-t})}),25)},expandedChanged:function(){if(this.expandable){var t={expanded:this.expanded};this.doExpand(t),t.wait||this.effectExpanded()}else this.expanded=!1},effectExpanded:function(){this.$.client&&(this.expanded?this._expand():this._collapse())}});

// lib/layout/imageview/source/PanZoomView.js
enyo.kind({name:"enyo.PanZoomView",kind:enyo.Scroller,touchOverscroll:!1,thumb:!1,animate:!0,verticalDragPropagation:!0,horizontalDragPropagation:!0,published:{scale:"auto",disableZoom:!1},events:{onZoom:""},touch:!0,preventDragPropagation:!1,handlers:{ondragstart:"dragPropagation",onSetDimensions:"setDimensions"},components:[{name:"animator",kind:"Animator",onStep:"zoomAnimationStep",onEnd:"zoomAnimationEnd"},{name:"viewport",style:"overflow:hidden;min-height:100%;min-width:100%;",classes:"enyo-fit",ongesturechange:"gestureTransform",ongestureend:"saveState",ontap:"singleTap",ondblclick:"doubleClick",onmousewheel:"mousewheel",components:[{name:"content"}]}],create:enyo.inherit(function(t){return function(){this.scaleKeyword=this.scale;var n=this.components;this.components=[],t.apply(this,arguments),this.$.content.applyStyle("width",this.contentWidth+"px"),this.$.content.applyStyle("height",this.contentHeight+"px"),this.unscaledComponents&&this.createComponents(this.unscaledComponents),this.controlParentName="content",this.discoverControlParent(),this.createComponents(n),this.canTransform=enyo.dom.canTransform(),this.canTransform||this.$.content.applyStyle("position","relative"),this.canAccelerate=enyo.dom.canAccelerate(),this.getStrategy().setDragDuringGesture(!1)}}),rendered:enyo.inherit(function(t){return function(){t.apply(this,arguments),this.getOriginalScale()}}),dragPropagation:function(t,n){var e=this.getStrategy().getScrollBounds(),i=0===e.top&&n.dy>0||e.top>=e.maxTop-2&&0>n.dy,r=0===e.left&&n.dx>0||e.left>=e.maxLeft-2&&0>n.dx;return!(i&&this.verticalDragPropagation||r&&this.horizontalDragPropagation)},mousewheel:function(t,n){n.pageX|=n.clientX+n.target.scrollLeft,n.pageY|=n.clientY+n.target.scrollTop;var e=(this.maxScale-this.minScale)/10,i=this.scale;return n.wheelDelta>0||0>n.detail?this.scale=this.limitScale(this.scale+e):(0>n.wheelDelta||n.detail>0)&&(this.scale=this.limitScale(this.scale-e)),this.eventPt=this.calcEventLocation(n),this.transform(this.scale),i!=this.scale&&this.doZoom({scale:this.scale}),this.ratioX=this.ratioY=null,n.preventDefault(),!0},resizeHandler:enyo.inherit(function(t){return function(){t.apply(this,arguments),this.scaleChanged()}}),setDimensions:function(t,n){return this.$.content.applyStyle("width",n.width+"px"),this.$.content.applyStyle("height",n.height+"px"),this.originalWidth=n.width,this.originalHeight=n.height,this.scale=this.scaleKeyword,this.scaleChanged(),!0},getOriginalScale:function(){this.$.content.hasNode()&&(this.originalWidth=this.$.content.node.clientWidth,this.originalHeight=this.$.content.node.clientHeight,this.scale=this.scaleKeyword,this.scaleChanged())},scaleChanged:function(){var t=this.hasNode();if(t){this.containerWidth=t.clientWidth,this.containerHeight=t.clientHeight;var n=this.containerWidth/this.originalWidth,e=this.containerHeight/this.originalHeight;this.minScale=Math.min(n,e),this.maxScale=1>3*this.minScale?1:3*this.minScale,"auto"==this.scale?this.scale=this.minScale:"width"==this.scale?this.scale=n:"height"==this.scale?this.scale=e:"fit"==this.scale?(this.fitAlignment="center",this.scale=Math.max(n,e)):(this.maxScale=Math.max(this.maxScale,this.scale),this.scale=this.limitScale(this.scale))}this.eventPt=this.calcEventLocation(),this.transform(this.scale),this.getStrategy().$.scrollMath&&this.getStrategy().$.scrollMath.start(),this.align()},align:function(){if(this.fitAlignment&&"center"===this.fitAlignment){var t=this.getScrollBounds();this.setScrollLeft(t.maxLeft/2),this.setScrollTop(t.maxTop/2)}},gestureTransform:function(t,n){this.eventPt=this.calcEventLocation(n),this.transform(this.limitScale(this.scale*n.scale))},calcEventLocation:function(t){var n={x:0,y:0};if(t&&this.hasNode()){var e=this.node.getBoundingClientRect();n.x=Math.round(t.pageX-e.left-this.bounds.x),n.x=Math.max(0,Math.min(this.bounds.width,n.x)),n.y=Math.round(t.pageY-e.top-this.bounds.y),n.y=Math.max(0,Math.min(this.bounds.height,n.y))}return n},transform:function(t){this.tapped=!1;var n=this.bounds||this.innerBounds(t);this.bounds=this.innerBounds(t),this.scale>this.minScale?this.$.viewport.applyStyle("cursor","move"):this.$.viewport.applyStyle("cursor",null),this.$.viewport.setBounds({width:this.bounds.width+"px",height:this.bounds.height+"px"}),this.ratioX=this.ratioX||(this.eventPt.x+this.getScrollLeft())/n.width,this.ratioY=this.ratioY||(this.eventPt.y+this.getScrollTop())/n.height;var e,i;if(this.$.animator.ratioLock?(e=this.$.animator.ratioLock.x*this.bounds.width-this.containerWidth/2,i=this.$.animator.ratioLock.y*this.bounds.height-this.containerHeight/2):(e=this.ratioX*this.bounds.width-this.eventPt.x,i=this.ratioY*this.bounds.height-this.eventPt.y),e=Math.max(0,Math.min(this.bounds.width-this.containerWidth,e)),i=Math.max(0,Math.min(this.bounds.height-this.containerHeight,i)),this.canTransform){var r={scale:t};r=this.canAccelerate?enyo.mixin({translate3d:Math.round(this.bounds.left)+"px, "+Math.round(this.bounds.top)+"px, 0px"},r):enyo.mixin({translate:this.bounds.left+"px, "+this.bounds.top+"px"},r),enyo.dom.transform(this.$.content,r)}else if(enyo.platform.ie){var o='"progid:DXImageTransform.Microsoft.Matrix(M11='+t+", M12=0, M21=0, M22="+t+", SizingMethod='auto expand')\"";this.$.content.applyStyle("-ms-filter",o),this.$.content.setBounds({width:this.bounds.width*t+"px",height:this.bounds.height*t+"px",left:this.bounds.left+"px",top:this.bounds.top+"px"}),this.$.content.applyStyle("width",t*this.bounds.width),this.$.content.applyStyle("height",t*this.bounds.height)}this.setScrollLeft(e),this.setScrollTop(i),this.positionClientControls(t)},limitScale:function(t){return this.disableZoom?t=this.scale:t>this.maxScale?t=this.maxScale:this.minScale>t&&(t=this.minScale),t},innerBounds:function(t){var n=this.originalWidth*t,e=this.originalHeight*t,i={x:0,y:0,transX:0,transY:0};return this.containerWidth>n&&(i.x+=(this.containerWidth-n)/2),this.containerHeight>e&&(i.y+=(this.containerHeight-e)/2),this.canTransform&&(i.transX-=(this.originalWidth-n)/2,i.transY-=(this.originalHeight-e)/2),{left:i.x+i.transX,top:i.y+i.transY,width:n,height:e,x:i.x,y:i.y}},saveState:function(t,n){var e=this.scale;this.scale*=n.scale,this.scale=this.limitScale(this.scale),e!=this.scale&&this.doZoom({scale:this.scale}),this.ratioX=this.ratioY=null},doubleClick:function(t,n){8==enyo.platform.ie&&(this.tapped=!0,n.pageX=n.clientX+n.target.scrollLeft,n.pageY=n.clientY+n.target.scrollTop,this.singleTap(t,n),n.preventDefault())},singleTap:function(t,n){setTimeout(this.bindSafely(function(){this.tapped=!1}),300),this.tapped?(this.tapped=!1,this.smartZoom(t,n)):this.tapped=!0},smartZoom:function(t,n){var e=this.hasNode(),i=this.$.content.hasNode();if(e&&i&&this.hasNode()&&!this.disableZoom){var r=this.scale;if(this.scale=this.scale!=this.minScale?this.minScale:this.maxScale,this.eventPt=this.calcEventLocation(n),this.animate){var o={x:(this.eventPt.x+this.getScrollLeft())/this.bounds.width,y:(this.eventPt.y+this.getScrollTop())/this.bounds.height};this.$.animator.play({duration:350,ratioLock:o,baseScale:r,deltaScale:this.scale-r})}else this.transform(this.scale),this.doZoom({scale:this.scale})}},zoomAnimationStep:function(){var t=this.$.animator.baseScale+this.$.animator.deltaScale*this.$.animator.value;return this.transform(t),!0},zoomAnimationEnd:function(){return this.stabilize(),this.doZoom({scale:this.scale}),this.$.animator.ratioLock=void 0,!0},positionClientControls:function(t){this.waterfallDown("onPositionPin",{scale:t,bounds:this.bounds})}});

// lib/layout/imageview/source/ImageViewPin.js
enyo.kind({name:"enyo.ImageViewPin",kind:"enyo.Control",published:{highlightAnchorPoint:!1,anchor:{top:0,left:0},position:{top:0,left:0}},style:"position:absolute;z-index:1000;width:0px;height:0px;",handlers:{onPositionPin:"reAnchor"},create:enyo.inherit(function(t){return function(){t.apply(this,arguments),this.styleClientControls(),this.positionClientControls(),this.highlightAnchorPointChanged(),this.anchorChanged()}}),styleClientControls:function(){for(var t=this.getClientControls(),n=0;t.length>n;n++)t[n].applyStyle("position","absolute")},positionClientControls:function(){for(var t=this.getClientControls(),n=0;t.length>n;n++)for(var e in this.position)t[n].applyStyle(e,this.position[e]+"px")},highlightAnchorPointChanged:function(){this.addRemoveClass("pinDebug",this.highlightAnchorPoint)},anchorChanged:function(){var t=null,n=null;for(n in this.anchor)t=(""+this.anchor[n]).match(/^(\d+(?:\.\d+)?)(.*)$/),t&&(this.anchor[n+"Coords"]={value:t[1],units:t[2]||"px"})},reAnchor:function(t,n){var e=n.scale,i=n.bounds,r=this.anchor.right?"px"==this.anchor.rightCoords.units?i.width+i.x-this.anchor.rightCoords.value*e:i.width*(100-this.anchor.rightCoords.value)/100+i.x:"px"==this.anchor.leftCoords.units?this.anchor.leftCoords.value*e+i.x:i.width*this.anchor.leftCoords.value/100+i.x,o=this.anchor.bottom?"px"==this.anchor.bottomCoords.units?i.height+i.y-this.anchor.bottomCoords.value*e:i.height*(100-this.anchor.bottomCoords.value)/100+i.y:"px"==this.anchor.topCoords.units?this.anchor.topCoords.value*e+i.y:i.height*this.anchor.topCoords.value/100+i.y;this.applyStyle("left",r+"px"),this.applyStyle("top",o+"px")}});

// lib/layout/imageview/source/ImageView.js
enyo.kind({name:"enyo.ImageView",kind:"enyo.PanZoomView",subKindComponents:[{kind:"Image",ondown:"down",style:"vertical-align: text-top;"}],create:enyo.inherit(function(t){return function(){this.unscaledComponents=this.components,this.components=[],this.kindComponents[1].components[0].components=this.subKindComponents,t.apply(this,arguments),this.$.content.applyStyle("display","inline-block"),this.bufferImage=new Image,this.bufferImage.onload=enyo.bind(this,"imageLoaded"),this.bufferImage.onerror=enyo.bind(this,"imageError"),this.srcChanged(),this.getStrategy().$.scrollMath&&this.getStrategy().$.scrollMath.start()}}),destroy:enyo.inherit(function(t){return function(){this.bufferImage&&(this.bufferImage.onerror=void 0,this.bufferImage.onerror=void 0,delete this.bufferImage),t.apply(this,arguments)}}),down:function(t,n){n.preventDefault()},srcChanged:function(){this.src&&this.src.length>0&&this.bufferImage&&this.src!=this.bufferImage.src&&(this.bufferImage.src=this.src)},imageLoaded:function(){this.scale=this.scaleKeyword,this.originalWidth=this.contentWidth=this.bufferImage.width,this.originalHeight=this.contentHeight=this.bufferImage.height,this.scaleChanged(),this.$.image.setSrc(this.bufferImage.src),enyo.dom.transformValue(this.getStrategy().$.client,"translate3d","0px, 0px, 0"),this.positionClientControls(this.scale),this.align()},imageError:function(t){enyo.error("Error loading image: "+this.src),this.bubble("onerror",t)}});

// lib/layout/imageview/source/ImageCarousel.js
enyo.kind({name:"enyo.ImageCarousel",kind:enyo.Panels,arrangerKind:"enyo.CarouselArranger",defaultScale:"auto",disableZoom:!1,lowMemory:!1,published:{images:[]},handlers:{onTransitionStart:"transitionStart",onTransitionFinish:"transitionFinish"},create:enyo.inherit(function(t){return function(){t.apply(this,arguments),this.imageCount=this.images.length,this.images.length>0&&(this.initContainers(),this.loadNearby())}}),initContainers:function(){for(var t=0;this.images.length>t;t++)this.$["container"+t]||(this.createComponent({name:"container"+t,style:"height:100%; width:100%;"}),this.$["container"+t].render());for(t=this.images.length;this.imageCount>t;t++)this.$["image"+t]&&this.$["image"+t].destroy(),this.$["container"+t].destroy();this.imageCount=this.images.length},loadNearby:function(){var t=this.getBufferRange();for(var n in t)this.loadImageView(t[n])},getBufferRange:function(){var t=[];if(this.layout.containerBounds){var n,e,i,r,o=1,s=this.layout.containerBounds;for(e=this.index-1,i=0,r=s.width*o;e>=0&&r>=i;)n=this.$["container"+e],i+=n.width+n.marginWidth,t.unshift(e),e--;for(e=this.index,i=0,r=s.width*(o+1);this.images.length>e&&r>=i;)n=this.$["container"+e],i+=n.width+n.marginWidth,t.push(e),e++}return t},reflow:enyo.inherit(function(t){return function(){t.apply(this,arguments),this.loadNearby()}}),loadImageView:function(t){return this.wrap&&(t=(t%this.images.length+this.images.length)%this.images.length),t>=0&&this.images.length-1>=t&&(this.$["image"+t]?this.$["image"+t].src!=this.images[t]&&(this.$["image"+t].setSrc(this.images[t]),this.$["image"+t].setScale(this.defaultScale),this.$["image"+t].setDisableZoom(this.disableZoom)):(this.$["container"+t].createComponent({name:"image"+t,kind:"ImageView",scale:this.defaultScale,disableZoom:this.disableZoom,src:this.images[t],verticalDragPropagation:!1,style:"height:100%; width:100%;"},{owner:this}),this.$["image"+t].render())),this.$["image"+t]},setImages:function(t){this.set("images",t)},imagesChanged:function(){this.initContainers(),this.loadNearby()},indexChanged:enyo.inherit(function(t){return function(){this.loadNearby(),this.lowMemory&&this.cleanupMemory(),t.apply(this,arguments)}}),transitionStart:function(t,n){return n.fromIndex==n.toIndex?!0:void 0},transitionFinish:function(){this.loadNearby(),this.lowMemory&&this.cleanupMemory()},getActiveImage:function(){return this.getImageByIndex(this.index)},getImageByIndex:function(t){return this.$["image"+t]||this.loadImageView(t)},cleanupMemory:function(){for(var t=this.getBufferRange(),n=0;this.images.length>n;n++)-1===enyo.indexOf(n,t)&&this.$["image"+n]&&this.$["image"+n].destroy()}});

// lib/onyx/version.js
enyo&&enyo.version&&(enyo.version.onyx="2.3.0-rc.2");

// lib/onyx/source/Icon.js
enyo.kind({name:"onyx.Icon",published:{src:"",disabled:!1},classes:"onyx-icon",create:function(){this.inherited(arguments),this.src&&this.srcChanged(),this.disabledChanged()},disabledChanged:function(){this.addRemoveClass("disabled",this.disabled)},srcChanged:function(){this.applyStyle("background-image","url("+enyo.path.rewrite(this.src)+")")}});

// lib/onyx/source/Button.js
enyo.kind({name:"onyx.Button",kind:"enyo.Button",classes:"onyx-button enyo-unselectable",create:function(){enyo.platform.firefoxOS&&(this.handlers.ondown="fxosDown",this.handlers.onenter="fxosEnter",this.handlers.ondrag="fxosDrag",this.handlers.onleave="fxosLeave",this.handlers.onup="fxosUp"),this.inherited(arguments)},fxosDown:function(){this.addClass("pressed"),this._isInControl=!0},fxosEnter:function(){this._isInControl=!0},fxosDrag:function(){this.addRemoveClass("pressed",this._isInControl)},fxosLeave:function(){this.removeClass("pressed"),this._isInControl=!1},fxosUp:function(){this.removeClass("pressed"),this._isInControl=!1}});

// lib/onyx/source/IconButton.js
enyo.kind({name:"onyx.IconButton",kind:"onyx.Icon",published:{active:!1},classes:"onyx-icon-button",create:function(){enyo.platform.firefoxOS&&(this.handlers.ondown="fxosDown",this.handlers.onenter="fxosEnter",this.handlers.ondrag="fxosDrag",this.handlers.onleave="fxosLeave",this.handlers.onup="fxosUp"),this.inherited(arguments)},fxosDown:function(){this.addClass("pressed"),this._isInControl=!0},fxosEnter:function(){this._isInControl=!0},fxosDrag:function(){this.addRemoveClass("pressed",this._isInControl)},fxosLeave:function(){this.removeClass("pressed"),this._isInControl=!1},fxosUp:function(){this.removeClass("pressed"),this._isInControl=!1},rendered:function(){this.inherited(arguments),this.activeChanged()},tap:function(){return this.disabled?!0:(this.setActive(!0),void 0)},activeChanged:function(){this.bubble("onActivate")}});

// lib/onyx/source/Checkbox.js
enyo.kind({name:"onyx.Checkbox",classes:"onyx-checkbox",kind:enyo.Checkbox,tag:"div",handlers:{onclick:""},tap:function(){return this.disabled||(this.setChecked(!this.getChecked()),this.bubble("onchange")),!this.disabled},dragstart:function(){}});

// lib/onyx/source/Drawer.js
enyo.kind({name:"onyx.Drawer",kind:"enyo.Drawer"});

// lib/onyx/source/Grabber.js
enyo.kind({name:"onyx.Grabber",classes:"onyx-grabber"});

// lib/onyx/source/Groupbox.js
enyo.kind({name:"onyx.Groupbox",classes:"onyx-groupbox"}),enyo.kind({name:"onyx.GroupboxHeader",classes:"onyx-groupbox-header"});

// lib/onyx/source/Input.js
enyo.kind({name:"onyx.Input",kind:"enyo.Input",classes:"onyx-input"});

// lib/onyx/source/Popup.js
enyo.kind({name:"onyx.Popup",kind:"enyo.Popup",classes:"onyx-popup",published:{scrimWhenModal:!0,scrim:!1,scrimClassName:""},protectedStatics:{count:0,highestZ:120},defaultZ:120,showingChanged:function(){this.showing?(onyx.Popup.count++,this.applyZIndex()):onyx.Popup.count>0&&onyx.Popup.count--,this.showHideScrim(this.showing),this.inherited(arguments)},showHideScrim:function(t){if(this.floating&&(this.scrim||this.modal&&this.scrimWhenModal)){var n=this.getScrim();if(t){var e=this.getScrimZIndex();this._scrimZ=e,n.showAtZIndex(e)}else n.hideAtZIndex(this._scrimZ);enyo.call(n,"addRemoveClass",[this.scrimClassName,n.showing])}},getScrimZIndex:function(){return onyx.Popup.highestZ>=this._zIndex?this._zIndex-1:onyx.Popup.highestZ},getScrim:function(){return this.modal&&this.scrimWhenModal&&!this.scrim?onyx.scrimTransparent.make():onyx.scrim.make()},applyZIndex:function(){this._zIndex=2*onyx.Popup.count+this.findZIndex()+1,this._zIndex<=onyx.Popup.highestZ&&(this._zIndex=onyx.Popup.highestZ+1),this._zIndex>onyx.Popup.highestZ&&(onyx.Popup.highestZ=this._zIndex),this.applyStyle("z-index",this._zIndex)},findZIndex:function(){var t=this.defaultZ;return this._zIndex?t=this._zIndex:this.hasNode()&&(t=Number(enyo.dom.getComputedStyleValue(this.node,"z-index"))||t),this.defaultZ>t&&(t=this.defaultZ),this._zIndex=t,this._zIndex}});

// lib/onyx/source/TextArea.js
enyo.kind({name:"onyx.TextArea",kind:"enyo.TextArea",classes:"onyx-textarea"});

// lib/onyx/source/RichText.js
enyo.kind({name:"onyx.RichText",kind:"enyo.RichText",classes:"onyx-richtext"});

// lib/onyx/source/InputDecorator.js
enyo.kind({name:"onyx.InputDecorator",kind:"enyo.ToolDecorator",tag:"label",classes:"onyx-input-decorator",published:{alwaysLooksFocused:!1},handlers:{onDisabledChange:"disabledChange",onfocus:"receiveFocus",onblur:"receiveBlur"},create:function(){this.inherited(arguments),this.updateFocus(!1)},alwaysLooksFocusedChanged:function(){this.updateFocus(this.focus)},updateFocus:function(t){this.focused=t,this.addRemoveClass("onyx-focused",this.alwaysLooksFocused||this.focused)},receiveFocus:function(){this.updateFocus(!0)},receiveBlur:function(){this.updateFocus(!1)},disabledChange:function(t,n){this.addRemoveClass("onyx-disabled",n.originator.disabled)}});

// lib/onyx/source/Tooltip.js
enyo.kind({name:"onyx.Tooltip",kind:"onyx.Popup",classes:"onyx-tooltip below left-arrow",autoDismiss:!1,showDelay:500,defaultLeft:-6,handlers:{onRequestShowTooltip:"requestShow",onRequestHideTooltip:"requestHide"},requestShow:function(){return this.showJob=setTimeout(this.bindSafely("show"),this.showDelay),!0},cancelShow:function(){clearTimeout(this.showJob)},requestHide:function(){return this.cancelShow(),this.inherited(arguments)},showingChanged:function(){this.cancelShow(),this.adjustPosition(!0),this.inherited(arguments)},applyPosition:function(t){var n="";for(var e in t)n+=e+":"+t[e]+(isNaN(t[e])?"; ":"px; ");this.addStyles(n)},adjustPosition:function(){if(this.showing&&this.hasNode()){var t=this.node.getBoundingClientRect();t.top+t.height>window.innerHeight?(this.addRemoveClass("below",!1),this.addRemoveClass("above",!0)):(this.addRemoveClass("above",!1),this.addRemoveClass("below",!0)),t.left+t.width>window.innerWidth&&(this.applyPosition({"margin-left":-t.width,bottom:"auto"}),this.addRemoveClass("left-arrow",!1),this.addRemoveClass("right-arrow",!0))}},resizeHandler:function(){this.applyPosition({"margin-left":this.defaultLeft,bottom:"auto"}),this.addRemoveClass("left-arrow",!0),this.addRemoveClass("right-arrow",!1),this.adjustPosition(!0),this.inherited(arguments)}});

// lib/onyx/source/TooltipDecorator.js
enyo.kind({name:"onyx.TooltipDecorator",defaultKind:"onyx.Button",classes:"onyx-popup-decorator",handlers:{onenter:"enter",onleave:"leave"},enter:function(){this.requestShowTooltip()},leave:function(){this.requestHideTooltip()},tap:function(){this.requestHideTooltip()},requestShowTooltip:function(){this.waterfallDown("onRequestShowTooltip")},requestHideTooltip:function(){this.waterfallDown("onRequestHideTooltip")}});

// lib/onyx/source/MenuDecorator.js
enyo.kind({name:"onyx.MenuDecorator",kind:"onyx.TooltipDecorator",defaultKind:"onyx.Button",classes:"onyx-popup-decorator enyo-unselectable",handlers:{onActivate:"activated",onHide:"menuHidden"},activated:function(t,n){this.requestHideTooltip(),n.originator.active&&(this.menuActive=!0,this.activator=n.originator,this.activator.addClass("active"),this.requestShowMenu())},requestShowMenu:function(){this.waterfallDown("onRequestShowMenu",{activator:this.activator})},requestHideMenu:function(){this.waterfallDown("onRequestHideMenu")},menuHidden:function(){this.menuActive=!1,this.activator&&(this.activator.setActive(!1),this.activator.removeClass("active"))},enter:function(){this.menuActive||this.inherited(arguments)},leave:function(){this.menuActive||this.inherited(arguments)}});

// lib/onyx/source/Menu.js
enyo.kind({name:"onyx.Menu",kind:"onyx.Popup",modal:!0,defaultKind:"onyx.MenuItem",classes:"onyx-menu",published:{maxHeight:200,scrolling:!0,scrollStrategyKind:"TouchScrollStrategy"},handlers:{onActivate:"itemActivated",onRequestShowMenu:"requestMenuShow",onRequestHideMenu:"requestHide"},childComponents:[{name:"client",kind:"enyo.Scroller"}],showOnTop:!1,scrollerName:"client",create:function(){this.inherited(arguments),this.maxHeightChanged()},initComponents:function(){this.scrolling&&this.createComponents(this.childComponents,{isChrome:!0,strategyKind:this.scrollStrategyKind}),this.inherited(arguments)},getScroller:function(){return this.$[this.scrollerName]},maxHeightChanged:function(){this.scrolling&&this.getScroller().setMaxHeight(this.maxHeight+"px")},itemActivated:function(t,n){return n.originator.setActive(!1),!0},showingChanged:function(){this.inherited(arguments),this.scrolling&&this.getScroller().setShowing(this.showing),this.adjustPosition(!0)},requestMenuShow:function(t,n){if(this.floating){var e=n.activator.hasNode();if(e){var i=this.activatorOffset=this.getPageOffset(e);this.applyPosition({top:i.top+(this.showOnTop?0:i.height),left:i.left,width:i.width})}}return this.show(),!0},applyPosition:function(t){var n="";for(var e in t)n+=e+":"+t[e]+(isNaN(t[e])?"; ":"px; ");this.addStyles(n)},getPageOffset:function(t){var n=t.getBoundingClientRect(),e=void 0===window.pageYOffset?document.documentElement.scrollTop:window.pageYOffset,i=void 0===window.pageXOffset?document.documentElement.scrollLeft:window.pageXOffset,r=void 0===n.height?n.bottom-n.top:n.height,o=void 0===n.width?n.right-n.left:n.width;return{top:n.top+e,left:n.left+i,height:r,width:o}},adjustPosition:function(){if(this.showing&&this.hasNode()){this.scrolling&&!this.showOnTop&&this.getScroller().setMaxHeight(this.maxHeight+"px"),this.removeClass("onyx-menu-up"),this.floating||this.applyPosition({left:"auto"});var t=this.node.getBoundingClientRect(),n=void 0===t.height?t.bottom-t.top:t.height,e=void 0===window.innerHeight?document.documentElement.clientHeight:window.innerHeight,i=void 0===window.innerWidth?document.documentElement.clientWidth:window.innerWidth;if(this.menuUp=t.top+n>e&&e-t.bottom<t.top-n,this.addRemoveClass("onyx-menu-up",this.menuUp),this.floating){var r=this.activatorOffset;this.menuUp?this.applyPosition({top:r.top-n+(this.showOnTop?r.height:0),bottom:"auto"}):t.top<r.top&&e>r.top+(this.showOnTop?0:r.height)+n&&this.applyPosition({top:r.top+(this.showOnTop?0:r.height),bottom:"auto"})}if(t.right>i&&(this.floating?this.applyPosition({left:i-t.width}):this.applyPosition({left:-(t.right-i)})),0>t.left&&(this.floating?this.applyPosition({left:0,right:"auto"}):"auto"==this.getComputedStyleValue("right")?this.applyPosition({left:-t.left}):this.applyPosition({right:t.left})),this.scrolling&&!this.showOnTop){t=this.node.getBoundingClientRect();var o;o=this.menuUp?this.maxHeight<t.bottom?this.maxHeight:t.bottom:e>t.top+this.maxHeight?this.maxHeight:e-t.top,this.getScroller().setMaxHeight(o+"px")}}},resizeHandler:function(){this.inherited(arguments),this.adjustPosition()},requestHide:function(){this.setShowing(!1)}});

// lib/onyx/source/MenuItem.js
enyo.kind({name:"onyx.MenuItem",kind:"enyo.Button",events:{onSelect:"",onItemContentChange:""},classes:"onyx-menu-item",tag:"div",create:function(){this.silence(),this.inherited(arguments),this.unsilence(),this.active&&this.bubble("onActivate")},tap:function(){this.inherited(arguments),this.bubble("onRequestHideMenu"),this.doSelect({selected:this,content:this.content})},contentChanged:function(){this.inherited(arguments),this.doItemContentChange({content:this.content})}});

// lib/onyx/source/Submenu.js
enyo.kind({name:"onyx.Submenu",defaultKind:"onyx.MenuItem",initComponents:function(){this.createChrome([{name:"label",kind:"enyo.Control",classes:"onyx-menu-item",content:this.content||this.name,isChrome:!0,ontap:"toggleOpen"},{kind:"onyx.Drawer",name:"client",classes:"client onyx-submenu",isChrome:!0,open:!1}]),this.inherited(arguments)},toggleOpen:function(){this.setOpen(!this.getOpen())},setOpen:function(t){this.$.client.setOpen(t)},getOpen:function(){return this.$.client.getOpen()}});

// lib/onyx/source/PickerDecorator.js
enyo.kind({name:"onyx.PickerDecorator",kind:"onyx.MenuDecorator",classes:"onyx-picker-decorator",defaultKind:"onyx.PickerButton",handlers:{onChange:"change"},change:function(t,n){this.waterfallDown("onChange",n)}});

// lib/onyx/source/PickerButton.js
enyo.kind({name:"onyx.PickerButton",kind:"onyx.Button",handlers:{onChange:"change"},change:function(t,n){void 0!==n.content&&this.setContent(n.content)}});

// lib/onyx/source/Picker.js
enyo.kind({name:"onyx.Picker",kind:"onyx.Menu",classes:"onyx-picker enyo-unselectable",published:{selected:null},events:{onChange:""},handlers:{onItemContentChange:"itemContentChange"},floating:!0,showOnTop:!0,initComponents:function(){this.setScrolling(!0),this.inherited(arguments)},showingChanged:function(){this.getScroller().setShowing(this.showing),this.inherited(arguments),this.showing&&this.selected&&this.scrollToSelected()},scrollToSelected:function(){this.getScroller().scrollToControl(this.selected,!this.menuUp)},itemActivated:function(t,n){return this.processActivatedItem(n.originator),this.inherited(arguments)},processActivatedItem:function(t){t.active&&this.setSelected(t)},selectedChanged:function(t){t&&t.removeClass("selected"),this.selected&&(this.selected.addClass("selected"),this.doChange({selected:this.selected,content:this.selected.content}))},itemContentChange:function(t,n){n.originator==this.selected&&this.doChange({selected:this.selected,content:this.selected.content})},resizeHandler:function(){this.inherited(arguments),this.adjustPosition()}});

// lib/onyx/source/FlyweightPicker.js
enyo.kind({name:"onyx.FlyweightPicker",kind:"onyx.Picker",classes:"onyx-flyweight-picker",published:{count:0},events:{onSetupItem:"",onSelect:""},handlers:{onSelect:"itemSelect"},components:[{name:"scroller",kind:"enyo.Scroller",strategyKind:"TouchScrollStrategy",components:[{name:"flyweight",kind:"FlyweightRepeater",noSelect:!0,ontap:"itemTap"}]}],scrollerName:"scroller",initComponents:function(){this.controlParentName="flyweight",this.inherited(arguments),this.$.flyweight.$.client.children[0].setActive(!0)},create:function(){this.inherited(arguments),this.countChanged()},rendered:function(){this.inherited(arguments),this.selectedChanged()},scrollToSelected:function(){var t=this.$.flyweight.fetchRowNode(this.selected);this.getScroller().scrollToNode(t,!this.menuUp)},countChanged:function(){this.$.flyweight.count=this.count},processActivatedItem:function(t){this.item=t},selectedChanged:function(t){if(this.item){null!=t&&(this.item.removeClass("selected"),this.$.flyweight.renderRow(t));var n;null!=this.selected&&(this.item.addClass("selected"),this.$.flyweight.renderRow(this.selected),this.item.removeClass("selected"),n=this.$.flyweight.fetchRowNode(this.selected)),this.doChange({selected:this.selected,content:n&&n.textContent||this.item.content})}},itemTap:function(t,n){this.setSelected(n.rowIndex),this.doSelect({selected:this.item,content:this.item.content})},itemSelect:function(t,n){return n.originator!=this?!0:void 0}});

// lib/onyx/source/DatePicker.js
enyo.kind({name:"onyx.DatePicker",classes:"onyx-toolbar-inline",published:{disabled:!1,locale:"en_us",dayHidden:!1,monthHidden:!1,yearHidden:!1,minYear:1900,maxYear:2099,value:null},events:{onSelect:""},create:function(){this.inherited(arguments),enyo.g11n&&(this.locale=enyo.g11n.currentLocale().getLocale()),this.initDefaults()},initDefaults:function(){var t=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"];enyo.g11n&&(this._tf=new enyo.g11n.Fmts({locale:this.locale}),t=this._tf.getMonthFields()),this.setupPickers(this._tf?this._tf.getDateFieldOrder():"mdy"),this.dayHiddenChanged(),this.monthHiddenChanged(),this.yearHiddenChanged();for(var n,e=this.value=this.value||new Date,i=0;n=t[i];i++)this.$.monthPicker.createComponent({content:n,value:i,active:i==e.getMonth()});var r=e.getFullYear();for(this.$.yearPicker.setSelected(r-this.minYear),i=1;this.monthLength(e.getYear(),e.getMonth())>=i;i++)this.$.dayPicker.createComponent({content:i,value:i,active:i==e.getDate()})},monthLength:function(t,n){return 32-new Date(t,n,32).getDate()},setupYear:function(t,n){return this.$.year.setContent(this.minYear+n.index),!0},setupPickers:function(t){var n,e,i,r=t.split("");for(e=0,i=r.length;i>e;e++)switch(n=r[e]){case"d":this.createDay();break;case"m":this.createMonth();break;case"y":this.createYear();break;default:}},createYear:function(){var t=this.maxYear-this.minYear;this.createComponent({kind:"onyx.PickerDecorator",onSelect:"updateYear",components:[{classes:"onyx-datepicker-year",name:"yearPickerButton",disabled:this.disabled},{name:"yearPicker",kind:"onyx.FlyweightPicker",count:++t,onSetupItem:"setupYear",components:[{name:"year"}]}]})},createMonth:function(){this.createComponent({kind:"onyx.PickerDecorator",onSelect:"updateMonth",components:[{classes:"onyx-datepicker-month",name:"monthPickerButton",disabled:this.disabled},{name:"monthPicker",kind:"onyx.Picker"}]})},createDay:function(){this.createComponent({kind:"onyx.PickerDecorator",onSelect:"updateDay",components:[{classes:"onyx-datepicker-day",name:"dayPickerButton",disabled:this.disabled},{name:"dayPicker",kind:"onyx.Picker"}]})},localeChanged:function(){this.refresh()},dayHiddenChanged:function(){this.$.dayPicker.getParent().setShowing(this.dayHidden?!1:!0)},monthHiddenChanged:function(){this.$.monthPicker.getParent().setShowing(this.monthHidden?!1:!0)},yearHiddenChanged:function(){this.$.yearPicker.getParent().setShowing(this.yearHidden?!1:!0)},minYearChanged:function(){this.refresh()},maxYearChanged:function(){this.refresh()},valueChanged:function(){this.refresh()},disabledChanged:function(){this.$.yearPickerButton.setDisabled(this.disabled),this.$.monthPickerButton.setDisabled(this.disabled),this.$.dayPickerButton.setDisabled(this.disabled)},updateDay:function(t,n){var e=this.calcDate(this.value.getFullYear(),this.value.getMonth(),n.selected.value);return this.doSelect({name:this.name,value:e}),this.setValue(e),!0},updateMonth:function(t,n){var e=this.calcDate(this.value.getFullYear(),n.selected.value,this.value.getDate());return this.doSelect({name:this.name,value:e}),this.setValue(e),!0},updateYear:function(t,n){if(-1!=n.originator.selected){var e=this.calcDate(this.minYear+n.originator.selected,this.value.getMonth(),this.value.getDate());this.doSelect({name:this.name,value:e}),this.setValue(e)}return!0},calcDate:function(t,n,e){return new Date(t,n,e,this.value.getHours(),this.value.getMinutes(),this.value.getSeconds(),this.value.getMilliseconds())},refresh:function(){this.destroyClientControls(),this.initDefaults(),this.render()}});

// lib/onyx/source/TimePicker.js
enyo.kind({name:"onyx.TimePicker",classes:"onyx-toolbar-inline",published:{disabled:!1,locale:"en_us",is24HrMode:null,value:null},events:{onSelect:""},create:function(){this.inherited(arguments),enyo.g11n&&(this.locale=enyo.g11n.currentLocale().getLocale()),this.initDefaults()},initDefaults:function(){var t="AM",e="PM";enyo.g11n?(this._tf=new enyo.g11n.Fmts({locale:this.locale}),t=this._tf.getAmCaption(),e=this._tf.getPmCaption(),null==this.is24HrMode&&(this.is24HrMode=!this._tf.isAmPm())):null==this.is24HrMode&&(this.is24HrMode=!1),this.setupPickers(this._tf?this._tf.getTimeFieldOrder():"hma");var n,i=this.value=this.value||new Date;if(this.is24HrMode)for(n=0;24>n;n++)this.$.hourPicker.createComponent({content:n,value:n,active:n==i.getHours()});else{var r=i.getHours();for(r=0===r?12:r,n=1;12>=n;n++)this.$.hourPicker.createComponent({content:n,value:n,active:n==(r>12?r%12:r)})}for(n=0;59>=n;n++)this.$.minutePicker.createComponent({content:10>n?"0"+n:n,value:n,active:n==i.getMinutes()});i.getHours()>=12?this.$.ampmPicker.createComponents([{content:t},{content:e,active:!0}]):this.$.ampmPicker.createComponents([{content:t,active:!0},{content:e}]),this.$.ampmPicker.getParent().setShowing(!this.is24HrMode)},setupPickers:function(t){var e,n,i,r=t.split("");for(n=0,i=r.length;i>n;n++)switch(e=r[n]){case"h":this.createHour();break;case"m":this.createMinute();break;case"a":this.createAmPm();break;default:}},createHour:function(){this.createComponent({kind:"onyx.PickerDecorator",onSelect:"updateHour",components:[{classes:"onyx-timepicker-hour",name:"hourPickerButton",disabled:this.disabled},{name:"hourPicker",kind:"onyx.Picker"}]})},createMinute:function(){this.createComponent({kind:"onyx.PickerDecorator",onSelect:"updateMinute",components:[{classes:"onyx-timepicker-minute",name:"minutePickerButton",disabled:this.disabled},{name:"minutePicker",kind:"onyx.Picker"}]})},createAmPm:function(){this.createComponent({kind:"onyx.PickerDecorator",onSelect:"updateAmPm",components:[{classes:"onyx-timepicker-ampm",name:"ampmPickerButton",disabled:this.disabled},{name:"ampmPicker",kind:"onyx.Picker"}]})},disabledChanged:function(){this.$.hourPickerButton.setDisabled(this.disabled),this.$.minutePickerButton.setDisabled(this.disabled),this.$.ampmPickerButton.setDisabled(this.disabled)},localeChanged:function(){this.is24HrMode=null,this.refresh()},is24HrModeChanged:function(){this.refresh()},valueChanged:function(){this.refresh()},updateHour:function(t,e){var n=e.selected.value;if(!this.is24HrMode){var i=this.$.ampmPicker.getParent().controlAtIndex(0).content;n=n+(12==n?-12:0)+(this.isAm(i)?0:12)}return this.setValue(this.calcTime(n,this.value.getMinutes())),this.doSelect({name:this.name,value:this.value}),!0},updateMinute:function(t,e){return this.setValue(this.calcTime(this.value.getHours(),e.selected.value)),this.doSelect({name:this.name,value:this.value}),!0},updateAmPm:function(t,e){var n=this.value.getHours();return this.is24HrMode||(n+=n>11?this.isAm(e.content)?-12:0:this.isAm(e.content)?0:12),this.setValue(this.calcTime(n,this.value.getMinutes())),this.doSelect({name:this.name,value:this.value}),!0},calcTime:function(t,e){return new Date(this.value.getFullYear(),this.value.getMonth(),this.value.getDate(),t,e,this.value.getSeconds(),this.value.getMilliseconds())},isAm:function(t){var e,n;try{e=this._tf.getAmCaption(),n=this._tf.getPmCaption()}catch(i){e="AM",n="PM"}return t==e?!0:!1},refresh:function(){this.destroyClientControls(),this.initDefaults(),this.render()}});

// lib/onyx/source/RadioButton.js
enyo.kind({name:"onyx.RadioButton",kind:"enyo.Button",classes:"onyx-radiobutton"});

// lib/onyx/source/RadioGroup.js
enyo.kind({name:"onyx.RadioGroup",kind:"enyo.Group",defaultKind:"onyx.RadioButton",highlander:!0});

// lib/onyx/source/ToggleButton.js
enyo.kind({name:"onyx.ToggleButton",classes:"onyx-toggle-button",published:{active:!1,value:!1,onContent:"On",offContent:"Off",disabled:!1},events:{onChange:""},handlers:{ondragstart:"dragstart",ondrag:"drag",ondragfinish:"dragfinish"},components:[{name:"contentOn",classes:"onyx-toggle-content on"},{name:"contentOff",classes:"onyx-toggle-content off"},{classes:"onyx-toggle-button-knob"}],create:function(){this.inherited(arguments),this.value=Boolean(this.value||this.active),this.onContentChanged(),this.offContentChanged(),this.disabledChanged()},rendered:function(){this.inherited(arguments),this.updateVisualState()},updateVisualState:function(){this.addRemoveClass("off",!this.value),this.$.contentOn.setShowing(this.value),this.$.contentOff.setShowing(!this.value),this.setActive(this.value)},valueChanged:function(){this.updateVisualState(),this.doChange({value:this.value})},activeChanged:function(){this.setValue(this.active),this.bubble("onActivate")},onContentChanged:function(){this.$.contentOn.setContent(this.onContent||""),this.$.contentOn.addRemoveClass("empty",!this.onContent)},offContentChanged:function(){this.$.contentOff.setContent(this.offContent||""),this.$.contentOff.addRemoveClass("empty",!this.onContent)},disabledChanged:function(){this.addRemoveClass("disabled",this.disabled)},updateValue:function(t){this.disabled||this.setValue(t)},tap:function(){this.updateValue(!this.value)},dragstart:function(t,e){return e.horizontal?(e.preventDefault(),this.dragging=!0,this.dragged=!1,!0):void 0},drag:function(t,e){if(this.dragging){var n=e.dx;return Math.abs(n)>10&&(this.updateValue(n>0),this.dragged=!0),!0}},dragfinish:function(t,e){this.dragging=!1,this.dragged&&e.preventTap()}});

// lib/onyx/source/ToggleIconButton.js
enyo.kind({name:"onyx.ToggleIconButton",kind:"onyx.Icon",published:{active:!1,value:!1},events:{onChange:""},classes:"onyx-icon-button onyx-icon-toggle",activeChanged:function(){this.addRemoveClass("active",this.value),this.bubble("onActivate")},updateValue:function(t){this.disabled||(this.setValue(t),this.doChange({value:this.value}))},tap:function(){this.updateValue(!this.value)},valueChanged:function(){this.setActive(this.value)},create:function(){this.inherited(arguments),this.value=Boolean(this.value||this.active)},rendered:function(){this.inherited(arguments),this.valueChanged(),this.removeClass("onyx-icon")}});

// lib/onyx/source/Toolbar.js
enyo.kind({name:"onyx.Toolbar",classes:"onyx onyx-toolbar onyx-toolbar-inline",create:function(){this.inherited(arguments),this.hasClass("onyx-menu-toolbar")&&enyo.platform.android>=4&&this.applyStyle("position","static")}});

// lib/onyx/source/ProgressBar.js
enyo.kind({name:"onyx.ProgressBar",classes:"onyx-progress-bar",published:{progress:0,min:0,max:100,barClasses:"",showStripes:!0,animateStripes:!0,increment:0},events:{onAnimateProgressFinish:""},components:[{name:"progressAnimator",kind:"enyo.Animator",onStep:"progressAnimatorStep",onEnd:"progressAnimatorComplete"},{name:"bar",classes:"onyx-progress-bar-bar"}],create:function(){this.inherited(arguments),this.progressChanged(),this.barClassesChanged(),this.showStripesChanged(),this.animateStripesChanged()},barClassesChanged:function(t){this.$.bar.removeClass(t),this.$.bar.addClass(this.barClasses)},showStripesChanged:function(){this.$.bar.addRemoveClass("striped",this.showStripes)},animateStripesChanged:function(){this.$.bar.addRemoveClass("animated",this.animateStripes)},progressChanged:function(){this.progress=this.clampValue(this.min,this.max,this.progress);var t=this.calcPercent(this.progress);this.updateBarPosition(t)},calcIncrement:function(t){return Math.round(t/this.increment)*this.increment},clampValue:function(t,e,n){return Math.max(t,Math.min(n,e))},calcRatio:function(t){return(t-this.min)/(this.max-this.min)},calcPercent:function(t){return 100*this.calcRatio(t)},updateBarPosition:function(t){this.$.bar.applyStyle("width",t+"%")},animateProgressTo:function(t){this.$.progressAnimator.play({startValue:this.progress,endValue:t,node:this.hasNode()})},progressAnimatorStep:function(t){return this.setProgress(t.value),!0},progressAnimatorComplete:function(t){return this.doAnimateProgressFinish(t),!0}});

// lib/onyx/source/ProgressButton.js
enyo.kind({name:"onyx.ProgressButton",kind:"onyx.ProgressBar",classes:"onyx-progress-button",events:{onCancel:""},components:[{name:"progressAnimator",kind:"enyo.Animator",onStep:"progressAnimatorStep",onEnd:"progressAnimatorComplete"},{name:"bar",classes:"onyx-progress-bar-bar onyx-progress-button-bar"},{name:"client",classes:"onyx-progress-button-client"},{kind:"onyx.Icon",src:"$lib/onyx/images/progress-button-cancel.png",classes:"onyx-progress-button-icon",ontap:"cancelTap"}],cancelTap:function(){this.doCancel()}});

// lib/onyx/source/Scrim.js
enyo.kind({name:"onyx.Scrim",showing:!1,classes:"onyx-scrim enyo-fit",floating:!1,create:function(){this.inherited(arguments),this.zStack=[],this.floating&&this.setParent(enyo.floatingLayer)},showingChanged:function(){this.floating&&this.showing&&!this.hasNode()&&this.render(),this.inherited(arguments)},addZIndex:function(t){0>enyo.indexOf(t,this.zStack)&&this.zStack.push(t)},removeZIndex:function(t){enyo.remove(t,this.zStack)},showAtZIndex:function(t){this.addZIndex(t),void 0!==t&&this.setZIndex(t),this.show()},hideAtZIndex:function(t){if(this.removeZIndex(t),this.zStack.length){var e=this.zStack[this.zStack.length-1];this.setZIndex(e)}else this.hide()},setZIndex:function(t){this.zIndex=t,this.applyStyle("z-index",t)},make:function(){return this}}),enyo.kind({name:"onyx.scrimSingleton",kind:null,constructor:function(t,e){this.instanceName=t,enyo.setPath(this.instanceName,this),this.props=e||{}},make:function(){var t=new onyx.Scrim(this.props);return enyo.setPath(this.instanceName,t),t},showAtZIndex:function(t){var e=this.make();e.showAtZIndex(t)},hideAtZIndex:enyo.nop,show:function(){var t=this.make();t.show()}}),new onyx.scrimSingleton("onyx.scrim",{floating:!0,classes:"onyx-scrim-translucent"}),new onyx.scrimSingleton("onyx.scrimTransparent",{floating:!0,classes:"onyx-scrim-transparent"});

// lib/onyx/source/Slider.js
enyo.kind({name:"onyx.Slider",kind:"onyx.ProgressBar",classes:"onyx-slider",published:{value:0,lockBar:!0,tappable:!0},events:{onChange:"",onChanging:"",onAnimateFinish:""},showStripes:!1,handlers:{ondragstart:"dragstart",ondrag:"drag",ondragfinish:"dragfinish"},moreComponents:[{kind:"Animator",onStep:"animatorStep",onEnd:"animatorComplete"},{classes:"onyx-slider-taparea"},{name:"knob",classes:"onyx-slider-knob"}],create:function(){this.inherited(arguments),enyo.platform.firefoxOS&&(this.moreComponents[2].ondown="fxosDown",this.moreComponents[2].onenter="fxosEnter",this.moreComponents[2].ondrag="fxosDrag",this.moreComponents[2].onleave="fxosLeave",this.moreComponents[2].onup="fxosUp"),this.createComponents(this.moreComponents),this.valueChanged()},valueChanged:function(){this.value=this.clampValue(this.min,this.max,this.value);var t=this.calcPercent(this.value);this.updateKnobPosition(t),this.lockBar&&this.setProgress(this.value)},updateKnobPosition:function(t){this.$.knob.applyStyle("left",t+"%")},calcKnobPosition:function(t){var e=t.clientX-this.hasNode().getBoundingClientRect().left;return e/this.getBounds().width*(this.max-this.min)+this.min},dragstart:function(t,e){return e.horizontal?(e.preventDefault(),this.dragging=!0,!0):void 0},drag:function(t,e){if(this.dragging){var n=this.calcKnobPosition(e);return n=this.increment?this.calcIncrement(n):n,this.setValue(n),this.doChanging({value:this.value}),!0}},dragfinish:function(t,e){return this.dragging=!1,e.preventTap(),this.doChange({value:this.value}),!0},tap:function(t,e){if(this.tappable){var n=this.calcKnobPosition(e);return n=this.increment?this.calcIncrement(n):n,this.tapped=!0,this.animateTo(n),!0}},fxosDown:function(){this.$.knob.addClass("pressed"),this._isInControl=!0},fxosEnter:function(){this._isInControl=!0},fxosDrag:function(){this.$.knob.addRemoveClass("pressed",this._isInControl)},fxosLeave:function(){this.$.knob.removeClass("pressed"),this._isInControl=!1},fxosUp:function(){this.$.knob.removeClass("pressed"),this._isInControl=!1},animateTo:function(t){this.$.animator.play({startValue:this.value,endValue:t,node:this.hasNode()})},animatorStep:function(t){return this.setValue(t.value),!0},animatorComplete:function(t){return this.tapped&&(this.tapped=!1,this.doChange({value:this.value})),this.doAnimateFinish(t),!0}});

// lib/onyx/source/RangeSlider.js
enyo.kind({name:"onyx.RangeSlider",kind:"onyx.ProgressBar",classes:"onyx-slider",published:{rangeMin:0,rangeMax:100,rangeStart:0,rangeEnd:100,beginValue:0,endValue:0},events:{onChange:"",onChanging:""},showStripes:!1,showLabels:!1,handlers:{ondragstart:"dragstart",ondrag:"drag",ondragfinish:"dragfinish",ondown:"down"},moreComponents:[{name:"startKnob",classes:"onyx-slider-knob"},{name:"endKnob",classes:"onyx-slider-knob onyx-range-slider-knob"}],create:function(){this.inherited(arguments),this.createComponents(this.moreComponents),this.initControls()},rendered:function(){this.inherited(arguments);var t=this.calcPercent(this.beginValue);this.updateBarPosition(t)},initControls:function(){this.$.bar.applyStyle("position","relative"),this.refreshRangeSlider(),this.showLabels&&(this.$.startKnob.createComponent({name:"startLabel",kind:"onyx.RangeSliderKnobLabel"}),this.$.endKnob.createComponent({name:"endLabel",kind:"onyx.RangeSliderKnobLabel"}))},refreshRangeSlider:function(){this.beginValue=this.calcKnobPercent(this.rangeStart),this.endValue=this.calcKnobPercent(this.rangeEnd),this.beginValueChanged(),this.endValueChanged()},calcKnobRatio:function(t){return(t-this.rangeMin)/(this.rangeMax-this.rangeMin)},calcKnobPercent:function(t){return 100*this.calcKnobRatio(t)},beginValueChanged:function(t){if(void 0===t){var n=this.calcPercent(this.beginValue);this.updateKnobPosition(n,this.$.startKnob)}},endValueChanged:function(t){if(void 0===t){var n=this.calcPercent(this.endValue);this.updateKnobPosition(n,this.$.endKnob)}},calcKnobPosition:function(t){var n=t.clientX-this.hasNode().getBoundingClientRect().left;return n/this.getBounds().width*(this.max-this.min)+this.min},updateKnobPosition:function(t,n){n.applyStyle("left",t+"%"),this.updateBarPosition()},updateBarPosition:function(){if(void 0!==this.$.startKnob&&void 0!==this.$.endKnob){var t=this.calcKnobPercent(this.rangeStart),n=this.calcKnobPercent(this.rangeEnd)-t;this.$.bar.applyStyle("left",t+"%"),this.$.bar.applyStyle("width",n+"%")}},calcRangeRatio:function(t){return t/100*(this.rangeMax-this.rangeMin)+this.rangeMin-this.increment/2},swapZIndex:function(t){"startKnob"===t?(this.$.startKnob.applyStyle("z-index",1),this.$.endKnob.applyStyle("z-index",0)):"endKnob"===t&&(this.$.startKnob.applyStyle("z-index",0),this.$.endKnob.applyStyle("z-index",1))},down:function(t){this.swapZIndex(t.name)},dragstart:function(t,n){return n.horizontal?(n.preventDefault(),this.dragging=!0,!0):void 0},drag:function(t,n){if(this.dragging){var e,i,r,s=this.calcKnobPosition(n);if("startKnob"===t.name&&s>=0){if(!(this.endValue>=s&&-1===n.xDirection||this.endValue>=s))return this.drag(this.$.endKnob,n);this.setBeginValue(s),e=this.calcRangeRatio(this.beginValue),i=this.increment?this.calcIncrement(e+.5*this.increment):e,r=this.calcKnobPercent(i),this.updateKnobPosition(r,this.$.startKnob),this.setRangeStart(i),this.doChanging({value:i})}else if("endKnob"===t.name&&100>=s){if(!(s>=this.beginValue&&1===n.xDirection||s>=this.beginValue))return this.drag(this.$.startKnob,n);this.setEndValue(s),e=this.calcRangeRatio(this.endValue),i=this.increment?this.calcIncrement(e+.5*this.increment):e,r=this.calcKnobPercent(i),this.updateKnobPosition(r,this.$.endKnob),this.setRangeEnd(i),this.doChanging({value:i})}return!0}},dragfinish:function(t,n){this.dragging=!1,n.preventTap();var e;return"startKnob"===t.name?(e=this.calcRangeRatio(this.beginValue),this.doChange({value:e,startChanged:!0})):"endKnob"===t.name&&(e=this.calcRangeRatio(this.endValue),this.doChange({value:e,startChanged:!1})),!0},rangeMinChanged:function(){this.refreshRangeSlider()},rangeMaxChanged:function(){this.refreshRangeSlider()},rangeStartChanged:function(){this.refreshRangeSlider()},rangeEndChanged:function(){this.refreshRangeSlider()},setStartLabel:function(t){this.$.startKnob.waterfallDown("onSetLabel",t)},setEndLabel:function(t){this.$.endKnob.waterfallDown("onSetLabel",t)}}),enyo.kind({name:"onyx.RangeSliderKnobLabel",classes:"onyx-range-slider-label",handlers:{onSetLabel:"setLabel"},setLabel:function(t,n){this.setContent(n)}});

// lib/onyx/source/Item.js
enyo.kind({name:"onyx.Item",classes:"onyx-item",tapHighlight:!0,handlers:{onhold:"hold",onrelease:"release"},hold:function(t,n){this.tapHighlight&&onyx.Item.addRemoveFlyweightClass(this.controlParent||this,"onyx-highlight",!0,n)},release:function(t,n){this.tapHighlight&&onyx.Item.addRemoveFlyweightClass(this.controlParent||this,"onyx-highlight",!1,n)},statics:{addRemoveFlyweightClass:function(t,n,e,i,r){var s=i.flyweight;if(s){var o=void 0!==r?r:i.index;s.performOnRow(o,function(){t.addRemoveClass(n,e)})}}}});

// lib/onyx/source/Spinner.js
enyo.kind({name:"onyx.Spinner",classes:"onyx-spinner",stop:function(){this.setShowing(!1)},start:function(){this.setShowing(!0)},toggle:function(){this.setShowing(!this.getShowing())}});

// lib/onyx/source/MoreToolbar.js
enyo.kind({name:"onyx.MoreToolbar",classes:"onyx-toolbar onyx-more-toolbar",menuClass:"",movedClass:"",layoutKind:"FittableColumnsLayout",noStretch:!0,handlers:{onHide:"reflow"},published:{clientLayoutKind:"FittableColumnsLayout"},tools:[{name:"client",noStretch:!0,fit:!0,classes:"onyx-toolbar-inline"},{name:"nard",kind:"onyx.MenuDecorator",showing:!1,onActivate:"activated",components:[{kind:"onyx.IconButton",classes:"onyx-more-button"},{name:"menu",kind:"onyx.Menu",scrolling:!1,classes:"onyx-more-menu"}]}],initComponents:function(){this.menuClass&&this.menuClass.length>0&&!this.$.menu.hasClass(this.menuClass)&&this.$.menu.addClass(this.menuClass),this.createChrome(this.tools),this.inherited(arguments),this.$.client.setLayoutKind(this.clientLayoutKind)},clientLayoutKindChanged:function(){this.$.client.setLayoutKind(this.clientLayoutKind)},reflow:function(){this.inherited(arguments),this.isContentOverflowing()?(this.$.nard.show(),this.popItem()&&this.reflow()):this.tryPushItem()?this.reflow():this.$.menu.children.length||(this.$.nard.hide(),this.$.menu.hide())},activated:function(t,n){this.addRemoveClass("active",n.originator.active)},popItem:function(){var t=this.findCollapsibleItem();if(t){this.movedClass&&this.movedClass.length>0&&!t.hasClass(this.movedClass)&&t.addClass(this.movedClass),this.$.menu.addChild(t,null);var n=this.$.menu.hasNode();return n&&t.hasNode()&&t.insertNodeInParent(n),!0}},pushItem:function(){var t=this.$.menu.children,n=t[0];if(n){this.movedClass&&this.movedClass.length>0&&n.hasClass(this.movedClass)&&n.removeClass(this.movedClass),this.$.client.addChild(n);var e=this.$.client.hasNode();if(e&&n.hasNode()){for(var i,r,s=0;this.$.client.children.length>s;s++){var o=this.$.client.children[s];if(void 0!==o.toolbarIndex&&o.toolbarIndex!=s){i=o,r=s;break}}if(i&&i.hasNode()){n.insertNodeInParent(e,i.node);var a=this.$.client.children.pop();this.$.client.children.splice(r,0,a)}else n.appendNodeToParent(e)}return!0}},tryPushItem:function(){if(this.pushItem()){if(!this.isContentOverflowing())return!0;this.popItem()}},isContentOverflowing:function(){if(this.$.client.hasNode()){var t=this.$.client.children,n=t.length&&t[t.length-1].hasNode();if(n)return this.$.client.reflow(),n.offsetLeft+n.offsetWidth>this.$.client.node.clientWidth}},findCollapsibleItem:function(){for(var t,n=this.$.client.children,e=n.length-1;t=n[e];e--){if(!t.unmoveable)return t;void 0===t.toolbarIndex&&(t.toolbarIndex=e)}}});

// lib/onyx/source/IntegerPicker.js
enyo.kind({name:"onyx.IntegerPicker",kind:"onyx.Picker",published:{value:0,min:0,max:9},create:function(){this.inherited(arguments),this.rangeChanged()},minChanged:function(){this.destroyClientControls(),this.rangeChanged(),this.render()},maxChanged:function(){this.destroyClientControls(),this.rangeChanged(),this.render()},rangeChanged:function(){for(var t=this.min;this.max>=t;t++)this.createComponent({content:t,active:t===this.value?!0:!1})},valueChanged:function(){var t=this.getClientControls(),e=t.length;this.value=Math.min(this.max,Math.max(this.value,this.min));for(var n=0;e>n;n++)if(this.value===parseInt(t[n].content,10)){this.setSelected(t[n]);break}},selectedChanged:function(t){t&&t.removeClass("selected"),this.selected&&(this.selected.addClass("selected"),this.doChange({selected:this.selected,content:this.selected.content})),this.setValue(parseInt(this.selected.content,10))}});

// lib/onyx/source/ContextualPopup.js
enyo.kind({name:"onyx.ContextualPopup",kind:"enyo.Popup",modal:!0,autoDismiss:!0,floating:!1,classes:"onyx-contextual-popup enyo-unselectable",published:{maxHeight:100,scrolling:!0,title:void 0,actionButtons:[]},vertFlushMargin:60,horizFlushMargin:50,widePopup:200,longPopup:200,horizBuffer:16,events:{onTap:""},handlers:{onRequestShowMenu:"requestShow",onRequestHideMenu:"requestHide"},components:[{name:"title",classes:"onyx-contextual-popup-title"},{classes:"onyx-contextual-popup-scroller",components:[{name:"client",kind:"enyo.Scroller",vertical:"auto",classes:"enyo-unselectable",thumb:!1,strategyKind:"TouchScrollStrategy"}]},{name:"actionButtons",classes:"onyx-contextual-popup-action-buttons"}],scrollerName:"client",create:function(){this.inherited(arguments),this.maxHeightChanged(),this.titleChanged(),this.actionButtonsChanged()},getScroller:function(){return this.$[this.scrollerName]},titleChanged:function(){this.$.title.setContent(this.title)},actionButtonsChanged:function(){for(var t=0;this.actionButtons.length>t;t++)this.$.actionButtons.createComponent({kind:"onyx.Button",content:this.actionButtons[t].content,classes:this.actionButtons[t].classes+" onyx-contextual-popup-action-button",name:this.actionButtons[t].name?this.actionButtons[t].name:"ActionButton"+t,index:t,tap:this.actionButtons[t].ontap?this.owner.bindSafely(this.actionButtons[t].ontap):this.bindSafely(this.tapHandler)})},tapHandler:function(t,e){return e.actionButton=!0,e.popup=this,this.bubble("ontap",e),!0},maxHeightChanged:function(){this.scrolling&&this.getScroller().setMaxHeight(this.maxHeight+"px")},showingChanged:function(){this.inherited(arguments),this.scrolling&&this.getScroller().setShowing(this.showing),this.adjustPosition()},requestShow:function(t,e){var n=e.activator.hasNode();return n&&(this.activatorOffset=this.getPageOffset(n)),this.show(),!0},applyPosition:function(t){var e="";for(var n in t)e+=n+":"+t[n]+(isNaN(t[n])?"; ":"px; ");this.addStyles(e)},getPageOffset:function(t){var e=this.getBoundingRect(t),n=void 0===window.pageYOffset?document.documentElement.scrollTop:window.pageYOffset,i=void 0===window.pageXOffset?document.documentElement.scrollLeft:window.pageXOffset,r=void 0===e.height?e.bottom-e.top:e.height,s=void 0===e.width?e.right-e.left:e.width;return{top:e.top+n,left:e.left+i,height:r,width:s}},adjustPosition:function(){if(this.showing&&this.hasNode()){this.resetPositioning();var t=this.getViewWidth(),e=this.getViewHeight(),n=this.vertFlushMargin,i=e-this.vertFlushMargin,r=this.horizFlushMargin,s=t-this.horizFlushMargin;if(n>this.activatorOffset.top+this.activatorOffset.height||this.activatorOffset.top>i){if(this.applyVerticalFlushPositioning(r,s))return;if(this.applyHorizontalFlushPositioning(r,s))return;if(this.applyVerticalPositioning())return}else if((r>this.activatorOffset.left+this.activatorOffset.width||this.activatorOffset.left>s)&&this.applyHorizontalPositioning())return;var o=this.getBoundingRect(this.node);if(o.width>this.widePopup){if(this.applyVerticalPositioning())return}else if(o.height>this.longPopup&&this.applyHorizontalPositioning())return;if(this.applyVerticalPositioning())return;if(this.applyHorizontalPositioning())return}},initVerticalPositioning:function(){this.resetPositioning(),this.addClass("vertical");var t=this.getBoundingRect(this.node),e=this.getViewHeight();return this.floating?e/2>this.activatorOffset.top?(this.applyPosition({top:this.activatorOffset.top+this.activatorOffset.height,bottom:"auto"}),this.addClass("below")):(this.applyPosition({top:this.activatorOffset.top-t.height,bottom:"auto"}),this.addClass("above")):t.top+t.height>e&&e-t.bottom<t.top-t.height?this.addClass("above"):this.addClass("below"),t=this.getBoundingRect(this.node),t.top+t.height>e||0>t.top?!1:!0},applyVerticalPositioning:function(){if(!this.initVerticalPositioning())return!1;var t=this.getBoundingRect(this.node),e=this.getViewWidth();if(this.floating){var n=this.activatorOffset.left+this.activatorOffset.width/2-t.width/2;n+t.width>e?(this.applyPosition({left:this.activatorOffset.left+this.activatorOffset.width-t.width}),this.addClass("left")):0>n?(this.applyPosition({left:this.activatorOffset.left}),this.addClass("right")):this.applyPosition({left:n})}else{var i=this.activatorOffset.left+this.activatorOffset.width/2-t.left-t.width/2;t.right+i>e?(this.applyPosition({left:this.activatorOffset.left+this.activatorOffset.width-t.right}),this.addRemoveClass("left",!0)):0>t.left+i?this.addRemoveClass("right",!0):this.applyPosition({left:i})}return!0},applyVerticalFlushPositioning:function(t,e){if(!this.initVerticalPositioning())return!1;var n=this.getBoundingRect(this.node),i=this.getViewWidth();return t>this.activatorOffset.left+this.activatorOffset.width/2?(this.activatorOffset.left+this.activatorOffset.width/2<this.horizBuffer?this.applyPosition({left:this.horizBuffer+(this.floating?0:-n.left)}):this.applyPosition({left:this.activatorOffset.width/2+(this.floating?this.activatorOffset.left:0)}),this.addClass("right"),this.addClass("corner"),!0):this.activatorOffset.left+this.activatorOffset.width/2>e?(this.activatorOffset.left+this.activatorOffset.width/2>i-this.horizBuffer?this.applyPosition({left:i-this.horizBuffer-n.right}):this.applyPosition({left:this.activatorOffset.left+this.activatorOffset.width/2-n.right}),this.addClass("left"),this.addClass("corner"),!0):!1},initHorizontalPositioning:function(){this.resetPositioning();var t=this.getBoundingRect(this.node),e=this.getViewWidth();return this.floating?e/2>this.activatorOffset.left+this.activatorOffset.width?(this.applyPosition({left:this.activatorOffset.left+this.activatorOffset.width}),this.addRemoveClass("left",!0)):(this.applyPosition({left:this.activatorOffset.left-t.width}),this.addRemoveClass("right",!0)):this.activatorOffset.left-t.width>0?(this.applyPosition({left:this.activatorOffset.left-t.left-t.width}),this.addRemoveClass("right",!0)):(this.applyPosition({left:this.activatorOffset.width}),this.addRemoveClass("left",!0)),this.addRemoveClass("horizontal",!0),t=this.getBoundingRect(this.node),0>t.left||t.left+t.width>e?!1:!0},applyHorizontalPositioning:function(){if(!this.initHorizontalPositioning())return!1;var t=this.getBoundingRect(this.node),e=this.getViewHeight(),n=this.activatorOffset.top+this.activatorOffset.height/2;return this.floating?n>=e/2-.05*e&&e/2+.05*e>=n?this.applyPosition({top:this.activatorOffset.top+this.activatorOffset.height/2-t.height/2,bottom:"auto"}):e/2>this.activatorOffset.top+this.activatorOffset.height?(this.applyPosition({top:this.activatorOffset.top-this.activatorOffset.height,bottom:"auto"}),this.addRemoveClass("high",!0)):(this.applyPosition({top:this.activatorOffset.top-t.height+2*this.activatorOffset.height,bottom:"auto"}),this.addRemoveClass("low",!0)):n>=e/2-.05*e&&e/2+.05*e>=n?this.applyPosition({top:(this.activatorOffset.height-t.height)/2}):e/2>this.activatorOffset.top+this.activatorOffset.height?(this.applyPosition({top:-this.activatorOffset.height}),this.addRemoveClass("high",!0)):(this.applyPosition({top:t.top-t.height-this.activatorOffset.top+this.activatorOffset.height}),this.addRemoveClass("low",!0)),!0},applyHorizontalFlushPositioning:function(t,e){if(!this.initHorizontalPositioning())return!1;var n=this.getBoundingRect(this.node),i=this.getViewHeight();return this.floating?i/2>this.activatorOffset.top?(this.applyPosition({top:this.activatorOffset.top+this.activatorOffset.height/2}),this.addRemoveClass("high",!0)):(this.applyPosition({top:this.activatorOffset.top+this.activatorOffset.height/2-n.height}),this.addRemoveClass("low",!0)):n.top+n.height>i&&i-n.bottom<n.top-n.height?(this.applyPosition({top:n.top-n.height-this.activatorOffset.top-this.activatorOffset.height/2}),this.addRemoveClass("low",!0)):(this.applyPosition({top:this.activatorOffset.height/2}),this.addRemoveClass("high",!0)),t>this.activatorOffset.left+this.activatorOffset.width?(this.addClass("left"),this.addClass("corner"),!0):this.activatorOffset.left>e?(this.addClass("right"),this.addClass("corner"),!0):!1},getBoundingRect:function(t){var e=t.getBoundingClientRect();return e.width&&e.height?e:{left:e.left,right:e.right,top:e.top,bottom:e.bottom,width:e.right-e.left,height:e.bottom-e.top}},getViewHeight:function(){return void 0===window.innerHeight?document.documentElement.clientHeight:window.innerHeight},getViewWidth:function(){return void 0===window.innerWidth?document.documentElement.clientWidth:window.innerWidth},resetPositioning:function(){this.removeClass("right"),this.removeClass("left"),this.removeClass("high"),this.removeClass("low"),this.removeClass("corner"),this.removeClass("below"),this.removeClass("above"),this.removeClass("vertical"),this.removeClass("horizontal"),this.applyPosition({left:"auto"}),this.applyPosition({top:"auto"})},resizeHandler:function(){this.inherited(arguments),this.adjustPosition()},requestHide:function(){this.setShowing(!1)}});

// source/StatInfApp.js
enyo.kind({name:"App",kind:"FittableRows",fit:!0,components:[{kind:"onyx.MoreToolbar",style:"height:"+cqls.enyo.top+"px;",components:[{kind:"onyx.Button",content:"Add",name:"addButton",ontap:"simTap"},{kind:"onyx.Button",content:"Pause",name:"pauseButton",ontap:"pauseTap"},{kind:"onyx.MenuDecorator",name:"distMenu",onSelect:"distribSelected",components:[{content:"D."},{kind:"onyx.Menu",components:[{id:"discreteUniform",content:"Uniform Discrete"},{id:"bernoulli",content:"Bernoulli"},{id:"binomial",content:"Binomial"},{classes:"onyx-menu-divider"},{id:"stdNormal",content:"N(0,1)"},{id:"uniform",content:"Uniform"},{id:"normal",content:"Normal"},{id:"t",content:"Student"},{id:"chi2",content:"Chi2"},{classes:"onyx-menu-divider"},{id:"cauchy",content:"Cauchy"}]}]},{kind:"onyx.MenuDecorator",name:"transfMenu",onSelect:"transfSelected",components:[{content:"T."},{kind:"onyx.Menu",components:[{id:"none",content:"None"},{id:"center",content:"Center"},{id:"locationScale",content:"Center-Reduce"},{classes:"onyx-menu-divider"},{id:"sum",content:"Sample Sum"},{id:"mean",content:"Sample Mean"},{id:"stdMean",content:"Standardized Mean Error"},{id:"sumOfSq",content:"Sum of squares"}]}]},{kind:"onyx.MenuDecorator",name:"nMenu",onSelect:"nSelected",components:[{content:"n"},{kind:"onyx.Menu",components:[{id:"2",content:"2"},{id:"4",content:"4"},{id:"10",content:"10"},{id:"16",content:"16"},{id:"30",content:"30"},{id:"32",content:"32"},{id:"64",content:"64"},{id:"100",content:"100"},{id:"128",content:"128"},{id:"256",content:"256"},{id:"512",content:"512"},{id:"1000",content:"1000"},{id:"1024",content:"1024"}]}]},{kind:"onyx.Button",content:"Zoom",name:"zoomButton",ontap:"zoomTap"}]},{tag:"canvas",id:"createjsCanvas",ontap:"onTapCanvas",attributes:{width:cqls.i.dim.w,height:2*cqls.i.dim.h}},{kind:"onyx.MoreToolbar",style:"height:"+cqls.enyo.bottom+"px;",components:[{kind:"onyx.ToggleButton",ontap:"toggleAnimMode",value:!0},{classes:"onyx-sample-tools",components:[{kind:"onyx.Checkbox",name:"checkTCL",onchange:"toggleTCL"},{kind:"onyx.Checkbox",name:"checkHistCurve",onchange:"toggleHistCurve"}]}]}],distribSelected:function(t,e){cqls.m.play.$setDistrib(e.selected.id),cqls.m.play.$reset(),cqls.m.stage.update()},transfSelected:function(t,e){cqls.m.play.$setTransf(e.selected.id),["none","locationScale","center"].indexOf(e.selected.id)>0?this.$.nMenu.hide():this.$.nMenu.show(),cqls.m.play.$reset(),cqls.m.stage.update()},nSelected:function(t,e){cqls.m.play.$setN(parseInt(e.selected.id)),cqls.m.play.$reset(),cqls.m.stage.update()},simTap:function(t){cqls.i.loop=!cqls.i.loop,t.addRemoveClass("active",cqls.i.loop),cqls.i.loop?(this.$.pauseButton.show(),this.$.distMenu.hide(),this.$.transfMenu.hide(),this.$.nMenu.hide(),cqls.f.updateDemo()):(this.$.pauseButton.hide(),this.$.distMenu.show(),this.$.transfMenu.show())},pauseTap:function(t){cqls.i.paused=!cqls.i.paused,t.addRemoveClass("active",cqls.i.paused),createjs.Ticker.setPaused(cqls.i.paused),this.$.addButton.disabled=cqls.i.paused,this.$.zoomButton.disabled=cqls.i.paused},zoomTap:function(){cqls.m.play.graphExp.$toggleZoomTo(cqls.m.play.plotExp),cqls.m.stage.update()},toggleAnimMode:function(t){cqls.i.anim=t.getValue(),cqls.m.stage.update()},toggleHistCurve:function(t){cqls.m.play.histCur.curveShape.visible=t.getValue()},toggleTCL:function(t){cqls.m.play.$showTCL(t.getValue()),cqls.m.stage.update()},onTapCanvas:function(){var t=enyo.getPosition();cqls.f.onTap(t.clientX/cqls.m.stage.scaleX,(t.clientY-cqls.enyo.top)/cqls.m.stage.scaleY)}});
